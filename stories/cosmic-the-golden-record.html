<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Golden Record — A Cosmic Interactive Story</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400;500;600;700&family=Lexend:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* ================================================================
           COSMIC DESIGN SYSTEM — Story Adaptation
        ================================================================ */

        :root {
            --void-black: #030108;
            --deep-space: #0a0612;
            --nebula-purple: #2d1b4e;
            --cosmic-pink: #e056a0;
            --cosmic-pink-glow: rgba(224, 86, 160, 0.6);
            --aurora-teal: #40e0d0;
            --aurora-teal-glow: rgba(64, 224, 208, 0.5);
            --star-white: #f0f0ff;
            --star-warm: #fff5e6;
            --nebula-blue: #1a0a3e;
            --nebula-rose: #4a1942;
            --stellar-gold: #ffd700;
            --stellar-gold-glow: rgba(255, 215, 0, 0.4);
            --distant-blue: #6b5b95;
            --cosmic-violet: #7b2d8e;

            --bg-void: var(--void-black);
            --bg-space: var(--deep-space);
            --bg-nebula: rgba(45, 27, 78, 0.4);
            --bg-card: rgba(20, 10, 40, 0.6);
            --bg-card-hover: rgba(30, 15, 60, 0.8);

            --text-primary: rgba(240, 240, 255, 0.95);
            --text-secondary: rgba(200, 195, 220, 0.8);
            --text-muted: rgba(150, 140, 180, 0.6);

            --border-subtle: rgba(224, 86, 160, 0.15);
            --border-glow: rgba(64, 224, 208, 0.3);
            --border-active: var(--aurora-teal);

            --gradient-nebula: linear-gradient(135deg, var(--nebula-purple) 0%, var(--nebula-rose) 50%, var(--nebula-blue) 100%);
            --gradient-aurora: linear-gradient(135deg, var(--aurora-teal) 0%, var(--cosmic-pink) 100%);
            --gradient-cosmic: linear-gradient(180deg, var(--void-black) 0%, var(--nebula-purple) 50%, var(--nebula-rose) 100%);

            --font-display: 'Cormorant Garamond', Georgia, serif;
            --font-body: 'Lexend', sans-serif;

            --space-1: 4px; --space-2: 8px; --space-3: 12px; --space-4: 16px;
            --space-5: 24px; --space-6: 32px; --space-7: 48px; --space-8: 64px;
            --space-9: 96px; --space-10: 128px;

            --glow-pink: 0 0 20px var(--cosmic-pink-glow), 0 0 40px var(--cosmic-pink-glow);
            --glow-teal: 0 0 20px var(--aurora-teal-glow), 0 0 40px var(--aurora-teal-glow);
            --glow-gold: 0 0 15px var(--stellar-gold-glow), 0 0 30px var(--stellar-gold-glow);
            --glow-star: 0 0 10px rgba(255, 255, 255, 0.8), 0 0 20px rgba(255, 255, 255, 0.4);

            --transition-fast: 0.15s ease;
            --transition-base: 0.3s ease;
            --transition-slow: 0.6s ease;
            --transition-drift: 2s ease-in-out;

            --radius-sm: 4px; --radius-md: 8px; --radius-lg: 16px;
            --radius-xl: 24px; --radius-full: 9999px;
        }

        /* --- KEYFRAME ANIMATIONS --- */
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }
        @keyframes twinkle-slow {
            0%, 100% { opacity: 0.2; }
            50% { opacity: 0.8; }
        }
        @keyframes twinkle-fast {
            0%, 100% { opacity: 0.4; transform: scale(0.8); }
            25% { opacity: 1; transform: scale(1.1); }
            75% { opacity: 0.6; transform: scale(1); }
        }
        @keyframes nebula-drift {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.4; }
            33% { transform: translate(30px, -20px) scale(1.1); opacity: 0.6; }
            66% { transform: translate(-20px, 30px) scale(0.95); opacity: 0.5; }
        }
        @keyframes cosmic-pulse {
            0%, 100% {
                box-shadow: 0 0 20px var(--cosmic-pink-glow);
                border-color: var(--cosmic-pink);
            }
            50% {
                box-shadow: 0 0 40px var(--cosmic-pink-glow), 0 0 60px var(--aurora-teal-glow);
                border-color: var(--aurora-teal);
            }
        }
        @keyframes celestial-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes star-shimmer {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        @keyframes aurora-wave {
            0%, 100% { background-position: 0% 50%; filter: hue-rotate(0deg); }
            50% { background-position: 100% 50%; filter: hue-rotate(30deg); }
        }
        @keyframes shooting-star {
            0% { transform: translateX(-100px) translateY(100px) rotate(-45deg); opacity: 0; }
            10% { opacity: 1; }
            100% { transform: translateX(calc(100vw + 100px)) translateY(-100vh) rotate(-45deg); opacity: 0; }
        }
        @keyframes dust-rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        @keyframes constellation-trace {
            0% { stroke-dashoffset: 1000; opacity: 0.3; }
            50% { opacity: 0.8; }
            100% { stroke-dashoffset: 0; opacity: 0.3; }
        }
        @keyframes sceneFadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes choicesFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes factSlideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        @keyframes signalPulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        @keyframes warpTransition {
            0% { opacity: 0; }
            15% { opacity: 1; }
            50% { opacity: 1; }
            85% { opacity: 1; }
            100% { opacity: 0; }
        }

        /* --- BASE RESET --- */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        html { font-size: 16px; scroll-behavior: smooth; }

        body {
            font-family: var(--font-body);
            font-size: 1rem;
            font-weight: 400;
            line-height: 1.7;
            color: var(--text-primary);
            background: var(--bg-void);
            min-height: 100vh;
            overflow-x: hidden;
            letter-spacing: 0.02em;
        }

        /* --- COSMIC BACKGROUND LAYERS --- */
        .cosmic-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background:
                radial-gradient(ellipse at 20% 0%, var(--nebula-purple) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, var(--nebula-rose) 0%, transparent 40%),
                radial-gradient(ellipse at 40% 80%, var(--nebula-blue) 0%, transparent 50%),
                radial-gradient(ellipse at 90% 90%, var(--cosmic-violet) 0%, transparent 40%),
                var(--bg-void);
            z-index: -3;
        }

        .starfield {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: -2;
        }
        .star { position: absolute; background: var(--star-white); border-radius: 50%; }
        .star--tiny { width: 1px; height: 1px; animation: twinkle-slow 4s ease-in-out infinite; }
        .star--small { width: 2px; height: 2px; box-shadow: 0 0 3px var(--star-white); animation: twinkle 3s ease-in-out infinite; }
        .star--medium { width: 3px; height: 3px; box-shadow: 0 0 6px var(--star-white), 0 0 10px rgba(255,255,255,0.3); animation: twinkle-fast 2s ease-in-out infinite; }
        .star--bright { width: 4px; height: 4px; background: var(--star-warm); box-shadow: 0 0 10px var(--star-warm), 0 0 20px rgba(255,245,230,0.5), 0 0 30px rgba(255,245,230,0.3); animation: twinkle 2.5s ease-in-out infinite; }

        .nebula-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; overflow: hidden; }
        .nebula-cloud { position: absolute; border-radius: 50%; filter: blur(100px); animation: nebula-drift 30s ease-in-out infinite; }
        .nebula-cloud--pink { width: 600px; height: 600px; background: radial-gradient(circle, var(--cosmic-pink-glow) 0%, transparent 70%); top: -200px; right: -100px; }
        .nebula-cloud--teal { width: 500px; height: 500px; background: radial-gradient(circle, var(--aurora-teal-glow) 0%, transparent 70%); bottom: -150px; left: -100px; animation-delay: -10s; }
        .nebula-cloud--purple { width: 700px; height: 700px; background: radial-gradient(circle, rgba(123,45,142,0.3) 0%, transparent 70%); top: 50%; left: 50%; transform: translate(-50%,-50%); animation-delay: -20s; }

        .shooting-star {
            position: fixed; width: 100px; height: 2px;
            background: linear-gradient(90deg, transparent, var(--star-white), transparent);
            animation: shooting-star 8s linear infinite; opacity: 0; z-index: 0;
        }
        .shooting-star:nth-child(1) { top: 20%; animation-delay: 0s; }
        .shooting-star:nth-child(2) { top: 40%; animation-delay: 4s; }
        .shooting-star:nth-child(3) { top: 60%; animation-delay: 8s; }

        .cosmic-dust {
            position: fixed; top: 0; left: 0; width: 200%; height: 200%;
            background-image:
                radial-gradient(1px 1px at 20px 30px, rgba(255,255,255,0.3), transparent),
                radial-gradient(1px 1px at 40px 70px, rgba(255,255,255,0.2), transparent),
                radial-gradient(1px 1px at 50px 160px, rgba(255,255,255,0.3), transparent),
                radial-gradient(1px 1px at 90px 40px, rgba(255,255,255,0.2), transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.3), transparent),
                radial-gradient(1px 1px at 160px 120px, rgba(255,255,255,0.2), transparent);
            background-size: 200px 200px;
            animation: dust-rotate 200s linear infinite;
            pointer-events: none; z-index: 0; opacity: 0.5;
        }

        /* --- LAYOUT --- */
        .game-container {
            max-width: 800px;
            margin: 0 auto;
            padding: var(--space-6);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        /* --- TITLE SCREEN --- */
        .title-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 80vh;
            text-align: center;
            position: relative;
        }

        .title-screen::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 400px; height: 400px;
            background: radial-gradient(circle, var(--cosmic-pink-glow) 0%, transparent 70%);
            filter: blur(60px);
            opacity: 0.4;
            animation: cosmic-pulse 8s ease-in-out infinite;
            pointer-events: none;
        }

        .title-eyebrow {
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 6px;
            color: var(--aurora-teal);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-4);
        }
        .title-eyebrow::before, .title-eyebrow::after {
            content: ''; width: 40px; height: 1px;
            background: linear-gradient(90deg, transparent, var(--aurora-teal));
        }
        .title-eyebrow::after {
            background: linear-gradient(90deg, var(--aurora-teal), transparent);
        }

        .title-screen h1 {
            font-family: var(--font-display);
            font-size: clamp(3rem, 10vw, 6rem);
            font-weight: 300;
            letter-spacing: 0.05em;
            line-height: 1.1;
            margin-bottom: var(--space-5);
            background: linear-gradient(135deg, var(--star-white) 0%, var(--cosmic-pink) 50%, var(--aurora-teal) 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: aurora-wave 8s ease-in-out infinite;
        }

        .title-subtitle {
            font-family: var(--font-body);
            font-size: 1.1rem;
            font-weight: 300;
            color: var(--text-secondary);
            max-width: 500px;
            margin: 0 auto var(--space-7);
            line-height: 1.8;
        }

        .title-start {
            font-family: var(--font-body);
            font-size: 0.875rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            padding: var(--space-4) var(--space-8);
            border: 1px solid transparent;
            border-radius: var(--radius-full);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-base);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: var(--gradient-aurora);
            color: var(--void-black);
            box-shadow: 0 4px 20px var(--cosmic-pink-glow);
        }
        .title-start::before {
            content: '';
            position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        .title-start:hover::before { left: 100%; }
        .title-start:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px var(--cosmic-pink-glow), var(--glow-teal);
        }

        .title-credits {
            margin-top: var(--space-6);
            font-size: 0.8rem;
            color: var(--text-muted);
            font-style: italic;
        }

        /* --- SCENE WRAPPER --- */
        .scene-wrapper {
            display: none;
            flex-direction: column;
            flex: 1;
            padding-top: var(--space-5);
        }
        .scene-wrapper.active { display: flex; }

        .scene-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: var(--space-4);
            margin-bottom: var(--space-6);
            border-bottom: 1px solid var(--border-subtle);
        }
        .scene-signal-id {
            font-size: 0.7rem;
            font-weight: 500;
            color: var(--aurora-teal);
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }
        .scene-fact-count {
            font-size: 0.7rem;
            color: var(--stellar-gold);
            letter-spacing: 0.1em;
        }

        /* --- SCENE CONTENT --- */
        .scene-content { animation: sceneFadeIn 0.8s ease-out; }

        /* --- TYPOGRAPHY CLASSES --- */
        .type-display {
            font-family: var(--font-display);
            font-size: 4rem;
            font-weight: 300;
            letter-spacing: 0.02em;
            line-height: 1.1;
            background: var(--gradient-aurora);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .type-heading {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 400;
            letter-spacing: 0.02em;
        }
        .type-subheading {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 500;
        }
        .type-body-large {
            font-family: var(--font-body);
            font-size: 1.125rem;
            font-weight: 300;
            line-height: 1.8;
            color: var(--text-secondary);
        }
        .type-body {
            font-family: var(--font-body);
            font-size: 1rem;
            line-height: 1.7;
        }
        .type-caption {
            font-family: var(--font-body);
            font-size: 0.875rem;
            color: var(--text-muted);
        }

        /* --- CARDS --- */
        .card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            position: relative;
            overflow: hidden;
            transition: all var(--transition-base);
            margin-bottom: var(--space-5);
        }
        .card::before {
            content: '';
            position: absolute; top: 0; left: 0; right: 0;
            height: 2px;
            background: var(--gradient-aurora);
            opacity: 0;
            transition: opacity var(--transition-base);
        }
        .card:hover { transform: translateY(-4px); border-color: var(--border-glow); background: var(--bg-card-hover); }
        .card:hover::before { opacity: 1; }

        .card-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            font-weight: 500;
            margin-bottom: var(--space-3);
        }
        .card-content {
            color: var(--text-secondary);
            font-size: 0.95rem;
            line-height: 1.8;
        }

        .card-featured {
            border-color: var(--cosmic-pink);
            background: linear-gradient(135deg, rgba(224, 86, 160, 0.1), rgba(64, 224, 208, 0.05));
        }
        .card-featured::before { opacity: 1; }

        /* --- SECTION TITLE --- */
        .section-title {
            font-family: var(--font-display);
            font-size: 2.5rem;
            font-weight: 400;
            letter-spacing: 0.03em;
            color: var(--text-primary);
            margin-bottom: var(--space-5);
            text-align: center;
        }

        /* --- BADGES --- */
        .badge {
            font-size: 0.7rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-full);
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            color: var(--text-secondary);
        }
        .badge-teal { border-color: var(--aurora-teal); color: var(--aurora-teal); }
        .badge-pink { border-color: var(--cosmic-pink); color: var(--cosmic-pink); }
        .badge-gold { border-color: var(--stellar-gold); color: var(--stellar-gold); }
        .badge-teal.badge-filled { background: var(--aurora-teal); border-color: var(--aurora-teal); color: var(--void-black); }
        .badge-pink.badge-filled { background: var(--cosmic-pink); border-color: var(--cosmic-pink); color: var(--void-black); }
        .badge-gold.badge-filled { background: var(--stellar-gold); border-color: var(--stellar-gold); color: var(--void-black); }
        .badge-pulse-dot {
            width: 6px; height: 6px;
            background: currentColor;
            border-radius: 50%;
            animation: twinkle 2s ease-in-out infinite;
        }

        /* --- PROGRESS --- */
        .progress-container { margin-bottom: var(--space-5); }
        .progress-header {
            display: flex; justify-content: space-between;
            margin-bottom: var(--space-2); font-size: 0.875rem;
        }
        .progress-bar {
            height: 8px;
            background: var(--bg-card);
            border-radius: var(--radius-full);
            overflow: hidden;
            border: 1px solid var(--border-subtle);
        }
        .progress-fill {
            height: 100%;
            background: var(--gradient-aurora);
            border-radius: var(--radius-full);
            position: relative;
            transition: width var(--transition-slow);
        }
        .progress-fill::after {
            content: '';
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: star-shimmer 2s ease-in-out infinite;
        }

        /* --- ALERTS --- */
        .alert {
            padding: var(--space-5);
            border-radius: var(--radius-lg);
            margin-bottom: var(--space-4);
            display: flex;
            gap: var(--space-4);
            align-items: flex-start;
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
        }
        .alert-icon { font-size: 1.25rem; line-height: 1; }
        .alert-content { flex: 1; }
        .alert-title {
            font-family: var(--font-display);
            font-weight: 500;
            font-size: 1.1rem;
            margin-bottom: var(--space-1);
        }
        .alert-message {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .alert-info { border-left: 3px solid var(--aurora-teal); }
        .alert-cosmic {
            border-left: 3px solid var(--cosmic-pink);
            background: linear-gradient(90deg, rgba(224, 86, 160, 0.1), transparent);
        }
        .alert-warning { border-left: 3px solid var(--stellar-gold); }

        /* --- COSMIC DIVIDER --- */
        .cosmic-divider {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-5);
            margin: var(--space-7) 0;
        }
        .cosmic-divider-line {
            flex: 1; height: 1px;
            background: linear-gradient(90deg, transparent, var(--border-subtle), transparent);
        }
        .cosmic-divider-star {
            width: 12px; height: 12px;
            background: var(--star-white);
            border-radius: 50%;
            box-shadow: var(--glow-star);
            animation: twinkle 3s ease-in-out infinite;
        }

        /* --- BUTTONS --- */
        .btn {
            font-family: var(--font-body);
            font-size: 0.875rem;
            font-weight: 500;
            letter-spacing: 0.05em;
            padding: var(--space-3) var(--space-6);
            border: 1px solid transparent;
            border-radius: var(--radius-full);
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all var(--transition-base);
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
        }
        .btn::before {
            content: '';
            position: absolute; top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s ease;
        }
        .btn:hover::before { left: 100%; }

        .btn-primary {
            background: var(--gradient-aurora);
            color: var(--void-black);
            box-shadow: 0 4px 20px var(--cosmic-pink-glow);
        }
        .btn-primary:hover { transform: translateY(-3px); box-shadow: 0 8px 30px var(--cosmic-pink-glow), var(--glow-teal); }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--cosmic-pink);
            color: var(--cosmic-pink);
        }
        .btn-secondary:hover { background: rgba(224, 86, 160, 0.1); box-shadow: var(--glow-pink); transform: translateY(-2px); }

        .btn-celestial {
            background: transparent;
            border: 1px solid var(--stellar-gold);
            color: var(--stellar-gold);
            animation: cosmic-pulse 4s ease-in-out infinite;
        }
        .btn-celestial:hover { background: rgba(255, 215, 0, 0.1); box-shadow: var(--glow-gold); }

        .btn-ghost {
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-subtle);
            color: var(--text-primary);
        }
        .btn-ghost:hover { border-color: var(--aurora-teal); background: var(--bg-card-hover); }

        /* --- UTILITY --- */
        .text-center { text-align: center; }
        .text-pink { color: var(--cosmic-pink); }
        .text-teal { color: var(--aurora-teal); }
        .text-gold { color: var(--stellar-gold); }
        .glow-pink { text-shadow: var(--glow-pink); }
        .glow-teal { text-shadow: var(--glow-teal); }
        .mt-4 { margin-top: var(--space-4); }
        .mt-6 { margin-top: var(--space-6); }
        .mb-4 { margin-bottom: var(--space-4); }
        .mb-5 { margin-bottom: var(--space-5); }
        .mb-6 { margin-bottom: var(--space-6); }

        /* --- CHOICES --- */
        .choices {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: var(--space-6);
            opacity: 0;
            animation: choicesFadeIn 0.6s ease-out 0.8s forwards;
        }

        .choice-btn {
            display: flex;
            align-items: center;
            padding: var(--space-3) var(--space-5);
            font-family: var(--font-body);
            font-size: 0.9rem;
            font-weight: 400;
            letter-spacing: 0.03em;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            background: var(--bg-card);
            backdrop-filter: blur(10px);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.25s ease;
            position: relative;
            overflow: hidden;
            text-align: left;
        }
        .choice-btn::before {
            content: '';
            position: absolute; top: 0; left: 0;
            width: 3px; height: 100%;
            background: var(--gradient-aurora);
            transform: scaleY(0);
            transition: transform 0.25s ease;
            transform-origin: bottom;
            border-radius: 3px 0 0 3px;
        }
        .choice-btn:hover {
            border-color: var(--border-glow);
            background: var(--bg-card-hover);
            padding-left: calc(var(--space-5) + 4px);
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }
        .choice-btn:hover::before { transform: scaleY(1); }

        .choice-key {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px; height: 24px;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-sm);
            font-size: 0.7rem;
            color: var(--text-muted);
            margin-right: var(--space-3);
            flex-shrink: 0;
        }
        .choice-btn:hover .choice-key {
            border-color: var(--aurora-teal);
            color: var(--aurora-teal);
        }

        /* --- FACT DISCOVERED TOAST --- */
        .fact-found {
            display: inline-flex;
            align-items: center;
            gap: var(--space-2);
            background: var(--stellar-gold);
            color: var(--void-black);
            padding: 6px 16px;
            font-size: 0.7rem;
            font-weight: 600;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            border-radius: var(--radius-full);
            margin-top: var(--space-5);
            animation: factSlideIn 0.6s ease-out;
        }

        /* --- WARP TRANSITION --- */
        .transition-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 500;
            pointer-events: none;
            opacity: 0;
            background: radial-gradient(ellipse at center,
                rgba(64, 224, 208, 0.1) 0%,
                rgba(45, 27, 78, 0.6) 40%,
                var(--void-black) 100%);
        }
        .transition-overlay.active {
            pointer-events: all;
            animation: warpTransition 1.2s ease-in-out;
        }

        /* --- FACT TRACKER --- */
        .fact-tracker {
            position: fixed;
            top: 1.5rem; right: 1.5rem;
            z-index: 100;
            max-width: 260px;
        }

        .fact-tracker-toggle {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 14px;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-full);
            color: var(--stellar-gold);
            font-family: var(--font-body);
            font-size: 0.7rem;
            font-weight: 500;
            letter-spacing: 0.1em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
            margin-left: auto;
        }
        .fact-tracker-toggle:hover { border-color: var(--stellar-gold); }

        .fact-tracker-panel {
            display: none;
            margin-top: 0.5rem;
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            max-height: 60vh;
            overflow-y: auto;
        }
        .fact-tracker-panel.open {
            display: block;
            animation: sceneFadeIn 0.3s ease-out;
        }

        .fact-tracker-panel h4 {
            font-family: var(--font-body);
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            color: var(--text-muted);
            margin-bottom: var(--space-3);
        }

        .fact-item {
            font-size: 0.75rem;
            color: var(--stellar-gold);
            padding: 6px 0;
            border-bottom: 1px solid var(--border-subtle);
            animation: factSlideIn 0.4s ease-out;
            line-height: 1.5;
        }
        .fact-item:last-child { border-bottom: none; }

        .no-facts {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-style: italic;
        }

        /* --- GAME CONTROLS --- */
        .game-controls {
            display: flex;
            gap: 0.75rem;
            margin-top: var(--space-6);
            padding-top: var(--space-5);
            border-top: 1px solid var(--border-subtle);
        }
        .ctrl-btn {
            padding: 8px 16px;
            font-family: var(--font-body);
            font-size: 0.75rem;
            font-weight: 500;
            letter-spacing: 0.08em;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-full);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }
        .ctrl-btn:hover {
            border-color: var(--aurora-teal);
            color: var(--text-primary);
        }

        /* --- FOOTER --- */
        .footer {
            text-align: center;
            padding: var(--space-7) 0 var(--space-5);
            position: relative;
        }
        .footer::before {
            content: '';
            position: absolute; top: 0; left: 50%;
            transform: translateX(-50%);
            width: 200px; height: 1px;
            background: linear-gradient(90deg, transparent, var(--cosmic-pink), transparent);
        }
        .footer-brand {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 400;
            margin-bottom: var(--space-2);
            background: var(--gradient-aurora);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .footer-text {
            font-size: 0.8rem;
            color: var(--text-muted);
            line-height: 1.8;
        }
        .footer-constellation {
            margin-top: var(--space-4);
            display: flex;
            justify-content: center;
            gap: var(--space-4);
        }
        .footer-star {
            width: 4px; height: 4px;
            background: var(--star-white);
            border-radius: 50%;
            animation: twinkle 3s ease-in-out infinite;
        }
        .footer-star:nth-child(2) { animation-delay: 0.5s; }
        .footer-star:nth-child(3) { animation-delay: 1s; }
        .footer-star:nth-child(4) { animation-delay: 1.5s; }
        .footer-star:nth-child(5) { animation-delay: 2s; }

        /* --- ENDING SCENE --- */
        .ending-label {
            font-family: var(--font-body);
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: var(--cosmic-pink);
            margin-bottom: var(--space-4);
        }
        .ending-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 6vw, 3.5rem);
            font-weight: 300;
            letter-spacing: 0.04em;
            margin-bottom: var(--space-6);
            background: linear-gradient(135deg, var(--star-white) 0%, var(--cosmic-pink) 50%, var(--aurora-teal) 100%);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: aurora-wave 8s ease-in-out infinite;
        }
        .the-end {
            font-family: var(--font-body);
            font-size: 0.7rem;
            letter-spacing: 0.4em;
            color: var(--text-muted);
            margin-top: var(--space-7);
            text-transform: uppercase;
        }

        /* --- AUDIO NARRATION PLAYER --- */
        .audio-player {
            display: none;
            align-items: center;
            gap: var(--space-3);
            padding: var(--space-3) var(--space-4);
            margin-bottom: var(--space-5);
            background: linear-gradient(145deg, rgba(45, 27, 78, 0.4) 0%, rgba(20, 10, 40, 0.6) 100%);
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-sm);
            transition: opacity 0.4s ease, border-color 0.3s ease;
        }

        .audio-player.visible {
            display: flex;
        }

        .audio-player:hover {
            border-color: var(--border-glow);
        }

        .audio-player-label {
            font-family: var(--font-body);
            font-size: 0.65rem;
            letter-spacing: 0.15em;
            text-transform: uppercase;
            color: var(--text-muted);
            white-space: nowrap;
            user-select: none;
        }

        .audio-play-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            border: 1px solid var(--cosmic-pink);
            border-radius: var(--radius-full);
            background: transparent;
            color: var(--cosmic-pink);
            cursor: pointer;
            font-size: 0.875rem;
            flex-shrink: 0;
            transition: all 0.3s ease;
            line-height: 1;
        }

        .audio-play-btn:hover {
            border-color: var(--aurora-teal);
            color: var(--aurora-teal);
            box-shadow: var(--glow-teal);
        }

        .audio-progress-wrap {
            flex: 1;
            display: flex;
            align-items: center;
            gap: var(--space-3);
            min-width: 0;
        }

        .audio-progress-bar {
            flex: 1;
            height: 3px;
            background: rgba(150, 140, 180, 0.15);
            position: relative;
            cursor: pointer;
            border-radius: 2px;
        }

        .audio-progress-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: 0%;
            background: var(--gradient-aurora);
            border-radius: 2px;
            transition: width 0.1s linear;
        }

        .audio-progress-bar:hover .audio-progress-fill {
            height: 5px;
            top: -1px;
        }

        .audio-progress-bar:hover {
            height: 5px;
        }

        .audio-time {
            font-family: var(--font-body);
            font-size: 0.65rem;
            color: var(--text-muted);
            white-space: nowrap;
            min-width: 3.5em;
            text-align: right;
            letter-spacing: 0.05em;
            font-variant-numeric: tabular-nums;
        }

        .audio-speed-btn {
            font-family: var(--font-body);
            font-size: 0.6rem;
            color: var(--text-muted);
            background: transparent;
            border: 1px solid var(--border-subtle);
            border-radius: var(--radius-full);
            padding: 0.15rem 0.4rem;
            cursor: pointer;
            white-space: nowrap;
            flex-shrink: 0;
            transition: all 0.3s ease;
            letter-spacing: 0.05em;
        }

        .audio-speed-btn:hover {
            border-color: var(--aurora-teal);
            color: var(--aurora-teal);
        }

        .audio-player.playing .audio-play-btn {
            border-color: var(--aurora-teal);
            color: var(--aurora-teal);
            box-shadow: 0 0 10px var(--aurora-teal-glow);
        }

        .audio-player.loading .audio-play-btn {
            opacity: 0.5;
            cursor: wait;
        }

        /* --- SCROLLBAR --- */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-void); }
        ::-webkit-scrollbar-thumb { background: var(--nebula-purple); border-radius: 3px; }
        ::selection { background: var(--cosmic-pink); color: var(--void-black); }

        /* --- RESPONSIVE --- */
        @media (max-width: 768px) {
            .game-container { padding: var(--space-4); }
            .fact-tracker { right: 0.75rem; top: 0.75rem; max-width: 200px; }
            .section-title { font-size: 2rem; }
            .constellation { display: none; }
            .audio-player { gap: var(--space-2); padding: var(--space-2) var(--space-3); }
            .audio-player-label { display: none; }
            .audio-play-btn { width: 28px; height: 28px; font-size: 0.75rem; }
        }
    </style>
</head>
<body>
    <!-- Cosmic Background Layers -->
    <div class="cosmic-bg"></div>
    <div class="starfield" id="starfield"></div>
    <div class="nebula-layer">
        <div class="nebula-cloud nebula-cloud--pink"></div>
        <div class="nebula-cloud nebula-cloud--teal"></div>
        <div class="nebula-cloud nebula-cloud--purple"></div>
    </div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="shooting-star"></div>
    <div class="cosmic-dust"></div>

    <!-- Warp Transition Overlay -->
    <div class="transition-overlay" id="transition"></div>

    <!-- Fact Tracker Sidebar -->
    <div class="fact-tracker" id="factTracker" style="display: none;">
        <button class="fact-tracker-toggle" id="factToggle">
            <span class="badge-pulse-dot" style="width:6px;height:6px;background:var(--stellar-gold);border-radius:50;animation:twinkle 2s ease-in-out infinite;"></span>
            <span>Discoveries</span>
            <span id="factCount">0</span>
        </button>
        <div class="fact-tracker-panel" id="factPanel">
            <h4>Knowledge Collected</h4>
            <div id="factList">
                <p class="no-facts">No discoveries yet...</p>
            </div>
        </div>
    </div>

    <div class="game-container">
        <!-- Title Screen -->
        <div class="title-screen" id="titleScreen">
            <p class="title-eyebrow">Interactive Story</p>
            <h1>The Golden Record</h1>
            <p class="title-subtitle">
                You inherit a mysterious transmitter tuned to the cosmos. Across decades of signals,
                you will discover humanity's greatest questions about black holes, alien life,
                and our place in the universe.
            </p>
            <button class="title-start" id="startBtn">Begin Transmission</button>
            <p class="title-credits">A story of cosmic discovery told through choices and signals</p>
            <a href="index.html" class="back-to-stories" style="display:inline-block;margin-top:1.5rem;color:inherit;text-decoration:none;font-size:0.8rem;opacity:0.5;transition:opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.5'">&larr; All Stories</a>
        </div>

        <!-- Scene Container -->
        <div class="scene-wrapper" id="sceneWrapper">
            <div class="scene-header">
                <span class="scene-signal-id" id="signalId">Signal Incoming</span>
            </div>
            <!-- Audio Narration Player -->
            <div class="audio-player" id="audioPlayer">
                <span class="audio-player-label">Listen</span>
                <button class="audio-play-btn" id="audioPlayBtn" title="Play narration" aria-label="Play narration">&#9654;</button>
                <div class="audio-progress-wrap">
                    <div class="audio-progress-bar" id="audioProgressBar">
                        <div class="audio-progress-fill" id="audioProgressFill"></div>
                    </div>
                    <span class="audio-time" id="audioTime">0:00</span>
                </div>
                <button class="audio-speed-btn" id="audioSpeedBtn" title="Playback speed">1x</button>
            </div>

            <div id="sceneContent"></div>
            <div class="game-controls">
                <button class="ctrl-btn" id="restartBtn">Return to Start</button>
            </div>
        </div>
    </div>

    <script>
    // ================================================================
    //  THE GOLDEN RECORD — Story Data
    // ================================================================

    const STORY = {

        // ---- SCENE 1: The Discovery ----
        scene_1_discovery: {
            signal: 'FREQ-00 / INITIALIZATION',
            content: `
                <div class="section-title" style="animation: aurora-wave 8s ease-in-out infinite; background: linear-gradient(135deg, var(--star-white) 0%, var(--cosmic-pink) 50%, var(--aurora-teal) 100%); background-size: 200% 200%; -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">Inherited Frequency</div>

                <p class="type-body mb-5">The attic smelled of dust and old paper. Your grandmother had passed three months ago, and you had put off sorting through her belongings long enough. Boxes of books, faded photographs, moth-eaten quilts — the archaeology of an ordinary life.</p>

                <p class="type-body mb-5">Then you found it behind a false panel in the wall. A device unlike anything you had seen before — brass dials, a circular antenna, vacuum tubes that still glowed faintly amber when you brushed the dust away. A label on the base read: <span class="text-teal">PROPERTY OF L. SPITZER JR. — NOT FOR CIVILIAN USE</span>.</p>

                <div class="card mb-5">
                    <div class="card-title text-gold">Historical Record</div>
                    <div class="card-content">In <strong class="text-teal">1946</strong>, astronomer <strong>Lyman Spitzer Jr.</strong> published "Astronomical Advantages of an Extraterrestrial Observatory," proposing the concept of a space telescope <strong>44 years</strong> before its actual launch. He planted the seed for what would become the Hubble Space Telescope.</div>
                </div>

                <p class="type-body mb-5">Your grandmother had known Spitzer? The idea seemed impossible. But as you turned the largest dial, the vacuum tubes brightened, and a low hum filled the attic. Static crackled from a hidden speaker. Then — through the noise — a pattern. Something rhythmic. Something deliberate.</p>

                <p class="type-body-large text-teal" style="animation: signalPulse 2s ease-in-out infinite;">A signal.</p>
            `,
            fact: '1946 — Lyman Spitzer Jr. proposed a space telescope 44 years before Hubble launched',
            choices: [
                { text: 'Respond immediately to the signal', next: 'scene_3a_eager' },
                { text: 'Listen carefully and collect more data', next: 'scene_3b_patient' }
            ]
        },

        // ---- SCENE 3A: The Eager Path ----
        scene_3a_eager: {
            signal: 'FREQ-01 / OUTBOUND TRANSMISSION',
            content: `
                <div class="section-title">The Eager Reply</div>

                <p class="type-body mb-5">Your fingers found a transmission key on the side of the device. Without thinking, you pressed it and spoke into the brass grille: "Hello? Is someone there?"</p>

                <p class="type-body mb-5">The response was immediate — and overwhelming.</p>

                <div class="alert alert-info mb-4">
                    <div class="alert-icon" style="color: var(--aurora-teal);">&#9673;</div>
                    <div class="alert-content">
                        <div class="alert-title">Incoming Transmission Burst</div>
                        <div class="alert-message">Signal strength: MAXIMUM. Source coordinates resolving... Multiple data streams detected.</div>
                    </div>
                </div>

                <div class="alert alert-cosmic mb-4">
                    <div class="alert-icon" style="color: var(--cosmic-pink);">&#9670;</div>
                    <div class="alert-content">
                        <div class="alert-title">Anomalous Signal</div>
                        <div class="alert-message">Carrier wave matches Voyager 1 deep space frequency — 8.415 GHz S-band downlink. But signal is arriving from the <em>wrong direction</em>.</div>
                    </div>
                </div>

                <p class="type-body mb-5">The transmitter erupted with data. Dates, coordinates, and fragments of audio flooded through the speaker. You scrambled to write them down on the back of an old envelope:</p>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold">Voyager Golden Record</div>
                    <div class="card-content">On <strong class="text-teal">September 5, 1977</strong>, NASA launched <strong>Voyager 1</strong> carrying the famous Golden Record — a <strong>12-inch gold-plated copper disk</strong> containing 116 images, musical selections from different cultures, spoken greetings in <strong>55 languages</strong>, and sounds representing Earth's diversity. The record was curated by astronomer <strong>Carl Sagan</strong> and his team.</div>
                </div>

                <div style="margin: 1.5rem 0; text-align: center;"><img src="https://upload.wikimedia.org/wikipedia/commons/5/56/The_Sounds_of_Earth_Record_Cover_-_GPN-2000-001978.jpg" alt="The Voyager Golden Record cover — a message to the cosmos" style="max-width: 100%; height: auto; border: 1px solid rgba(224, 86, 160, 0.4); opacity: 0.9; max-height: 400px; object-fit: contain; box-shadow: 0 0 20px rgba(224, 86, 160, 0.2);"><div style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.6; font-style: italic;">The Voyager Golden Record cover — a message to the cosmos</div></div>

                <div style="margin: 1.5rem 0; text-align: center;"><img src="https://upload.wikimedia.org/wikipedia/commons/d/d2/Voyager.jpg" alt="Voyager spacecraft — humanity's farthest-traveled emissary" style="max-width: 100%; height: auto; border: 1px solid rgba(224, 86, 160, 0.4); opacity: 0.9; max-height: 400px; object-fit: contain; box-shadow: 0 0 20px rgba(224, 86, 160, 0.2);"><div style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.6; font-style: italic;">Voyager spacecraft — humanity's farthest-traveled emissary</div></div>

                <div class="card mb-5">
                    <div class="card-title text-teal">Voyager 2 — The First Twin</div>
                    <div class="card-content"><strong class="text-teal">Voyager 2</strong> launched on <strong>August 20, 1977</strong> — actually <strong>16 days before</strong> its twin Voyager 1 — on an identical mission to explore the outer planets. Its own Golden Record bore the inscription: <em class="text-pink">"To the makers of music — all worlds, all times."</em></div>
                </div>

                <div style="margin: 1.5rem 0; text-align: center;"><img src="https://upload.wikimedia.org/wikipedia/commons/7/73/Pale_Blue_Dot.png" alt="The Pale Blue Dot — Earth as seen from 6 billion kilometers, Voyager 1, 1990" style="max-width: 100%; height: auto; border: 1px solid rgba(224, 86, 160, 0.4); opacity: 0.9; max-height: 400px; object-fit: contain; box-shadow: 0 0 20px rgba(224, 86, 160, 0.2);"><div style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.6; font-style: italic;">The Pale Blue Dot — Earth as seen from 6 billion kilometers, Voyager 1, 1990</div></div>

                <p class="type-body">The transmitter's dials were spinning on their own now, tuning to frequencies you had not set. Whatever you had awakened, it was pulling you deeper.</p>
            `,
            fact: 'Sept 5, 1977 — Voyager 1 launched with a Golden Record containing greetings in 55 languages, curated by Carl Sagan',
            choices: [
                { text: 'Continue following the cascade of signals', next: 'scene_5_cascade' }
            ]
        },

        // ---- SCENE 3B: The Patient Path ----
        scene_3b_patient: {
            signal: 'FREQ-01 / PASSIVE SCAN',
            content: `
                <div class="section-title">The Patient Listener</div>

                <p class="type-body mb-5">You did not touch the transmission key. Instead, you sat on an overturned crate and listened. Your grandmother had been a careful woman. If she had hidden this device, there was a reason.</p>

                <p class="type-body mb-5">Minutes passed. The signal pulsed in a repeating pattern — long, short, long, long, short. Not Morse code. Something else. You found a notebook in the box beside the transmitter, filled with your grandmother's handwriting: frequency logs, dates, annotations.</p>

                <div class="progress-container mb-5">
                    <div class="progress-header">
                        <span class="type-caption">Signal Collection</span>
                        <span class="text-teal">Gathering data...</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 65%;"></div>
                    </div>
                </div>

                <p class="type-body mb-5">The notebook entries spanned decades. The earliest was dated 1961, and beside it, your grandmother had written a single equation:</p>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold">The Drake Equation — 1961</div>
                    <div class="card-content">In <strong class="text-teal">1961</strong>, astronomer <strong>Frank Drake</strong> formulated the Drake Equation at the first scientific meeting on SETI (Search for Extraterrestrial Intelligence). The equation uses <strong>seven multiplicative factors</strong> to estimate the number of communicative civilizations in the Milky Way — from the rate of star formation to the fraction of planets that develop intelligent life.</div>
                </div>

                <p class="type-body mb-5">Beneath the equation, your grandmother had added: <em class="text-pink">"The answer is not in the numbers. The answer is in the listening."</em></p>

                <p class="type-body">As you continued reading, the transmitter's signal grew stronger. It was responding to your patience.</p>
            `,
            fact: '1961 — Frank Drake created the Drake Equation with 7 factors to estimate communicative civilizations in the Milky Way',
            choices: [
                { text: 'Continue decoding the signals', next: 'scene_4_decode' }
            ]
        },

        // ---- SCENE 4: Decoding the Cosmos (Patient Path) ----
        scene_4_decode: {
            signal: 'FREQ-02 / PATTERN RECOGNITION',
            content: `
                <div class="section-title">Decoding the Cosmos</div>

                <p class="type-body mb-5">Hours passed unnoticed. The attic window showed stars now — real ones, not the metaphorical kind. Your grandmother's notebook was a Rosetta Stone for the transmitter's signals.</p>

                <p class="type-body mb-5">Each frequency corresponded to a moment in the history of space exploration. The transmitter was not receiving random signals. It was receiving <em>echoes of discovery</em>.</p>

                <div class="card mb-5">
                    <div class="card-title text-teal">Project Ozma — 1960</div>
                    <div class="card-content">In <strong class="text-teal">1960</strong>, Frank Drake conducted the <strong>first systematic search for extraterrestrial radio signals</strong> using the 85-foot (26-meter) radio dish at the National Radio Astronomy Observatory in <strong>Green Bank, West Virginia</strong>. He monitored two nearby Sun-like stars: <strong>Epsilon Eridani</strong> and <strong>Tau Ceti</strong>. He named the project after Princess Ozma from the Oz books — ruler of an imaginary faraway land.</div>
                </div>

                <div class="card mb-5">
                    <div class="card-title text-gold">The Golden Record — 1977</div>
                    <div class="card-content">The Voyager Golden Records, launched aboard both Voyager spacecraft in <strong class="text-teal">1977</strong>, carry <strong>116 images</strong>, spoken greetings in <strong>55 languages</strong>, a selection of music from Bach to Chuck Berry, and natural sounds of Earth — from thunder to whale song. Carl Sagan called them <em>"a bottle cast into the cosmic ocean."</em></div>
                </div>

                <p class="type-body mb-5">The pattern became clear. Each signal carried a date and a discovery, arranged not chronologically but by <em>significance</em> — as if someone, somewhere, was curating humanity's greatest cosmic achievements and beaming them back to this attic.</p>

                <div class="alert alert-cosmic">
                    <div class="alert-icon" style="color: var(--cosmic-pink);">&#9670;</div>
                    <div class="alert-content">
                        <div class="alert-title">New Signal Detected</div>
                        <div class="alert-message">Frequency shifting to deep X-ray band. Subject: stellar mass anomaly. Classification: <strong class="text-pink">BLACK HOLE</strong>.</div>
                    </div>
                </div>
            `,
            fact: '1960 — Frank Drake conducted Project Ozma, the first SETI search, monitoring Epsilon Eridani and Tau Ceti from Green Bank, WV',
            choices: [
                { text: 'Follow the signal deeper', next: 'scene_6_blackhole' }
            ]
        },

        // ---- SCENE 5: Cascading Revelations (Eager Path) ----
        scene_5_cascade: {
            signal: 'FREQ-03 / DATA CASCADE',
            content: `
                <div class="section-title">Cascading Revelations</div>

                <p class="type-body mb-5">The transmitter would not stop. Signal after signal poured through, each one carrying fragments of history you recognized from textbooks and documentaries — but experienced now as raw data, as if you were hearing the original transmissions themselves.</p>

                <div class="alert alert-info mb-4">
                    <div class="alert-icon" style="color: var(--aurora-teal);">&#9673;</div>
                    <div class="alert-content">
                        <div class="alert-title">Signal 1990-04-24</div>
                        <div class="alert-message">Source: Low Earth Orbit, 340 miles altitude. Payload deployed. Designation: HST.</div>
                    </div>
                </div>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold">Hubble Space Telescope Launch — 1990</div>
                    <div class="card-content">On <strong class="text-teal">April 24, 1990</strong>, Space Shuttle <strong>Discovery</strong> deployed the Hubble Space Telescope on the <strong>STS-31</strong> mission. But within weeks, astronomers discovered its <strong>2.4-meter primary mirror</strong> had been ground to incorrect specifications, producing fuzzy, out-of-focus images instead of the crisp deep-space views promised. Congress had authorized Hubble's construction back in <strong>1977</strong>, initiating a <strong>13-year</strong> engineering project.</div>
                </div>

                <div class="alert alert-warning mb-4">
                    <div class="alert-icon" style="color: var(--stellar-gold);">&#9888;</div>
                    <div class="alert-content">
                        <div class="alert-title">Signal 1993-12</div>
                        <div class="alert-message">Mission: STS-61. Objective: Corrective optics installation. Status: SUCCESS.</div>
                    </div>
                </div>

                <div class="card mb-5">
                    <div class="card-title text-teal">The Repair Mission — December 1993</div>
                    <div class="card-content">Shuttle <strong>Endeavour</strong> carried astronauts to Hubble in a <strong>10-day mission</strong> that installed <strong>COSTAR corrective optics</strong> and the <strong>Wide Field and Planetary Camera 2 (WFPC2)</strong>, restoring the telescope's vision. Hubble went on to become the most productive scientific instrument ever built, fundamentally changing our understanding of the universe's age, expansion, and composition.</div>
                </div>

                <div style="margin: 1.5rem 0; text-align: center;"><img src="https://upload.wikimedia.org/wikipedia/commons/0/0d/Hubble_ultra_deep_field_high_rez_edit1.jpg" alt="Hubble Ultra Deep Field — nearly 10,000 galaxies in a patch of sky" style="max-width: 100%; height: auto; border: 1px solid rgba(224, 86, 160, 0.4); opacity: 0.9; max-height: 400px; object-fit: contain; box-shadow: 0 0 20px rgba(224, 86, 160, 0.2);"><div style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.6; font-style: italic;">Hubble Ultra Deep Field — nearly 10,000 galaxies in a patch of sky</div></div>

                <p class="type-body mb-5">The signals were accelerating. Dates jumped forward, then backward, then forward again. The transmitter's dials spun wildly. Among the static, you heard a new tone — deeper, more ominous.</p>

                <div class="alert alert-cosmic">
                    <div class="alert-icon" style="color: var(--cosmic-pink);">&#9670;</div>
                    <div class="alert-content">
                        <div class="alert-title">Anomalous Frequency</div>
                        <div class="alert-message">X-ray signature detected. Binary star system. Designation: <strong class="text-pink">Cygnus X-1</strong>.</div>
                    </div>
                </div>
            `,
            fact: 'April 24, 1990 — Hubble launched with a flawed mirror; repaired in Dec 1993 by Shuttle Endeavour installing COSTAR optics',
            choices: [
                { text: 'Investigate the Cygnus X-1 signal', next: 'scene_6_blackhole' }
            ]
        },

        // ---- SCENE 6: The Black Hole Riddle (Convergence) ----
        scene_6_blackhole: {
            signal: 'FREQ-04 / X-RAY BAND',
            content: `
                <div class="section-title">The Black Hole Riddle</div>

                <p class="type-body mb-5">The transmitter locked onto a single frequency and held. The static cleared to an eerie silence, broken only by rhythmic pulses — the X-ray heartbeat of something invisible and immense.</p>

                <p class="type-body mb-5">The signal carried a question, encoded in the same pattern you had learned to read: <em class="text-pink">"What cannot be seen but bends all light around it?"</em></p>

                <div class="card mb-5">
                    <div class="card-title text-gold">John Michell's Dark Stars — 1783</div>
                    <div class="card-content">English country parson and physicist <strong>John Michell</strong> first theorized <strong>"dark stars"</strong> in <strong class="text-teal">1783</strong> — objects so massive that light itself could not escape their gravity. He applied Newton's laws of gravity and escape velocity calculations, creating the first conceptual framework for what we now call black holes, <strong>132 years before Einstein's relativity</strong>.</div>
                </div>

                <div class="card mb-5">
                    <div class="card-title text-teal">Einstein and Schwarzschild — 1915-1916</div>
                    <div class="card-content"><strong>Albert Einstein</strong> published his <strong>General Theory of Relativity</strong> in <strong class="text-teal">1915</strong>, providing the mathematical foundation for understanding black holes. Just one year later, in <strong class="text-teal">1916</strong>, <strong>Karl Schwarzschild</strong> solved Einstein's field equations while serving on the Eastern Front of World War I, determining the critical radius of a black hole — the <strong>"Schwarzschild Radius"</strong> still used today to calculate event horizons.</div>
                </div>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold">Cygnus X-1 — The First Black Hole — 1972</div>
                    <div class="card-content">In <strong class="text-teal">1972</strong>, astronomers <strong>Louise Webster</strong>, <strong>Paul Murdin</strong>, and independently <strong>Charles Thomas Bolton</strong> identified <strong>Cygnus X-1</strong> through combined X-ray and optical observations. They proved it was a binary system with the supergiant star <strong>HDE 226868</strong>, and determined the invisible companion's mass far exceeded any white dwarf or neutron star — making it the <strong>first definitive black hole candidate</strong> ever identified.</div>
                </div>

                <div class="cosmic-divider">
                    <div class="cosmic-divider-line"></div>
                    <div class="cosmic-divider-star"></div>
                    <div class="cosmic-divider-line"></div>
                </div>

                <p class="type-body-large text-center text-pink">"Is there more intelligence in the universe than we can imagine?"</p>

                <p class="type-body mt-6">The transmitter pulsed once, then fell silent — waiting for you to choose the next frequency.</p>
            `,
            fact: '1972 — Cygnus X-1 confirmed as the first black hole candidate, discovered by Webster, Murdin, and Bolton',
            choices: [
                { text: 'Tune to the SETI frequency — search for others', next: 'scene_7_seeking' }
            ]
        },

        // ---- SCENE 7: Seeking Others ----
        scene_7_seeking: {
            signal: 'FREQ-05 / SETI BAND',
            content: `
                <div class="section-title">Seeking Others</div>

                <p class="type-body mb-5">You turned the main dial to the frequency marked "SETI" in your grandmother's notebook. The transmitter hummed with new energy, and the signal that came through was unlike any of the others — not a report of discovery, but a <em>question</em>.</p>

                <div class="alert alert-info mb-5">
                    <div class="alert-icon" style="color: var(--aurora-teal);">&#9673;</div>
                    <div class="alert-content">
                        <div class="alert-title">Incoming Transmission</div>
                        <div class="alert-message">"N = R* x fp x ne x fl x fi x fc x L"<br><br>
                        <span class="type-caption">The Drake Equation — a formula not for answers, but for asking the right questions.</span></div>
                    </div>
                </div>

                <div class="card mb-5">
                    <div class="card-title text-teal">Kerr Black Holes — 1963</div>
                    <div class="card-content">In <strong class="text-teal">1963</strong>, mathematician <strong>Roy Kerr</strong> solved the equations for <strong>rotating black holes</strong>, proving that real black holes in the universe spin. This fundamentally changed theoretical understanding of these cosmic objects and opened the door to concepts like the ergosphere — a region where spacetime itself is dragged along by the black hole's rotation.</div>
                </div>

                <p class="type-body mb-5">The transmitter began displaying coordinates on a small screen you hadn't noticed before — numbers that corresponded to Green Bank, West Virginia, 1960. Frank Drake, pointing his radio telescope at distant stars, listening for a message that never came.</p>

                <p class="type-body mb-5">And yet here you were, decades later, receiving messages on a device that should not exist. The irony was not lost on you.</p>

                <p class="type-body mb-5">The signal spoke again, this time in plain text scrolling across the screen:</p>

                <div class="alert alert-cosmic mb-5">
                    <div class="alert-icon" style="color: var(--cosmic-pink);">&#9670;</div>
                    <div class="alert-content">
                        <div class="alert-title">Direct Transmission</div>
                        <div class="alert-message">"Do you believe humanity is alone in the cosmos? Your answer determines the next frequency."</div>
                    </div>
                </div>

                <p class="type-body"><span class="badge badge-pink"><span class="badge-pulse-dot"></span>Choice Point</span> The transmitter awaits your conviction.</p>
            `,
            fact: '1963 — Roy Kerr solved equations for rotating black holes, proving real black holes spin',
            choices: [
                { text: 'We are not alone — humanity must answer the cosmos', next: 'scene_8a_message' },
                { text: 'Some mysteries are sacred — we should only observe', next: 'scene_8b_witness' }
            ]
        },

        // ---- SCENE 8A: The Message Chambers ----
        scene_8a_message: {
            signal: 'FREQ-06A / GOLDEN RECORD PROTOCOL',
            content: `
                <div class="section-title">The Message Chambers</div>

                <p class="type-body mb-5">The transmitter responded to your conviction with a burst of warm static, like applause from the void. A new signal flooded in — one that carried music. Bach's Brandenburg Concerto No. 2. Chuck Berry's "Johnny B. Goode." Peruvian panpipes. Indian raga. The sounds of Earth, encoded on gold and copper and flung into the infinite.</p>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold">Carl Sagan's Golden Record — 1977</div>
                    <div class="card-content">Carl Sagan assembled a committee at Cornell University to design the Voyager Golden Records. The <strong>12-inch gold-plated copper disks</strong> included: <strong>116 images</strong> of Earth and its inhabitants, <strong>55 spoken greetings</strong> in languages from Akkadian to Wu Chinese, <strong>27 musical selections</strong> from cultures worldwide, and a message from U.S. President Jimmy Carter reading: <em>"This is a present from a small, distant world."</em></div>
                </div>

                <div style="margin: 1.5rem 0; text-align: center;"><img src="https://upload.wikimedia.org/wikipedia/commons/b/be/Carl_Sagan_Planetary_Society.JPG" alt="Carl Sagan — who reminded us we are made of star-stuff" style="max-width: 100%; height: auto; border: 1px solid rgba(224, 86, 160, 0.4); opacity: 0.9; max-height: 400px; object-fit: contain; box-shadow: 0 0 20px rgba(224, 86, 160, 0.2);"><div style="font-size: 0.75rem; margin-top: 0.5rem; opacity: 0.6; font-style: italic;">Carl Sagan — who reminded us we are made of star-stuff</div></div>

                <p class="type-body mb-5">The screen on the transmitter displayed a new prompt:</p>

                <div class="alert alert-cosmic mb-5">
                    <div class="alert-icon" style="color: var(--cosmic-pink);">&#9670;</div>
                    <div class="alert-content">
                        <div class="alert-title">Transmission Request</div>
                        <div class="alert-message">"The Golden Record was humanity's first message. If you could add one thing to Earth's cosmic letter, what would it be?"</div>
                    </div>
                </div>

                <p class="type-body mb-5">You thought of everything humanity had learned since 1977. The Hubble Deep Field. Gravitational waves. Exoplanets by the thousands. The image of a black hole's shadow. What would best represent who we have become?</p>
            `,
            fact: '1977 — The Voyager Golden Records carried 116 images, greetings in 55 languages, and 27 musical selections into deep space',
            choices: [
                { text: 'Add the sound of gravitational waves — the universe speaking', next: 'scene_9_convergence' },
                { text: 'Add a message of peace from every nation since 1977', next: 'scene_9_convergence' },
                { text: 'Add silence — let the cosmos know we are listening', next: 'scene_9_convergence' }
            ]
        },

        // ---- SCENE 8B: Silent Witness ----
        scene_8b_witness: {
            signal: 'FREQ-06B / PASSIVE OBSERVATION',
            content: `
                <div class="section-title">Silent Witness</div>

                <p class="type-body mb-5">You chose restraint, and the transmitter seemed to respect your decision. The signals continued, but softer now — as if the device understood that you preferred to observe rather than participate.</p>

                <p class="type-body mb-5">What came through next was not a question but a revelation. Data streams carrying the signatures of something that had taken a century to confirm.</p>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold">LIGO — Gravitational Waves — 2016</div>
                    <div class="card-content">On <strong class="text-teal">February 11, 2016</strong>, the LIGO Scientific Collaboration and Virgo Collaboration announced <strong>GW150914</strong> — the <strong>first direct detection of gravitational waves</strong>. The signal came from two black holes merging <strong>1.4 billion light-years away</strong>. The detection confirmed Albert Einstein's century-old prediction from General Relativity with extraordinary precision. The ripple in spacetime that reached Earth was smaller than the width of a proton.</div>
                </div>

                <p class="type-body mb-5">You sat in the darkness of the attic, the transmitter glowing softly beside you, and understood something profound. The universe had been speaking all along. Not in words or symbols, but in the fabric of spacetime itself — ripples from events that happened before humanity existed, finally reaching ears that knew how to listen.</p>

                <div class="progress-container mb-5">
                    <div class="progress-header">
                        <span class="type-caption">Signal Alignment</span>
                        <span class="text-teal">Converging...</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 88%;"></div>
                    </div>
                </div>

                <p class="type-body">The transmitter's screen flickered with a new message: <em class="text-teal">"All signals converging. Final frequency available."</em></p>
            `,
            fact: 'Feb 11, 2016 — LIGO announced GW150914, first gravitational wave detection from black holes merging 1.4 billion light-years away',
            choices: [
                { text: 'Tune to the final frequency', next: 'scene_9_convergence' }
            ]
        },

        // ---- SCENE 9: The Convergence ----
        scene_9_convergence: {
            signal: 'FREQ-07 / CONVERGENCE',
            content: `
                <div class="section-title">The Convergence</div>

                <p class="type-body mb-5">Every dial on the transmitter aligned simultaneously. Every frequency merged into one. The room filled with a sound that was not quite music and not quite silence — the harmonic resonance of a hundred years of cosmic discovery compressed into a single tone.</p>

                <div class="card card-featured mb-5">
                    <div class="card-title text-gold" style="font-size: 1.75rem;">GW150914 — The Universe Speaks</div>
                    <div class="card-content">
                        <p class="mb-4"><span class="badge badge-teal badge-filled">February 11, 2016</span></p>
                        <p>Two black holes — <strong>36 and 29 times the mass of our Sun</strong> — spiraled toward each other for millions of years before finally merging <strong>1.4 billion light-years</strong> from Earth. The collision released more energy than all the stars in the observable universe combined, converting <strong>3 solar masses into pure gravitational energy</strong>. LIGO detected the resulting ripple — a chirp lasting less than a second, confirming what Einstein predicted in <strong>1915</strong>.</p>
                    </div>
                </div>

                <p class="type-body mb-5">On the transmitter's screen, a timeline appeared — every discovery you had encountered, connected by glowing lines like a constellation:</p>

                <div style="display:flex;flex-direction:column;gap:var(--space-3);margin-bottom:var(--space-6);">
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1783</span>
                        <span class="type-caption">Michell imagines dark stars</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1915</span>
                        <span class="type-caption">Einstein publishes General Relativity</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1916</span>
                        <span class="type-caption">Schwarzschild calculates the event horizon</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1946</span>
                        <span class="type-caption">Spitzer envisions a space telescope</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1960</span>
                        <span class="type-caption">Drake listens at Green Bank</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1963</span>
                        <span class="type-caption">Kerr solves rotating black holes</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1972</span>
                        <span class="type-caption">Cygnus X-1 confirmed</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-gold badge-filled">1977</span>
                        <span class="type-caption">Voyager launches with the Golden Record</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-teal">1990</span>
                        <span class="type-caption">Hubble opens its flawed eye</span>
                    </div>
                    <div style="display:flex;align-items:center;gap:var(--space-3);">
                        <span class="badge badge-gold badge-filled">2016</span>
                        <span class="type-caption">LIGO hears gravitational waves</span>
                    </div>
                </div>

                <p class="type-body-large text-center mb-5" style="color: var(--aurora-teal);">"The universe has been trying to reach us all along."</p>

                <div class="cosmic-divider">
                    <div class="cosmic-divider-line"></div>
                    <div class="cosmic-divider-star"></div>
                    <div class="cosmic-divider-line"></div>
                </div>

                <p class="type-body">The transmitter displays three final frequencies. One will carry a message forward. One will extend the silence. One will create something entirely new. The choice is yours.</p>
            `,
            fact: '1915/1916 — Einstein published General Relativity; Schwarzschild solved the event horizon radius while serving in WWI',
            choices: [
                { text: 'Transmit Sagan\'s message forward — carry the Golden Record into the future', next: 'ending_hopeful' },
                { text: 'Extend the silence — let the cosmos remain a mystery', next: 'ending_mystery' },
                { text: 'Create a new message — add your voice to humanity\'s cosmic letter', next: 'ending_creative' }
            ]
        },

        // ---- ENDING A: Hopeful ----
        ending_hopeful: {
            signal: 'FREQ-FINAL / OUTBOUND',
            content: `
                <div class="text-center">
                    <div class="ending-label">Transmission Complete</div>
                    <div class="ending-title">Echoes of Sagan</div>
                </div>

                <p class="type-body mb-5">You pressed the transmission key and spoke Carl Sagan's words into the brass grille, words inscribed on a gold-plated record hurtling through interstellar space since 1977:</p>

                <div class="card card-featured mb-5">
                    <p class="type-body-large text-center" style="color: var(--star-white); font-style: italic; padding: var(--space-4);">"This is a present from a small, distant world, a token of our sounds, our science, our images, our music, our thoughts and our feelings. We are attempting to survive our time so we may live into yours."</p>
                </div>

                <p class="type-body mb-5">The transmitter amplified your voice and sent it outward — not on any radio frequency, but on something older and deeper. The signal rode gravitational waves, the same medium the universe uses to speak to itself. It carried not just words, but the accumulated weight of every discovery this device had shown you.</p>

                <p class="type-body mb-5">Spitzer's dream of seeing beyond our atmosphere. Drake's faith that someone might be listening. The impossible precision of LIGO, hearing the whisper of colliding black holes across a billion light-years. All of it, encoded in a ripple moving outward at the speed of light.</p>

                <p class="type-body mb-5">The transmitter's glow faded slowly, like a star at dawn. In the silence that followed, you understood why your grandmother had kept it hidden. Some messages need to wait for the right moment — and the right person — to be sent.</p>

                <p class="type-body mb-5">You closed the attic door behind you. Outside, the night sky was clear for the first time in weeks. Somewhere above, Hubble orbited at 340 miles, completing one circuit every 95 minutes, still gathering light from the edge of the observable universe.</p>

                <p class="type-body mb-5">Somewhere farther still, two golden records spun in the void, carrying the sounds of Earth to whoever might find them.</p>

                <p class="type-body">And now, your message traveled with them.</p>

                <div class="footer" style="margin-top: var(--space-8);">
                    <div class="footer-brand">Into the Infinite</div>
                    <p class="footer-text">The cosmos is not silent. It is patient.</p>
                    <div class="footer-constellation">
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                    </div>
                    <div class="the-end">The End</div>
                </div>
            `,
            fact: 'Hubble orbits Earth at 340 miles altitude, completing one full orbit every 95 minutes',
            choices: [
                { text: 'Begin Again', next: '_restart' }
            ]
        },

        // ---- ENDING B: Mystery ----
        ending_mystery: {
            signal: 'FREQ-FINAL / SILENCE',
            content: `
                <div class="text-center">
                    <div class="ending-label">Signal Terminated</div>
                    <div class="ending-title">The Eloquence of Silence</div>
                </div>

                <p class="type-body mb-5">You lifted your hand from the transmission key without pressing it. The three frequencies on the screen blinked once, twice, then faded. The transmitter understood.</p>

                <p class="type-body mb-5">Silence. Not the empty kind — the kind that holds everything within it. The silence of a universe 13.8 billion years old, a silence that contains the echoes of every supernova, every collision, every whisper of light that ever crossed the void.</p>

                <div class="card mb-5">
                    <div class="card-title text-teal">The Fermi Paradox</div>
                    <div class="card-content">In a universe of hundreds of billions of galaxies, each containing hundreds of billions of stars, the mathematical probability of other intelligent civilizations seems overwhelming. And yet — silence. The physicist Enrico Fermi asked the essential question: <em class="text-pink">"Where is everybody?"</em> Perhaps some civilizations choose to listen rather than speak. Perhaps that is the wiser path.</div>
                </div>

                <p class="type-body mb-5">You thought of Frank Drake at Green Bank in 1960, his radio telescope aimed at Epsilon Eridani, listening for a signal that never came. You thought of the 55 greetings on the Golden Record, spinning through the interstellar medium, waiting for ears that might never hear them.</p>

                <p class="type-body mb-5">Perhaps that was the point. Not the answer, but the asking. Not the signal, but the willingness to listen.</p>

                <p class="type-body mb-5">You powered down the transmitter carefully, wrapping it in the quilts your grandmother had stored nearby. You placed it back behind the false panel and sealed it shut.</p>

                <p class="type-body mb-5">Some mysteries are not meant to be solved. They are meant to be preserved — carried forward like a golden record, waiting for the right moment, the right listener, the right question.</p>

                <p class="type-body">You turned off the attic light and descended the stairs, carrying the silence with you like a gift.</p>

                <div class="footer" style="margin-top: var(--space-8);">
                    <div class="footer-brand">Into the Infinite</div>
                    <p class="footer-text">The universe speaks to those who know when not to answer.</p>
                    <div class="footer-constellation">
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                    </div>
                    <div class="the-end">The End</div>
                </div>
            `,
            choices: [
                { text: 'Begin Again', next: '_restart' }
            ]
        },

        // ---- ENDING C: Creative ----
        ending_creative: {
            signal: 'FREQ-FINAL / NEW RECORD',
            content: `
                <div class="text-center">
                    <div class="ending-label">New Transmission Initiated</div>
                    <div class="ending-title">The Second Golden Record</div>
                </div>

                <p class="type-body mb-5">You pressed the transmission key and began speaking — not Sagan's words, not Drake's equations, not Einstein's theories. Your own.</p>

                <p class="type-body mb-5">You told the cosmos what humanity had learned since 1977. About the 5,000 exoplanets discovered orbiting distant suns. About the image of a black hole's shadow, confirming what Michell imagined in 1783 and Einstein predicted in 1915. About gravitational waves, heard for the first time in 2016, proving that spacetime itself vibrates like a cosmic drum.</p>

                <div class="card card-featured mb-5">
                    <p class="type-body-large text-center" style="color: var(--star-white); padding: var(--space-4);">"We are still here. We are still looking up. We have not stopped asking questions since Spitzer dreamed of a telescope in space, since Drake pointed a radio dish at the stars, since Sagan pressed a golden record and whispered: <span class="text-teal">we exist</span>."</p>
                </div>

                <p class="type-body mb-5">The transmitter amplified your voice and carried it outward on frequencies both known and unknown. You spoke for twenty minutes, pausing only when emotion closed your throat — which happened more often than you expected.</p>

                <p class="type-body mb-5">When you finished, the transmitter did something it had never done before. It played back a response — not from the cosmos, but from itself. A recording, hidden in its circuits for decades, in a voice you recognized.</p>

                <p class="type-body mb-5">Your grandmother's voice.</p>

                <div class="alert alert-info mb-5">
                    <div class="alert-icon" style="color: var(--aurora-teal);">&#9673;</div>
                    <div class="alert-content">
                        <div class="alert-title">Stored Transmission — Dated 1977</div>
                        <div class="alert-message"><em>"I always knew someone in this family would finish what I started. The record is not complete until every generation adds their voice. Keep looking up, sweetheart. The universe is listening."</em></div>
                    </div>
                </div>

                <p class="type-body mb-5">The transmitter went dark — not broken, but fulfilled. Its purpose complete. Through the attic window, the Milky Way stretched overhead, and you understood that the Golden Record was never meant to be a single message. It was a conversation, spanning generations, between humanity and the infinite.</p>

                <p class="type-body">You left the attic with the transmitter in your arms. Tomorrow, you would find a way to pass it on.</p>

                <div class="footer" style="margin-top: var(--space-8);">
                    <div class="footer-brand">Into the Infinite</div>
                    <p class="footer-text">The Golden Record is never finished. Each generation adds a track.</p>
                    <div class="footer-constellation">
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                        <div class="footer-star"></div>
                    </div>
                    <div class="the-end">The End</div>
                </div>
            `,
            choices: [
                { text: 'Begin Again', next: '_restart' }
            ]
        }
    };

    // ================================================================
    //  STORY ENGINE
    // ================================================================

    const engine = {
        currentScene: null,
        history: [],
        facts: [],
        factsPanelOpen: false,

        // Audio narration state
        audio: null,
        audioReady: false,
        audioPlaying: false,
        audioUpdateInterval: null,
        audioSpeedIndex: 0,
        audioSpeeds: [1, 1.25, 1.5, 2],

        init() {
            document.getElementById('startBtn').addEventListener('click', () => this.start());
            document.getElementById('restartBtn').addEventListener('click', () => this.restart());
            document.getElementById('factToggle').addEventListener('click', () => this.toggleFacts());

            // Audio controls
            document.getElementById('audioPlayBtn').addEventListener('click', () => this.toggleAudio());
            document.getElementById('audioProgressBar').addEventListener('click', (e) => this.seekAudio(e));
            document.getElementById('audioSpeedBtn').addEventListener('click', () => this.cycleSpeed());

            // Keyboard support: 1-9 for choices
            document.addEventListener('keydown', (e) => {
                if (e.key >= '1' && e.key <= '9') {
                    const idx = parseInt(e.key) - 1;
                    const btns = document.querySelectorAll('.choice-btn');
                    if (btns[idx]) btns[idx].click();
                }
            });
        },

        start() {
            document.getElementById('titleScreen').style.display = 'none';
            document.getElementById('sceneWrapper').classList.add('active');
            document.getElementById('factTracker').style.display = 'block';
            this.goTo('scene_1_discovery');
        },

        restart() {
            this.stopAudio();
            this.currentScene = null;
            this.history = [];
            this.facts = [];
            this.factsPanelOpen = false;
            document.getElementById('factPanel').classList.remove('open');
            document.getElementById('sceneWrapper').classList.remove('active');
            document.getElementById('titleScreen').style.display = 'flex';
            document.getElementById('factTracker').style.display = 'none';
            this.updateFactUI();
            window.scrollTo(0, 0);
        },

        goTo(sceneId) {
            if (sceneId === '_restart') {
                this.restart();
                return;
            }

            const scene = STORY[sceneId];
            if (!scene) return;

            // Transition effect
            if (this.currentScene) {
                const overlay = document.getElementById('transition');
                overlay.classList.add('active');
                setTimeout(() => {
                    this.renderScene(sceneId, scene);
                    window.scrollTo({ top: 0, behavior: 'auto' });
                }, 500);
                setTimeout(() => {
                    overlay.classList.remove('active');
                }, 1200);
            } else {
                this.renderScene(sceneId, scene);
            }

            if (this.currentScene) {
                this.history.push(this.currentScene);
            }
            this.currentScene = sceneId;
        },

        renderScene(sceneId, scene) {
            // Stop any playing audio and load new scene audio
            this.stopAudio();
            this.loadAudio(sceneId);

            const container = document.getElementById('sceneContent');
            const gameControls = document.querySelector('.game-controls');
            if (gameControls) gameControls.style.display = sceneId.startsWith('ending') ? 'none' : '';

            // Update signal ID in header
            if (scene.signal) {
                document.getElementById('signalId').textContent = scene.signal;
            }

            let html = '<div class="scene-content">';

            // Scene content is raw HTML using style guide classes
            html += scene.content;

            // Fact notification
            if (scene.fact) {
                this.addFact(scene.fact);
            }

            // Choices
            if (scene.choices && scene.choices.length > 0) {
                html += '<div class="choices">';
                scene.choices.forEach((choice, i) => {
                    html += '<button class="choice-btn" onclick="engine.goTo(\'' + choice.next + '\')">';
                    html += '<span class="choice-key">' + (i + 1) + '</span>';
                    html += choice.text;
                    html += '</button>';
                });
                html += '</div>';
            }

            html += '</div>';
            container.innerHTML = html;
            this.updateFactUI();
        },

        addFact(fact) {
            if (!this.facts.includes(fact)) {
                this.facts.push(fact);
            }
        },

        updateFactUI() {
            const count = this.facts.length;
            document.getElementById('factCount').textContent = count;

            const list = document.getElementById('factList');
            if (count === 0) {
                list.innerHTML = '<p class="no-facts">No discoveries yet...</p>';
            } else {
                list.innerHTML = this.facts.map(f => '<div class="fact-item">' + f + '</div>').join('');
            }
        },

        // ── Audio Narration Methods ──────────────────────────

        loadAudio(sceneId) {
            const player = document.getElementById('audioPlayer');
            const playBtn = document.getElementById('audioPlayBtn');
            const progressFill = document.getElementById('audioProgressFill');
            const timeDisplay = document.getElementById('audioTime');

            // Reset UI
            player.classList.remove('visible', 'playing', 'loading');
            playBtn.innerHTML = '&#9654;';
            playBtn.title = 'Play narration';
            playBtn.setAttribute('aria-label', 'Play narration');
            progressFill.style.width = '0%';
            timeDisplay.textContent = '0:00';
            this.audioReady = false;
            this.audioPlaying = false;
            this.audioSpeedIndex = 0;
            document.getElementById('audioSpeedBtn').textContent = '1x';

            // Create new audio element
            const audioSrc = 'audio/cosmic/' + sceneId + '.mp3';
            this.audio = new Audio();

            // Show player in loading state while we check if file exists
            player.classList.add('visible', 'loading');

            this.audio.addEventListener('canplaythrough', () => {
                this.audioReady = true;
                player.classList.remove('loading');
                timeDisplay.textContent = this.formatTime(this.audio.duration);
            }, { once: true });

            this.audio.addEventListener('error', () => {
                // Audio file not found or failed to load — hide player gracefully
                this.audioReady = false;
                player.classList.remove('visible', 'loading');
                this.audio = null;
            });

            this.audio.addEventListener('ended', () => {
                this.audioPlaying = false;
                player.classList.remove('playing');
                playBtn.innerHTML = '&#9654;';
                playBtn.title = 'Play narration';
                playBtn.setAttribute('aria-label', 'Play narration');
                this.stopProgressUpdates();
            });

            this.audio.preload = 'auto';
            this.audio.src = audioSrc;
        },

        stopAudio() {
            if (this.audio) {
                this.audio.pause();
                this.audio.removeAttribute('src');
                this.audio.load();
                this.audio = null;
            }
            this.audioReady = false;
            this.audioPlaying = false;
            this.stopProgressUpdates();

            const player = document.getElementById('audioPlayer');
            if (player) {
                player.classList.remove('visible', 'playing', 'loading');
            }
        },

        toggleAudio() {
            if (!this.audio || !this.audioReady) return;

            if (this.audioPlaying) {
                this.audio.pause();
                this.audioPlaying = false;
                document.getElementById('audioPlayer').classList.remove('playing');
                document.getElementById('audioPlayBtn').innerHTML = '&#9654;';
                document.getElementById('audioPlayBtn').title = 'Play narration';
                document.getElementById('audioPlayBtn').setAttribute('aria-label', 'Play narration');
                this.stopProgressUpdates();
            } else {
                this.audio.play().then(() => {
                    this.audioPlaying = true;
                    document.getElementById('audioPlayer').classList.add('playing');
                    document.getElementById('audioPlayBtn').innerHTML = '&#9208;';
                    document.getElementById('audioPlayBtn').title = 'Pause narration';
                    document.getElementById('audioPlayBtn').setAttribute('aria-label', 'Pause narration');
                    this.startProgressUpdates();
                }).catch(() => {
                    // Playback blocked or failed — ignore silently
                });
            }
        },

        seekAudio(e) {
            if (!this.audio || !this.audioReady) return;
            const bar = document.getElementById('audioProgressBar');
            const rect = bar.getBoundingClientRect();
            const ratio = Math.max(0, Math.min(1, (e.clientX - rect.left) / rect.width));
            this.audio.currentTime = ratio * this.audio.duration;
            this.updateProgress();
        },

        cycleSpeed() {
            if (!this.audio) return;
            this.audioSpeedIndex = (this.audioSpeedIndex + 1) % this.audioSpeeds.length;
            const speed = this.audioSpeeds[this.audioSpeedIndex];
            this.audio.playbackRate = speed;
            document.getElementById('audioSpeedBtn').textContent = speed + 'x';
        },

        startProgressUpdates() {
            this.stopProgressUpdates();
            this.audioUpdateInterval = setInterval(() => this.updateProgress(), 250);
        },

        stopProgressUpdates() {
            if (this.audioUpdateInterval) {
                clearInterval(this.audioUpdateInterval);
                this.audioUpdateInterval = null;
            }
        },

        updateProgress() {
            if (!this.audio || !this.audio.duration) return;
            const pct = (this.audio.currentTime / this.audio.duration) * 100;
            document.getElementById('audioProgressFill').style.width = pct + '%';
            const remaining = this.audio.duration - this.audio.currentTime;
            document.getElementById('audioTime').textContent = this.formatTime(remaining);
        },

        formatTime(seconds) {
            if (!seconds || !isFinite(seconds)) return '0:00';
            const m = Math.floor(seconds / 60);
            const s = Math.floor(seconds % 60);
            return m + ':' + (s < 10 ? '0' : '') + s;
        },

        // ── Fact Tracker Methods ─────────────────────────

        toggleFacts() {
            this.factsPanelOpen = !this.factsPanelOpen;
            document.getElementById('factPanel').classList.toggle('open', this.factsPanelOpen);
        }
    };

    // ================================================================
    //  STARFIELD GENERATOR
    // ================================================================
    function createStarfield() {
        const starfield = document.getElementById('starfield');
        const starCount = 200;
        const types = ['star--tiny', 'star--small', 'star--medium', 'star--bright'];
        const weights = [0.5, 0.3, 0.15, 0.05];

        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';

            const rand = Math.random();
            let cumulative = 0;
            let selectedType = types[0];
            for (let j = 0; j < weights.length; j++) {
                cumulative += weights[j];
                if (rand < cumulative) {
                    selectedType = types[j];
                    break;
                }
            }

            star.classList.add(selectedType);
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 5 + 's';
            star.style.animationDuration = (Math.random() * 3 + 2) + 's';
            starfield.appendChild(star);
        }
    }

    // ================================================================
    //  BOOT
    // ================================================================
    createStarfield();
    engine.init();
    </script>
</body>
</html>
