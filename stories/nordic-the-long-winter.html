<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Long Winter — A Nordic Interactive Story</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,300;0,6..12,400;0,6..12,500;0,6..12,600;0,6..12,700;1,6..12,400&family=Playfair+Display:wght@500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Typography */
            --font-sans: 'Nunito Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            --font-serif: 'Playfair Display', Georgia, serif;

            /* Spacing Scale */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 24px;
            --space-6: 32px;
            --space-7: 48px;
            --space-8: 64px;
            --space-9: 96px;
            --space-10: 128px;

            /* Core Colors - Soft, Natural Palette */
            --snow: #FAFBFC;
            --frost: #F5F7F8;
            --cloud: #EEF1F3;
            --mist: #E2E7EB;
            --stone: #C8D1D9;
            --slate: #8A99A6;
            --charcoal: #4A5568;
            --night: #2D3748;
            --deep-night: #1A202C;

            /* Warm Wood Tones */
            --birch: #F5E6D3;
            --pine: #E8D5B7;
            --oak: #D4B896;
            --walnut: #B8956E;
            --teak: #8B6914;

            /* Accent Colors - Nature Inspired */
            --terracotta: #C67B5C;
            --terracotta-light: #E8A98A;
            --forest: #5B7B6D;
            --forest-light: #8FAF9F;
            --mustard: #D4A843;
            --mustard-light: #E8C977;
            --fjord: #7B9AAB;
            --fjord-light: #A8C5D4;
            --berry: #9B6B7D;

            /* Semantic Colors */
            --text-primary: var(--deep-night);
            --text-secondary: var(--charcoal);
            --text-muted: var(--slate);
            --text-light: var(--snow);
            --bg-primary: var(--snow);
            --bg-warm: var(--frost);
            --bg-card: #FFFFFF;
            --border-color: var(--mist);
            --border-soft: var(--cloud);
            --accent: var(--terracotta);
            --accent-secondary: var(--forest);

            /* Effects */
            --shadow-soft: 0 2px 8px rgba(45, 55, 72, 0.06);
            --shadow-medium: 0 4px 16px rgba(45, 55, 72, 0.08);
            --shadow-warm: 0 4px 20px rgba(198, 123, 92, 0.12);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;

            /* Transitions */
            --transition-fast: 0.15s ease;
            --transition-base: 0.25s ease;
            --transition-slow: 0.4s ease;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-sans);
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-primary);
            background: var(--bg-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Subtle frost texture overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 0%, rgba(168, 197, 212, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 0%, rgba(198, 123, 92, 0.04) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 100%, rgba(91, 123, 109, 0.06) 0%, transparent 50%);
            pointer-events: none;
            z-index: 0;
        }

        /* Wood Grain Texture Background */
        .wood-texture {
            background-image:
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 2px,
                    rgba(139, 105, 20, 0.02) 2px,
                    rgba(139, 105, 20, 0.02) 4px
                ),
                linear-gradient(
                    180deg,
                    var(--birch) 0%,
                    var(--pine) 50%,
                    var(--birch) 100%
                );
        }

        /* Typography */
        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-sans);
            font-weight: 600;
            line-height: 1.3;
            color: var(--text-primary);
        }

        h1 {
            font-family: var(--font-serif);
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 500;
            letter-spacing: -0.01em;
            margin-bottom: var(--space-6);
        }

        h2 {
            font-size: 2rem;
            margin-bottom: var(--space-5);
        }

        h3 {
            font-size: 1.375rem;
            margin-bottom: var(--space-4);
        }

        h4 {
            font-size: 1.125rem;
            margin-bottom: var(--space-3);
        }

        p {
            margin-bottom: var(--space-4);
            max-width: 65ch;
            color: var(--text-secondary);
        }

        .lead {
            font-size: 1.2rem;
            line-height: 1.8;
            color: var(--text-secondary);
            font-weight: 300;
        }

        .small {
            font-size: 0.875rem;
        }

        .overline {
            text-transform: uppercase;
            letter-spacing: 0.15em;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--accent);
        }

        .serif {
            font-family: var(--font-serif);
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-soft);
        }

        .card-cozy {
            background: linear-gradient(135deg, var(--frost) 0%, var(--bg-card) 100%);
            border: none;
        }

        .card-warm {
            background: linear-gradient(135deg, var(--birch) 0%, #FDF8F3 100%);
            border: 1px solid var(--pine);
        }

        .card-icon {
            width: 56px;
            height: 56px;
            background: var(--frost);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-4);
        }

        .card h3 {
            margin-bottom: var(--space-3);
        }

        .card p {
            color: var(--text-secondary);
            margin-bottom: 0;
            font-size: 0.9375rem;
        }

        .card-footer {
            margin-top: var(--space-5);
            padding-top: var(--space-4);
            border-top: 1px solid var(--border-soft);
        }

        /* Feature Card */
        .feature-card {
            display: flex;
            gap: var(--space-5);
            padding: var(--space-5);
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-soft);
        }

        .feature-number {
            font-family: var(--font-serif);
            font-size: 2rem;
            font-weight: 500;
            color: var(--terracotta);
            line-height: 1;
            flex-shrink: 0;
        }

        .feature-content h4 {
            margin-bottom: var(--space-2);
        }

        .feature-content p {
            margin-bottom: 0;
            font-size: 0.9375rem;
        }

        /* Principle Card */
        .principle-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            border: 1px solid var(--border-soft);
        }

        .principle-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: var(--space-4);
            font-size: 1.5rem;
        }

        .principle-icon.terracotta {
            background: rgba(198, 123, 92, 0.1);
            color: var(--terracotta);
        }

        .principle-icon.forest {
            background: rgba(91, 123, 109, 0.1);
            color: var(--forest);
        }

        .principle-icon.mustard {
            background: rgba(212, 168, 67, 0.1);
            color: var(--mustard);
        }

        .principle-icon.fjord {
            background: rgba(123, 154, 171, 0.1);
            color: var(--fjord);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-5);
            font-family: var(--font-sans);
            font-size: 0.9375rem;
            font-weight: 600;
            text-decoration: none;
            border: none;
            border-radius: var(--radius-md);
            background: var(--bg-card);
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
            box-shadow: var(--shadow-soft), inset 0 0 0 1px var(--border-color);
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: var(--shadow-medium), inset 0 0 0 1px var(--border-color);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-primary {
            background: var(--terracotta);
            color: var(--text-light);
            box-shadow: var(--shadow-warm);
        }

        .btn-primary:hover {
            background: #B86D4E;
            box-shadow: 0 6px 24px rgba(198, 123, 92, 0.25);
        }

        .btn-secondary {
            background: var(--forest);
            color: var(--text-light);
            box-shadow: 0 4px 16px rgba(91, 123, 109, 0.15);
        }

        .btn-secondary:hover {
            background: #4D6B5F;
            box-shadow: 0 6px 24px rgba(91, 123, 109, 0.25);
        }

        .btn-warm {
            background: var(--mustard);
            color: var(--deep-night);
            box-shadow: 0 4px 16px rgba(212, 168, 67, 0.2);
        }

        .btn-warm:hover {
            background: #C49A3D;
            box-shadow: 0 6px 24px rgba(212, 168, 67, 0.3);
        }

        .btn-outline {
            background: transparent;
            border: 2px solid var(--border-color);
            box-shadow: none;
        }

        .btn-outline:hover {
            border-color: var(--terracotta);
            color: var(--terracotta);
            box-shadow: none;
        }

        .btn-lg {
            padding: var(--space-4) var(--space-7);
            font-size: 1rem;
            border-radius: var(--radius-lg);
        }

        .button-row {
            display: flex;
            gap: var(--space-4);
            flex-wrap: wrap;
            margin-bottom: var(--space-5);
        }

        /* Badges */
        .badge {
            display: inline-flex;
            align-items: center;
            padding: var(--space-1) var(--space-3);
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: var(--radius-sm);
            background: var(--frost);
            color: var(--text-secondary);
        }

        .badge-terracotta {
            background: rgba(198, 123, 92, 0.15);
            color: var(--terracotta);
        }

        .badge-forest {
            background: rgba(91, 123, 109, 0.15);
            color: var(--forest);
        }

        .badge-mustard {
            background: rgba(212, 168, 67, 0.15);
            color: #9A7B2E;
        }

        .badge-fjord {
            background: rgba(123, 154, 171, 0.15);
            color: #5A7A8A;
        }

        .badge-solid {
            background: var(--terracotta);
            color: var(--text-light);
        }

        .badge-outline {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .badge-row {
            display: flex;
            gap: var(--space-3);
            flex-wrap: wrap;
        }

        .badge-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: currentColor;
            margin-right: var(--space-2);
        }

        /* Table */
        .table-wrapper {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: var(--shadow-soft);
            border: 1px solid var(--border-soft);
        }

        .table {
            width: 100%;
            border-collapse: collapse;
        }

        .table th,
        .table td {
            text-align: left;
            padding: var(--space-3) var(--space-4);
        }

        .table th {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            background: var(--frost);
            border-bottom: 1px solid var(--border-soft);
        }

        .table td {
            border-bottom: 1px solid var(--border-soft);
            color: var(--text-secondary);
            font-size: 0.9375rem;
        }

        .table tr:last-child td {
            border-bottom: none;
        }

        .table-primary {
            font-weight: 600;
            color: var(--text-primary);
        }

        /* Section */
        .section-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 32px;
            height: 32px;
            background: var(--birch);
            border-radius: var(--radius-sm);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--walnut);
            margin-bottom: var(--space-4);
        }

        /* Hygge Banner */
        .hygge-banner {
            background: linear-gradient(135deg, var(--birch) 0%, var(--pine) 50%, var(--birch) 100%);
            border-radius: var(--radius-xl);
            padding: var(--space-7) var(--space-6);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hygge-banner::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                repeating-linear-gradient(
                    90deg,
                    transparent,
                    transparent 3px,
                    rgba(139, 105, 20, 0.03) 3px,
                    rgba(139, 105, 20, 0.03) 6px
                );
            pointer-events: none;
        }

        .hygge-banner h3 {
            font-family: var(--font-serif);
            font-size: 1.75rem;
            margin-bottom: var(--space-3);
            color: var(--deep-night);
            position: relative;
        }

        .hygge-banner p {
            max-width: 50ch;
            margin: 0 auto;
            color: var(--charcoal);
            position: relative;
        }

        /* Dividers */
        .divider {
            height: 1px;
            background: var(--border-soft);
            margin: var(--space-6) 0;
        }

        .divider-decorative {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            margin: var(--space-6) 0;
        }

        .divider-decorative::before,
        .divider-decorative::after {
            content: '';
            flex: 1;
            height: 1px;
            background: var(--border-soft);
        }

        .divider-decorative span {
            color: var(--terracotta);
            font-size: 1.2rem;
        }

        /* Notice */
        .notice {
            display: flex;
            gap: var(--space-4);
            padding: var(--space-4) var(--space-5);
            background: var(--frost);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--terracotta);
        }

        .notice-icon {
            flex-shrink: 0;
            color: var(--terracotta);
            font-size: 1.1rem;
        }

        .notice-content p {
            margin-bottom: 0;
            font-size: 0.9375rem;
        }

        /* Utilities */
        .text-center { text-align: center; }
        .mb-0 { margin-bottom: 0; }
        .mb-4 { margin-bottom: var(--space-4); }
        .mb-6 { margin-bottom: var(--space-6); }
        .mt-4 { margin-top: var(--space-4); }
        .mt-6 { margin-top: var(--space-6); }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* Selection */
        ::selection {
            background: var(--terracotta-light);
            color: var(--deep-night);
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: var(--frost);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--stone);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--slate);
        }

        /* =============================================
           STORY-SPECIFIC STYLES
        ============================================= */

        /* Game container */
        .game-container {
            max-width: 780px;
            margin: 0 auto;
            padding: 2rem;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            z-index: 1;
        }

        /* =============================================
           TITLE SCREEN
        ============================================= */
        .title-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 85vh;
            text-align: center;
        }

        .title-era {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 2rem;
            padding: 6px 20px;
            background: var(--birch);
            border-radius: var(--radius-md);
            color: var(--walnut);
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.2em;
        }

        .title-screen h1 {
            font-family: var(--font-serif);
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 500;
            line-height: 1;
            margin-bottom: 0.75rem;
            color: var(--deep-night);
        }

        .title-subtitle {
            font-size: 1.1rem;
            font-weight: 300;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: var(--terracotta);
            margin-bottom: 2rem;
        }

        .title-tagline {
            font-family: var(--font-serif);
            font-style: italic;
            color: var(--text-muted);
            margin-bottom: 3rem;
            max-width: 480px;
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .title-start {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 14px 48px;
            font-family: var(--font-sans);
            font-size: 0.9rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.15em;
            border: 2px solid var(--terracotta);
            background: var(--terracotta);
            color: var(--text-light);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.25s ease;
            box-shadow: var(--shadow-warm);
        }

        .title-start:hover {
            background: #B86D4E;
            border-color: #B86D4E;
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(198, 123, 92, 0.3);
        }

        .title-credits {
            margin-top: 3rem;
            font-size: 0.75rem;
            color: var(--text-muted);
            letter-spacing: 0.1em;
        }

        /* =============================================
           SCENE CONTAINER
        ============================================= */
        .scene-wrapper {
            display: none;
            flex-direction: column;
            flex: 1;
            padding-top: 1rem;
        }

        .scene-wrapper.active {
            display: flex;
        }

        /* Scene header */
        .scene-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: var(--space-4);
            margin-bottom: var(--space-6);
            border-bottom: 1px solid var(--border-soft);
        }

        .scene-era-label {
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--terracotta);
            letter-spacing: 0.15em;
            text-transform: uppercase;
        }

        .scene-fact-count {
            font-size: 0.7rem;
            color: var(--forest);
            letter-spacing: 0.1em;
            font-weight: 600;
        }

        /* Scene content fade in */
        .scene-content {
            animation: sceneFadeIn 0.7s ease-out;
        }

        @keyframes sceneFadeIn {
            from { opacity: 0; transform: translateY(12px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Scene inner content — max-width for readability */
        .scene-content .card p,
        .scene-content .card-warm p,
        .scene-content .card-cozy p,
        .scene-content .feature-content p,
        .scene-content .notice-content p,
        .scene-content .hygge-banner p {
            max-width: 65ch;
        }

        /* =============================================
           FACT FOUND TOAST
        ============================================= */
        .fact-found {
            display: inline-flex;
            align-items: center;
            gap: var(--space-3);
            background: rgba(91, 123, 109, 0.12);
            color: var(--forest);
            padding: 8px 18px;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 0.05em;
            margin-top: var(--space-5);
            border-radius: var(--radius-md);
            border-left: 3px solid var(--forest);
            animation: factSlideIn 0.6s ease-out;
        }

        .fact-found::before {
            content: '+';
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 20px;
            height: 20px;
            background: var(--forest);
            color: white;
            border-radius: 50%;
            font-size: 0.75rem;
            font-weight: 700;
            flex-shrink: 0;
        }

        @keyframes factSlideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        /* =============================================
           CHOICES
        ============================================= */
        .choices {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            margin-top: var(--space-6);
            opacity: 0;
            animation: choicesFadeIn 0.6s ease-out 0.6s forwards;
        }

        @keyframes choicesFadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .choice-btn {
            display: flex;
            align-items: center;
            padding: 14px 24px;
            font-family: var(--font-sans);
            font-size: 0.9375rem;
            font-weight: 600;
            border: 1px solid var(--border-color);
            background: var(--bg-card);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-soft);
        }

        .choice-btn:hover {
            border-color: var(--terracotta);
            background: linear-gradient(135deg, var(--frost) 0%, var(--bg-card) 100%);
            box-shadow: var(--shadow-warm);
            transform: translateY(-1px);
        }

        .choice-btn .choice-key {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            border: 1px solid var(--stone);
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 700;
            color: var(--text-muted);
            margin-right: 14px;
            flex-shrink: 0;
            background: var(--frost);
        }

        .choice-btn:hover .choice-key {
            border-color: var(--terracotta);
            color: var(--terracotta);
            background: rgba(198, 123, 92, 0.08);
        }

        /* =============================================
           FROST TRANSITION
        ============================================= */
        .transition-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            z-index: 500;
            pointer-events: none;
            opacity: 0;
        }

        .transition-overlay.active {
            pointer-events: all;
            animation: frostTransition 1s ease-in-out;
        }

        @keyframes frostTransition {
            0% { opacity: 0; }
            15% { opacity: 1; }
            50% { opacity: 1; }
            85% { opacity: 1; }
            100% { opacity: 0; }
        }

        .transition-frost {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 30% 20%, rgba(168, 197, 212, 0.4) 0%, transparent 50%),
                radial-gradient(ellipse at 70% 80%, rgba(143, 175, 159, 0.3) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(245, 247, 248, 0.95) 0%, rgba(238, 241, 243, 0.9) 100%);
        }

        .transition-frost::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image:
                repeating-linear-gradient(
                    60deg,
                    transparent,
                    transparent 2px,
                    rgba(168, 197, 212, 0.05) 2px,
                    rgba(168, 197, 212, 0.05) 4px
                );
        }

        /* =============================================
           KNOWLEDGE TRACKER (SIDEBAR)
        ============================================= */
        .fact-tracker {
            position: fixed;
            top: 1.5rem;
            right: 1.5rem;
            z-index: 100;
            max-width: 260px;
        }

        .fact-tracker-toggle {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-md);
            color: var(--forest);
            font-family: var(--font-sans);
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.08em;
            text-transform: uppercase;
            cursor: pointer;
            transition: all 0.2s;
            margin-left: auto;
            box-shadow: var(--shadow-soft);
        }

        .fact-tracker-toggle:hover {
            border-color: var(--forest);
            box-shadow: var(--shadow-medium);
        }

        .fact-tracker-toggle .fact-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 22px;
            height: 22px;
            padding: 0 6px;
            background: var(--forest);
            color: white;
            border-radius: 11px;
            font-size: 0.7rem;
        }

        .fact-tracker-panel {
            display: none;
            margin-top: 0.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border-soft);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            box-shadow: var(--shadow-medium);
            max-height: 70vh;
            overflow-y: auto;
        }

        .fact-tracker-panel.open {
            display: block;
            animation: panelSlideIn 0.3s ease-out;
        }

        @keyframes panelSlideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fact-tracker-panel h4 {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            color: var(--text-muted);
            margin-bottom: var(--space-4);
        }

        .fact-item {
            font-size: 0.8rem;
            color: var(--text-secondary);
            padding: 8px 0;
            border-bottom: 1px solid var(--border-soft);
            animation: factSlideIn 0.4s ease-out;
            line-height: 1.5;
        }

        .fact-item:last-child { border-bottom: none; }

        .fact-item .fact-era {
            display: inline-block;
            font-size: 0.65rem;
            font-weight: 700;
            color: var(--terracotta);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: 2px;
        }

        .no-facts {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-style: italic;
        }

        /* =============================================
           GAME CONTROLS
        ============================================= */
        .game-controls {
            display: flex;
            gap: 0.75rem;
            margin-top: var(--space-7);
            padding-top: var(--space-5);
            border-top: 1px solid var(--border-soft);
        }

        .ctrl-btn {
            padding: 8px 18px;
            font-family: var(--font-sans);
            font-size: 0.8rem;
            font-weight: 600;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: transparent;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }

        .ctrl-btn:hover {
            border-color: var(--terracotta);
            color: var(--terracotta);
        }

        /* =============================================
           ENDING STYLES
        ============================================= */
        .scene-ending {
            text-align: center;
            padding: var(--space-8) var(--space-6);
        }

        .scene-ending .ending-label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.3em;
            color: var(--terracotta);
            margin-bottom: var(--space-4);
            font-weight: 700;
        }

        .scene-ending .ending-title {
            font-family: var(--font-serif);
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 500;
            margin-bottom: var(--space-6);
            color: var(--deep-night);
        }

        .scene-ending .ending-text {
            max-width: 550px;
            margin: 0 auto;
        }

        .scene-ending .ending-text p {
            margin-bottom: var(--space-4);
            color: var(--text-secondary);
            max-width: 100%;
        }

        .scene-ending .the-end {
            font-family: var(--font-serif);
            font-size: 0.8rem;
            letter-spacing: 0.25em;
            color: var(--text-muted);
            margin-top: var(--space-7);
            text-transform: uppercase;
        }

        /* =============================================
           DARK SCENE (Viking/Night scenes)
        ============================================= */
        .scene-dark-card {
            background: var(--deep-night);
            border-radius: var(--radius-xl);
            padding: var(--space-7) var(--space-6);
            color: var(--cloud);
            position: relative;
            overflow: hidden;
            margin-bottom: var(--space-5);
        }

        .scene-dark-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--terracotta), var(--mustard), var(--fjord));
        }

        .scene-dark-card::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background:
                radial-gradient(ellipse at 20% 80%, rgba(123, 154, 171, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 20%, rgba(198, 123, 92, 0.06) 0%, transparent 50%);
            pointer-events: none;
        }

        .scene-dark-card h3 {
            color: var(--cloud);
            font-family: var(--font-serif);
            position: relative;
            z-index: 1;
        }

        .scene-dark-card p {
            color: var(--stone);
            position: relative;
            z-index: 1;
        }

        .scene-dark-card .overline {
            color: var(--terracotta-light);
            position: relative;
            z-index: 1;
        }

        .scene-dark-card .badge {
            position: relative;
            z-index: 1;
        }

        .scene-dark-card .notice {
            background: rgba(245, 247, 248, 0.06);
            border-left-color: var(--fjord);
            position: relative;
            z-index: 1;
        }

        .scene-dark-card .notice-content p {
            color: var(--stone);
        }

        .scene-dark-card .divider {
            background: rgba(200, 209, 217, 0.15);
        }

        /* =============================================
           NORTHERN LIGHTS SHIMMER (for special scenes)
        ============================================= */
        @keyframes northernLights {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .aurora-accent {
            height: 3px;
            background: linear-gradient(90deg,
                var(--fjord), var(--forest-light), var(--terracotta-light),
                var(--mustard-light), var(--fjord-light), var(--forest));
            background-size: 300% 100%;
            animation: northernLights 8s ease infinite;
            border-radius: 2px;
            margin: var(--space-5) 0;
        }

        /* =============================================
           RESPONSIVE
        ============================================= */
        @media (max-width: 768px) {
            .game-container { padding: 1rem; }
            .fact-tracker { right: 0.75rem; top: 0.75rem; max-width: 220px; }
            .scene-dark-card { padding: var(--space-6) var(--space-5); }
            .hygge-banner { padding: var(--space-6) var(--space-5); }
        }
    </style>
</head>
<body>
    <!-- Frost transition overlay -->
    <div class="transition-overlay" id="transition">
        <div class="transition-frost"></div>
    </div>

    <!-- Knowledge Tracker -->
    <div class="fact-tracker" id="factTracker" style="display: none;">
        <button class="fact-tracker-toggle" id="factToggle">
            <span>Knowledge</span>
            <span class="fact-badge" id="factCount">0</span>
        </button>
        <div class="fact-tracker-panel" id="factPanel">
            <h4>Historical Facts Collected</h4>
            <div id="factList">
                <p class="no-facts">No facts discovered yet...</p>
            </div>
        </div>
    </div>

    <div class="game-container">
        <!-- Title Screen -->
        <div class="title-screen" id="titleScreen">
            <div class="title-era">793 AD - Present</div>
            <h1>The Long Winter</h1>
            <div class="title-subtitle">A Nordic Interactive Story</div>
            <p class="title-tagline">"From the cold sea came the longships, and from the long winter came the warmth we learned to build for ourselves."</p>
            <button class="title-start" id="startBtn">Begin the Saga</button>
            <p class="title-credits">A story of Vikings, design, and the meaning of home</p>
            <a href="index.html" class="back-to-stories" style="display:inline-block;margin-top:1.5rem;color:inherit;text-decoration:none;font-size:0.8rem;opacity:0.5;transition:opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.5'">&larr; All Stories</a>
        </div>

        <!-- Scene Container -->
        <div class="scene-wrapper" id="sceneWrapper">
            <div class="scene-header">
                <span class="scene-era-label" id="eraLabel">The Viking Age</span>
            </div>

            <div id="sceneContent"></div>

            <div class="game-controls">
                <button class="ctrl-btn" id="restartBtn">Start Over</button>
            </div>
        </div>
    </div>

    <script>
    // =================================================================
    //  THE LONG WINTER — Story Data
    // =================================================================

    const STORY = {

        // --- SCENE 1: Lindisfarne ---
        lindisfarne: {
            era: 'JUNE 8, 793 AD',
            content: `
                <div class="scene-dark-card">
                    <p class="overline" style="margin-bottom: var(--space-4);">The North Sea</p>
                    <h3 style="font-size: 1.5rem; margin-bottom: var(--space-5);">The Dragon Ships</h3>
                    <p>The fog parted like a curtain. Through it came the longships — narrow-hulled, dragon-prowed, cutting through the grey swell of the North Sea with the silence of wolves on snow.</p>
                    <div style="margin: 1.5rem 0; text-align: center;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/09/Gokstad_ship_side.jpg/800px-Gokstad_ship_side.jpg" alt="The Gokstad Viking ship on display at the Viking Ship Museum in Oslo, Norway" style="max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e8e4dc;">
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; color: #6a6a6a;">The Gokstad Viking ship (c. 890 AD), Viking Ship Museum, Oslo</div>
                    </div>
                    <p>On the lead ship, thirty-two oars rose and fell in unison. At the prow, a man watched the coastline of northern England sharpen against the dawn. He could see the stone walls of the monastery on Lindisfarne, rising pale against the cliffs.</p>
                    <p>It was June 8, 793 AD. The monks of Lindisfarne had no idea what was coming.</p>
                    <div style="margin: 1.5rem 0; text-align: center;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/ed/Lindisfarne_Priory_from_above.jpg/800px-Lindisfarne_Priory_from_above.jpg" alt="Aerial view of Lindisfarne Priory ruins on Holy Island" style="max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e8e4dc;">
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; color: #6a6a6a;">Lindisfarne Priory ruins on Holy Island, Northumberland, England</div>
                    </div>
                    <div class="divider" style="margin: var(--space-5) 0;"></div>
                    <p>This raid would become the event that marked the beginning of the Viking Age — a period spanning from <strong style="color: var(--terracotta-light);">793 to 1066 AD</strong> that would reshape the map of Europe and reach as far as North America.</p>
                    <div class="notice" style="margin-top: var(--space-5);">
                        <div class="notice-icon">&#9875;</div>
                        <div class="notice-content">
                            <p><strong>Historical Record:</strong> The Anglo-Saxon Chronicle recorded: "In this year fierce, foreboding omens came over the land of the Northumbrians... and a little after that the harrying of the heathen miserably destroyed God's church in Lindisfarne."</p>
                        </div>
                    </div>
                </div>
            `,
            fact: 'The Viking Age began on June 8, 793 AD with the raid on Lindisfarne Monastery in northern England and lasted until 1066 AD.',
            choices: [
                { text: 'See the raid through a Viking warrior\'s eyes', next: 'viking_perspective' },
                { text: 'Understand why the Vikings left Scandinavia', next: 'why_they_left' }
            ]
        },

        // --- SCENE 2A: Viking Perspective ---
        viking_perspective: {
            era: '793 AD — LINDISFARNE',
            content: `
                <div class="card-warm" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">A Warrior's View</p>
                    <h3 class="serif" style="font-size: 1.5rem;">Gold, Silver, and Survival</h3>
                    <p>The monastery was rich in ways the warriors had never seen. Silver crosses, golden chalices, jeweled book covers — all sitting unguarded on a windswept island. The monks had no weapons, no walls worth the name. It was like finding a feast laid out in an empty hall.</p>
                    <p>But plunder was only part of the story. Back home in Scandinavia, resources were scarce. Long winters, thin soil, and too many sons with too little land. The sea was the road to survival, and these Vikings were some of the finest sailors the world had ever seen.</p>
                    <p>Their ships — clinker-built from overlapping oak planks — could cross open ocean and still navigate shallow rivers. A masterwork of <strong>functional design</strong>: every plank, every rivet, every curve of the hull served a purpose.</p>
                </div>
                <div class="feature-card" style="margin-bottom: var(--space-4);">
                    <div class="feature-number">35</div>
                    <div class="feature-content">
                        <h4>Crew of a Longship</h4>
                        <p>A typical longship carried around 35 warriors. These shallow-draft vessels could sail in just 50 centimeters of water, allowing Vikings to raid far inland via rivers.</p>
                    </div>
                </div>
            `,
            fact: 'Viking longships were clinker-built from overlapping oak planks and could sail in just 50cm of water, enabling raids far inland via rivers.',
            choices: [
                { text: 'Continue to the age of exploration', next: 'leif_intro' }
            ]
        },

        // --- SCENE 2B: Why They Left ---
        why_they_left: {
            era: '793 AD — SCANDINAVIA',
            content: `
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">The Northern Lands</p>
                    <h3 class="serif" style="font-size: 1.5rem;">Children of the Long Winter</h3>
                    <p>To understand the Vikings, you must first understand the land they came from. Scandinavia: a world of fjords cut deep into granite, of forests so dense the sun barely reached the ground, and of winters so long that darkness itself became a companion.</p>
                    <div style="margin: 1.5rem 0; text-align: center;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/The_Seven_Sisters%2C_Geiranger_Fjord%2C_Norway.jpg/800px-The_Seven_Sisters%2C_Geiranger_Fjord%2C_Norway.jpg" alt="The Seven Sisters waterfall cascading down steep cliffs into Geirangerfjord, Norway" style="max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e8e4dc;">
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; color: #6a6a6a;">The Seven Sisters waterfall, Geirangerfjord, Norway</div>
                    </div>
                    <p>In this unforgiving landscape, survival depended on <strong>pragmatism</strong>. Every tool had to work. Every building had to withstand the cold. Every journey had to be planned with ruthless efficiency. Waste was not a moral failing — it was a death sentence.</p>
                    <p>This philosophy — build only what you need, make it strong, make it beautiful if you can — would echo through a thousand years of Scandinavian culture.</p>
                </div>
                <div class="notice" style="margin-bottom: var(--space-5);">
                    <div class="notice-icon">&#10052;</div>
                    <div class="notice-content">
                        <p><strong>Key Insight:</strong> The same pragmatism that built longships in 793 would later build IKEA flatpack furniture in 1956. Viking resourcefulness is the ancestral DNA of Scandinavian design.</p>
                    </div>
                </div>
            `,
            fact: 'Scandinavian design philosophy descends directly from Viking pragmatism: survival in long winters demanded that every object be functional, durable, and waste-free.',
            choices: [
                { text: 'Continue to the age of exploration', next: 'leif_intro' }
            ]
        },

        // --- SCENE 3: Leif Erikson ---
        leif_intro: {
            era: 'C. 1000 AD — GREENLAND',
            content: `
                <div class="hygge-banner" style="margin-bottom: var(--space-5);">
                    <h3>Westward</h3>
                    <p>Two centuries after Lindisfarne, a young Norse explorer prepared to sail beyond the edge of the known world.</p>
                </div>
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <div class="badge-row" style="margin-bottom: var(--space-4);">
                        <span class="badge badge-terracotta">Explorer</span>
                        <span class="badge badge-fjord">c. 970s - c. 1020 AD</span>
                    </div>
                    <h3 class="serif" style="font-size: 1.5rem;">Leif Erikson — "The Lucky"</h3>
                    <p>Leif Erikson, son of Erik the Red, grew up in the Norse settlement on Greenland. Around the year 1000 AD, he assembled a crew of <strong style="color: var(--terracotta);">35 men</strong> and set sail west, following rumors of strange lands glimpsed by earlier sailors blown off course.</p>
                    <p>What he found would remain unknown to the rest of Europe for nearly <strong style="color: var(--terracotta);">500 years</strong> — until Columbus crossed the Atlantic in 1492.</p>
                </div>
                <div class="divider-decorative"><span>&#9830;</span></div>
                <div class="card-cozy" style="border-radius: var(--radius-xl); padding: var(--space-5);">
                    <p class="lead" style="margin-bottom: 0; text-align: center; max-width: 100%;">Leif made three landfalls: <strong>Helluland</strong> (flat stones), <strong>Markland</strong> (forests), and <strong>Vinland</strong> (wild grapes) — becoming the first known European to reach North America.</p>
                </div>
            `,
            fact: 'Around 1000 AD, Leif Erikson sailed with 35 men to North America, approximately 500 years before Columbus, making three landfalls: Helluland, Markland, and Vinland.',
            choices: [
                { text: 'Explore Vinland with Leif\'s crew', next: 'vinland' },
                { text: 'Learn about the settlement they tried to build', next: 'settlement' }
            ]
        },

        // --- SCENE 4A: Vinland ---
        vinland: {
            era: 'C. 1000 AD — VINLAND (NORTH AMERICA)',
            content: `
                <div class="card-warm" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">The New World</p>
                    <h3 class="serif" style="font-size: 1.5rem;">A Land of Abundance</h3>
                    <p>After the barren stone of Helluland and the dense forests of Markland, Vinland was a revelation. The Norse sagas describe what Leif's crew found:</p>
                    <p><em style="color: var(--walnut); font-family: var(--font-serif); font-size: 1.05rem;">"There was no lack of salmon in the river or the lake, bigger salmon than they had ever seen. The nature of the land was so choice, it seemed to them that none of the cattle would need fodder for the winter."</em></p>
                    <p>They found wild grapes — hence "Vinland," the land of wine — self-sown wheat, and stands of maple trees. Coming from the harsh winters of Greenland and Iceland, it must have seemed like a dream.</p>
                </div>
                <div class="table-wrapper" style="margin-bottom: var(--space-5);">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Landfall</th>
                                <th>Meaning</th>
                                <th>Likely Location</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="table-primary">Helluland</td>
                                <td>"Land of Flat Stones"</td>
                                <td>Baffin Island</td>
                            </tr>
                            <tr>
                                <td class="table-primary">Markland</td>
                                <td>"Land of Forests"</td>
                                <td>Labrador</td>
                            </tr>
                            <tr>
                                <td class="table-primary">Vinland</td>
                                <td>"Land of Wine"</td>
                                <td>Newfoundland</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            `,
            fact: 'The Norse sagas describe Vinland as having wild grapes, self-sown wheat, and salmon bigger than any they had seen — a stark contrast to harsh Scandinavian winters.',
            choices: [
                { text: 'Continue to the settlement', next: 'settlement' }
            ]
        },

        // --- SCENE 4B / 5: L'Anse aux Meadows ---
        settlement: {
            era: 'C. 1000-1010 AD — NEWFOUNDLAND',
            content: `
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <div class="badge-row" style="margin-bottom: var(--space-4);">
                        <span class="badge badge-mustard">Archaeological Evidence</span>
                        <span class="badge badge-forest">UNESCO World Heritage</span>
                    </div>
                    <h3 class="serif" style="font-size: 1.5rem;">L'Anse aux Meadows</h3>
                    <p>For centuries, the Norse voyages to North America were dismissed as legend. Then, in <strong style="color: var(--terracotta);">1960</strong>, Norwegian explorers Helge and Anne Stine Ingstad discovered the remains of a Norse settlement at L'Anse aux Meadows, on the northern tip of Newfoundland, Canada.</p>
                    <div style="margin: 1.5rem 0; text-align: center;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/L%27Anse_aux_Meadows%2C_recreated_long_house.jpg/800px-L%27Anse_aux_Meadows%2C_recreated_long_house.jpg" alt="Reconstructed Norse longhouse at L'Anse aux Meadows, showing turf walls and wooden frame" style="max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e8e4dc;">
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; color: #6a6a6a;">Reconstructed Norse longhouse at L'Anse aux Meadows, Newfoundland</div>
                    </div>
                    <p>The site contained the ruins of eight buildings, including a forge, a carpentry workshop, and living quarters in the distinctive Norse style. Carbon dating confirmed it: approximately <strong style="color: var(--terracotta);">1,000 years old</strong>.</p>
                    <p>It was designated a <strong>UNESCO World Heritage Site in 1978</strong> — the oldest confirmed European settlement in the Americas.</p>
                </div>
                <div class="notice" style="margin-bottom: var(--space-5);">
                    <div class="notice-icon">&#128204;</div>
                    <div class="notice-content">
                        <p><strong>Why did they leave?</strong> Conflict with indigenous peoples and the immense difficulty of maintaining supply lines across the Atlantic made the settlement unsustainable. The Norse abandoned Vinland within a decade — but the proof of their presence endured in the earth for a millennium.</p>
                    </div>
                </div>
            `,
            fact: 'L\'Anse aux Meadows, discovered in 1960 in Newfoundland, is the oldest confirmed European settlement in the Americas (~1,000 years old) and became a UNESCO World Heritage Site in 1978.',
            choices: [
                { text: 'Turn back to Scandinavia — the age of conversion', next: 'bluetooth' }
            ]
        },

        // --- SCENE 6: Harald Bluetooth ---
        bluetooth: {
            era: 'C. 958-986 AD — DENMARK',
            content: `
                <div class="scene-dark-card" style="margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">A Kingdom in Transition</p>
                    <h3 style="font-size: 1.5rem; margin-bottom: var(--space-5);">Harald Bluetooth and the Death of the Old Gods</h3>
                    <p>While Leif Erikson sailed west, a different kind of transformation was reshaping Scandinavia from within. King Harald I — called "Bluetooth" — ascended to the Danish throne around <strong style="color: var(--terracotta-light);">958 AD</strong>, succeeding his father Gorm the Old.</p>
                    <p>Around <strong style="color: var(--terracotta-light);">960-963 AD</strong>, Harald did something no Danish king had done before: he converted to Christianity, becoming Denmark's first Christian monarch.</p>
                    <div class="divider" style="margin: var(--space-5) 0;"></div>
                    <p>This was not merely a personal spiritual choice. It was a political earthquake. Harald consolidated rule over all of Jutland and Zealand, using the new faith as a tool to unify warring chieftains under one crown and one God.</p>
                    <p>The old pagan world of Thor and Odin — the world that had driven the longships to Lindisfarne and Vinland — was giving way to churches, feudal order, and written law.</p>
                </div>
                <div class="feature-card" style="margin-bottom: var(--space-4);">
                    <div class="feature-number" style="color: var(--fjord);">&#5765;</div>
                    <div class="feature-content">
                        <h4>The Jelling Stones</h4>
                        <p>Harald erected a massive runestone at Jelling declaring he "made the Danes Christian." It is sometimes called "Denmark's birth certificate" — the moment a collection of tribes became a kingdom.</p>
                    </div>
                </div>
            `,
            fact: 'King Harald Bluetooth converted to Christianity around 960-963 AD, becoming Denmark\'s first Christian king and consolidating rule over Jutland and Zealand under one crown.',
            choices: [
                { text: 'Witness the end of the Viking Age', next: 'stamford_bridge' },
                { text: 'Skip ahead to the birth of Scandinavian design', next: 'stockholm_1930' }
            ]
        },

        // --- SCENE 7: End of Viking Age ---
        stamford_bridge: {
            era: 'SEPTEMBER 25, 1066 — ENGLAND',
            content: `
                <div class="card-warm" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">The Last Viking</p>
                    <h3 class="serif" style="font-size: 1.5rem;">Stamford Bridge</h3>
                    <p>On September 25, 1066, Norwegian King <strong>Harald III</strong> — known as "Hardrada" (Hard Ruler) — stood on English soil with an invasion army of thousands. He had come to claim the English crown.</p>
                    <p>The English King Harold Godwinson met him at Stamford Bridge in Yorkshire. The battle was savage and decisive. Harald Hardrada fell with an arrow through his throat. Of the 300 ships that had brought the Norwegian army to England, only <strong style="color: var(--terracotta);">24 were needed</strong> to carry the survivors home.</p>
                    <p>Historians mark this day as the end of the Viking Age. The era of raids and conquest was over. Scandinavia would turn inward, building something new from the ashes of the old world: settled kingdoms, trading cities, and eventually, a philosophy of living that prized comfort over conquest.</p>
                </div>
                <div class="divider-decorative"><span>&#10022;</span></div>
                <p class="lead" style="text-align: center; max-width: 100%; margin-bottom: 0;">From warriors to settlers. From raiders to builders. The long transformation of Scandinavian culture had begun.</p>
            `,
            fact: 'The Viking Age ended at the Battle of Stamford Bridge on September 25, 1066, when Norwegian King Harald Hardrada was defeated — only 24 of his 300 ships were needed to carry survivors home.',
            choices: [
                { text: 'Continue to the birth of Scandinavian design', next: 'stockholm_1930' }
            ]
        },

        // --- SCENE 8: Stockholm Exhibition ---
        stockholm_1930: {
            era: '1930 — STOCKHOLM, SWEDEN',
            content: `
                <div class="hygge-banner" style="margin-bottom: var(--space-5);">
                    <h3>A New Dawn</h3>
                    <p>Nine centuries after Lindisfarne, Scandinavia showed the world a different kind of revolution — one built on light, wood, and the belief that beauty belongs to everyone.</p>
                </div>
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <div class="badge-row" style="margin-bottom: var(--space-4);">
                        <span class="badge badge-mustard">Design History</span>
                        <span class="badge badge-fjord">1930</span>
                    </div>
                    <h3 class="serif" style="font-size: 1.5rem;">The Stockholm Exhibition</h3>
                    <p>In 1930, the <strong>Swedish Society of Industrial Design</strong> organized an exhibition in Stockholm that would change the course of modern design. For the first time, Scandinavian modernism was presented to an international audience.</p>
                    <div style="margin: 1.5rem 0; text-align: center;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/Bus_on_line_no_60_heading_for_the_Stockholm_Exhibition_on_Djurg%C3%A5rden%2C_1930._%286081769711%29.jpg/800px-Bus_on_line_no_60_heading_for_the_Stockholm_Exhibition_on_Djurg%C3%A5rden%2C_1930._%286081769711%29.jpg" alt="Historical photograph of a bus heading to the Stockholm Exhibition in 1930" style="max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e8e4dc;">
                        <div style="font-size: 0.75rem; margin-top: 0.5rem; color: #6a6a6a;">Bus heading to the Stockholm Exhibition on Djurgården, 1930</div>
                    </div>
                    <p>The exhibition showcased a radical idea: that good design was not a luxury for the wealthy, but a right for all citizens. Functional, affordable, beautiful objects for everyday life — furniture, kitchenware, textiles — all inspired by the clean lines of Nordic nature and the pragmatic traditions stretching back to the Viking age.</p>
                    <p>The world took notice. Scandinavian design had arrived.</p>
                </div>
                <div class="aurora-accent"></div>
            `,
            fact: 'The Stockholm Exhibition of 1930, organized by the Swedish Society of Industrial Design, marked the international debut of Scandinavian design modernism.',
            choices: [
                { text: 'Discover the golden age of Danish design', next: 'golden_age' },
                { text: 'Jump ahead to the IKEA revolution', next: 'ikea' }
            ]
        },

        // --- SCENE 9: Golden Age of Design ---
        golden_age: {
            era: '1950s-1960s — COPENHAGEN, DENMARK',
            content: `
                <div class="card-cozy" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">The Danish Modern Movement</p>
                    <h3 class="serif" style="font-size: 1.5rem;">Form Follows Function Follows Feeling</h3>
                    <p>The decades after the Stockholm Exhibition produced a constellation of designers who transformed how the world sits, eats, and lives. Their work combined Viking-era craftsmanship with modernist principles — and added something distinctly Scandinavian: warmth.</p>
                </div>
                <div class="feature-card" style="margin-bottom: var(--space-4);">
                    <div class="feature-number">58</div>
                    <div class="feature-content">
                        <h4>The Egg Chair — Arne Jacobsen, 1958</h4>
                        <p>Danish architect Arne Jacobsen designed the iconic Egg Chair for the SAS Royal Hotel in Copenhagen. Its organic, enveloping form became the emblem of mid-century Danish design — sculptural yet intimate, modern yet comforting.</p>
                    </div>
                </div>
                <div style="margin: 1.5rem 0; text-align: center;">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Egg_chair_-_Arne_Jacobsen_%281958%29.jpg/600px-Egg_chair_-_Arne_Jacobsen_%281958%29.jpg" alt="The iconic Egg Chair designed by Arne Jacobsen in 1958" style="max-width: 100%; height: auto; border-radius: 8px; border: 1px solid #e8e4dc;">
                    <div style="font-size: 0.75rem; margin-top: 0.5rem; color: #6a6a6a;">Arne Jacobsen's Egg Chair (1958)</div>
                </div>
                <div class="feature-card" style="margin-bottom: var(--space-5);">
                    <div class="feature-number">49</div>
                    <div class="feature-content">
                        <h4>The Wishbone Chair — Hans Wegner, 1949</h4>
                        <p>Hans Wegner's CH24 "Wishbone Chair" has been in continuous production since 1949 — over 75 years. Each one takes skilled craftspeople using steam-bent wood and 120 meters of paper cord for the seat.</p>
                    </div>
                </div>
                <div class="notice">
                    <div class="notice-icon">&#9733;</div>
                    <div class="notice-content">
                        <p><strong>Design Principle:</strong> Scandinavian designers rejected the choice between beauty and affordability. Their goal: objects that are functional, durable, and accessible — echoing the Viking ethos that every tool must earn its place.</p>
                    </div>
                </div>
            `,
            fact: 'Arne Jacobsen designed the iconic Egg Chair in 1958 for the SAS Royal Hotel in Copenhagen, which became synonymous with mid-century Danish design.',
            choices: [
                { text: 'Continue to the IKEA revolution', next: 'ikea' }
            ]
        },

        // --- SCENE 10: IKEA ---
        ikea: {
            era: '1943-1958 — SMALAND, SWEDEN',
            content: `
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">Democratic Design</p>
                    <h3 class="serif" style="font-size: 1.5rem;">A 17-Year-Old's Kitchen Table</h3>
                    <p>In 1943, in the small village of Agunnaryd in southern Sweden, a <strong style="color: var(--terracotta);">17-year-old</strong> named Ingvar Kamprad sat at his uncle Ernst's kitchen table and founded a company. He named it using his initials and the first letters of his family farm and village: <strong style="color: var(--terracotta);">I</strong>ngvar <strong style="color: var(--terracotta);">K</strong>amprad, <strong style="color: var(--terracotta);">E</strong>lmtaryd, <strong style="color: var(--terracotta);">A</strong>gunnaryd.</p>
                    <p>IKEA began selling pens, wallets, and picture frames. By 1948, Kamprad had added furniture. But the revolution came in <strong style="color: var(--terracotta);">1956</strong>, when a designer named Gillis Lundgren struggled to fit a table into his car and removed the legs.</p>
                    <p>The flatpack was born.</p>
                </div>
                <div class="table-wrapper" style="margin-bottom: var(--space-5);">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>Milestone</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="table-primary">1943</td>
                                <td>Ingvar Kamprad founds IKEA at age 17</td>
                            </tr>
                            <tr>
                                <td class="table-primary">1948</td>
                                <td>Furniture added to the IKEA catalog</td>
                            </tr>
                            <tr>
                                <td class="table-primary">1956</td>
                                <td>Flatpack furniture concept introduced</td>
                            </tr>
                            <tr>
                                <td class="table-primary">1958</td>
                                <td>First IKEA retail store opens in Almhult</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="card-warm" style="border-radius: var(--radius-lg); padding: var(--space-5);">
                    <p style="margin-bottom: 0;"><strong>The idea was radical:</strong> if customers assembled furniture themselves, costs dropped dramatically. Good Scandinavian design — clean, functional, beautiful — could reach millions of homes, not just the wealthy few. The Viking principle of resourceful efficiency, applied to the modern world.</p>
                </div>
            `,
            fact: 'Ingvar Kamprad founded IKEA at age 17 in 1943. In 1956, flatpack furniture was introduced; the first retail store opened in 1958, democratizing Scandinavian design for the masses.',
            choices: [
                { text: 'See how the Nordic welfare state emerged', next: 'welfare_state' },
                { text: 'Jump to the meaning of hygge', next: 'hygge' }
            ]
        },

        // --- SCENE 11: The Welfare State ---
        welfare_state: {
            era: '1960s-1980s — SCANDINAVIA',
            content: `
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">The Nordic Model</p>
                    <h3 class="serif" style="font-size: 1.5rem;">Design for Society</h3>
                    <p>The same philosophy that drove Scandinavian design — that beauty and function should be available to everyone — found its ultimate expression not in furniture, but in governance.</p>
                    <p>In the decades after World War II, Denmark, Norway, and Sweden built what became known as the <strong>Nordic Model</strong>: a system combining capitalist economies with high taxation, universal healthcare, free education, generous parental leave, and strong labor protections.</p>
                    <p>The result was societies with remarkably low income inequality, high social mobility, and consistently high rankings in global happiness indices.</p>
                </div>
                <div class="principle-card" style="margin-bottom: var(--space-5);">
                    <div class="principle-icon forest" style="font-size: 1.5rem;">&#9878;</div>
                    <h3>The Core Principle: Lagom</h3>
                    <p style="font-size: 0.9375rem;">The Swedish word "lagom" — meaning "just the right amount" — captures the philosophy. Not too much, not too little. Enough for everyone. It is the political expression of Viking-era communal survival: no one in the longship eats unless everyone eats.</p>
                </div>
                <div class="notice">
                    <div class="notice-icon">&#128200;</div>
                    <div class="notice-content">
                        <p><strong>By the numbers:</strong> Nordic countries consistently rank in the top 10 of the UN World Happiness Report. The model demonstrates that high taxes, when paired with universal services, can produce societies where citizens report greater life satisfaction.</p>
                    </div>
                </div>
            `,
            fact: 'The Nordic welfare model combines capitalist economies with high taxation, universal healthcare, and social services — producing societies that consistently rank among the world\'s happiest.',
            choices: [
                { text: 'Continue to the meaning of hygge', next: 'hygge' }
            ]
        },

        // --- SCENE 12: Hygge ---
        hygge: {
            era: 'PRESENT DAY — DENMARK',
            content: `
                <div class="hygge-banner" style="margin-bottom: var(--space-5); padding: var(--space-8) var(--space-6);">
                    <p class="overline" style="margin-bottom: var(--space-4); color: var(--walnut);">The Danish Art of Living</p>
                    <h3 style="font-size: 2rem;">Hygge</h3>
                    <p>Pronounced "hoo-gah." A feeling more than a word. The warmth of candlelight on a dark winter evening. The comfort of a wool blanket and a cup of coffee shared with someone you love. The quiet contentment of being exactly where you belong.</p>
                </div>
                <div class="card-cozy" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <h3 class="serif" style="font-size: 1.375rem;">From Survival to Philosophy</h3>
                    <p>Hygge is not new. Its roots stretch back centuries — a natural response to the Scandinavian climate. When winter darkness lasts 17 hours a day, you learn to create warmth from within. Candles, hearths, gatherings of family and friends, simple food shared in good company.</p>
                    <p>But in the late 20th century, hygge was articulated as a conscious cultural philosophy. Meik Wiking, founder of Copenhagen's <strong>Happiness Research Institute</strong>, described it as "integral to Danish national DNA" — not a luxury but a fundamental approach to well-being.</p>
                    <p>Danes burn more candles per capita than any other nation. They have a word for the cozy corner by the window where you curl up with a book: <em>hyggekrog</em>. These are not indulgences. They are deliberate acts of creating comfort in a cold world.</p>
                </div>
                <div class="aurora-accent"></div>
                <p class="lead" style="text-align: center; max-width: 100%;">The Viking who built a fire in a longship shelter against the Arctic wind was practicing hygge a thousand years before the word was written down.</p>
            `,
            fact: 'Hygge — the Danish concept of coziness and well-being — was identified by the Happiness Research Institute as "integral to Danish national DNA," explaining Denmark\'s high happiness rankings.',
            choices: [
                { text: 'Reflect on what this history means for today', next: 'reflection' }
            ]
        },

        // --- SCENE 13: Reflection / Final Choice ---
        reflection: {
            era: 'PRESENT DAY',
            content: `
                <div class="card" style="border-radius: var(--radius-xl); padding: var(--space-6); margin-bottom: var(--space-5);">
                    <p class="overline" style="margin-bottom: var(--space-4);">Full Circle</p>
                    <h3 class="serif" style="font-size: 1.5rem;">The Thread Through Time</h3>
                    <p>From a raid on an English monastery in 793 to a flatpack bookshelf in your living room. From a longship crossing the Atlantic to a candle flickering in a Copenhagen apartment. The thread is the same: <strong>a culture shaped by harsh conditions that learned to build warmth from within.</strong></p>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--space-4); margin-bottom: var(--space-5);">
                    <div class="principle-card">
                        <div class="principle-icon terracotta" style="font-size: 1.5rem;">&#9829;</div>
                        <h4>Hygge</h4>
                        <p style="font-size: 0.875rem;">Create warmth. Find comfort in simplicity. Cherish the people and moments that make you feel at home.</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon forest" style="font-size: 1.5rem;">&#9878;</div>
                        <h4>Lagom</h4>
                        <p style="font-size: 0.875rem;">Just enough. Not too much, not too little. The balance that allows everyone to have what they need.</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon mustard" style="font-size: 1.5rem;">&#9752;</div>
                        <h4>Nature</h4>
                        <p style="font-size: 0.875rem;">Draw from the natural world. Wood, light, stone, water — let materials speak honestly.</p>
                    </div>
                    <div class="principle-card">
                        <div class="principle-icon fjord" style="font-size: 1.5rem;">&#9670;</div>
                        <h4>Function</h4>
                        <p style="font-size: 0.875rem;">Every element must earn its place. Beauty emerges from purpose, not decoration.</p>
                    </div>
                </div>
                <div class="divider-decorative"><span>&#10022;</span></div>
                <p class="lead" style="text-align: center; max-width: 100%;">A thousand years of history, distilled into four principles. The question is: what do you carry forward?</p>
            `,
            fact: 'Nordic design rests on four principles: Hygge (warmth), Lagom (balance), Natural Connection, and Functional Clarity — all rooted in a thousand years of Scandinavian cultural evolution.',
            choices: [
                { text: 'The craft matters most — carry forward the maker\'s spirit', next: 'ending_craft' },
                { text: 'The community matters most — carry forward the shared warmth', next: 'ending_community' },
                { text: 'The simplicity matters most — carry forward the quiet contentment', next: 'ending_simplicity' }
            ]
        },

        // --- ENDING A: The Maker's Spirit ---
        ending_craft: {
            era: 'EPILOGUE',
            isEnding: true,
            content: `
                <div class="scene-ending">
                    <div class="ending-label">Saga's End</div>
                    <div class="ending-title">The Maker's Spirit</div>
                    <div class="ending-text">
                        <p>The Viking who shaped a longship's hull knew that beauty was not separate from function — it was function's natural expression. A hull that cut the water cleanly was, by its nature, beautiful.</p>
                        <p>Arne Jacobsen understood this when he sculpted the Egg Chair. Ingvar Kamprad understood it when he made a bookshelf anyone could build. The thread runs unbroken from the boatwright's workshop to the design studio to your own hands.</p>
                        <p>You choose to carry forward the maker's spirit: the belief that thoughtful craft — applied to a chair, a home, a life — creates something greater than the sum of its parts.</p>
                        <p>In every object you make or choose with care, the longship sails again.</p>
                    </div>
                    <div class="aurora-accent" style="max-width: 200px; margin: var(--space-6) auto;"></div>
                    <div class="the-end">The End</div>
                </div>
            `,
            fact: 'From longship hulls to the Egg Chair to IKEA flatpacks, Scandinavian makers have maintained that beauty is the natural expression of function across 1,200 years of craft.',
            choices: [
                { text: 'Begin the Saga Again', next: '_restart' }
            ]
        },

        // --- ENDING B: Shared Warmth ---
        ending_community: {
            era: 'EPILOGUE',
            isEnding: true,
            content: `
                <div class="scene-ending">
                    <div class="ending-label">Saga's End</div>
                    <div class="ending-title">The Shared Warmth</div>
                    <div class="ending-text">
                        <p>In a Viking longship, no one ate unless everyone ate. In a Nordic welfare state, no one goes without healthcare or education. The scale changed; the principle did not.</p>
                        <p>Hygge is not about candles and blankets — not really. It is about creating spaces where people feel safe enough to be themselves. Where the warmth comes not from the fireplace but from the knowledge that you are among people who will look after you, and you after them.</p>
                        <p>You choose to carry forward the shared warmth: the radical Scandinavian idea that comfort is not a private luxury but a collective right. That a society's wealth is measured not by what the richest possess, but by what the poorest lack.</p>
                        <p>In every moment of genuine connection, the hearthfire burns on.</p>
                    </div>
                    <div class="aurora-accent" style="max-width: 200px; margin: var(--space-6) auto;"></div>
                    <div class="the-end">The End</div>
                </div>
            `,
            fact: 'From the Viking longship\'s communal survival to the Nordic welfare state\'s universal benefits, Scandinavian culture maintains that collective well-being defines a society\'s true wealth.',
            choices: [
                { text: 'Begin the Saga Again', next: '_restart' }
            ]
        },

        // --- ENDING C: Quiet Contentment ---
        ending_simplicity: {
            era: 'EPILOGUE',
            isEnding: true,
            content: `
                <div class="scene-ending">
                    <div class="ending-label">Saga's End</div>
                    <div class="ending-title">The Quiet Contentment</div>
                    <div class="ending-text">
                        <p>The Vikings crossed oceans in search of new lands. What they found, after centuries of roaming, was that the most valuable territory is the one inside your own walls.</p>
                        <p>Lagom — "just enough" — is the hardest principle to practice in a world that constantly demands more. But the Scandinavians learned it through a thousand winters: the fire does not need to be enormous. It only needs to be warm.</p>
                        <p>You choose to carry forward the quiet contentment: the discipline of simplicity, the courage to stop acquiring and start appreciating. A life measured not in possessions but in moments of genuine peace.</p>
                        <p>In every deliberate pause, every chosen simplicity, the long winter teaches its deepest lesson: sometimes, less is everything.</p>
                    </div>
                    <div class="aurora-accent" style="max-width: 200px; margin: var(--space-6) auto;"></div>
                    <div class="the-end">The End</div>
                </div>
            `,
            fact: 'The Swedish concept of "lagom" (just enough) and Danish hygge together express Scandinavia\'s deepest cultural lesson: contentment comes not from accumulation but from appreciation.',
            choices: [
                { text: 'Begin the Saga Again', next: '_restart' }
            ]
        }
    };

    // =================================================================
    //  STORY ENGINE
    // =================================================================

    const engine = {
        currentScene: null,
        history: [],
        facts: [],
        factsPanelOpen: false,

        init() {
            document.getElementById('startBtn').addEventListener('click', () => this.start());
            document.getElementById('restartBtn').addEventListener('click', () => this.restart());
            document.getElementById('factToggle').addEventListener('click', () => this.toggleFacts());

            // Keyboard support
            document.addEventListener('keydown', (e) => {
                if (e.key >= '1' && e.key <= '9') {
                    const idx = parseInt(e.key) - 1;
                    const btns = document.querySelectorAll('.choice-btn');
                    if (btns[idx]) btns[idx].click();
                }
            });
        },

        start() {
            document.getElementById('titleScreen').style.display = 'none';
            document.getElementById('sceneWrapper').classList.add('active');
            document.getElementById('factTracker').style.display = 'block';
            this.goTo('lindisfarne');
        },

        restart() {
            this.currentScene = null;
            this.history = [];
            this.facts = [];
            this.factsPanelOpen = false;
            document.getElementById('factPanel').classList.remove('open');
            document.getElementById('sceneWrapper').classList.remove('active');
            document.getElementById('titleScreen').style.display = 'flex';
            document.getElementById('factTracker').style.display = 'none';
            this.updateFactUI();
            window.scrollTo(0, 0);
        },

        goTo(sceneId) {
            if (sceneId === '_restart') {
                this.restart();
                return;
            }

            const scene = STORY[sceneId];
            if (!scene) return;

            // Transition effect
            if (this.currentScene) {
                const overlay = document.getElementById('transition');
                overlay.classList.add('active');
                setTimeout(() => {
                    this.renderScene(sceneId, scene);
                    window.scrollTo({ top: 0, behavior: 'auto' });
                }, 400);
                setTimeout(() => {
                    overlay.classList.remove('active');
                }, 1000);
            } else {
                this.renderScene(sceneId, scene);
            }

            if (this.currentScene) {
                this.history.push(this.currentScene);
            }
            this.currentScene = sceneId;
        },

        renderScene(sceneId, scene) {
            const container = document.getElementById('sceneContent');
            const gameControls = document.querySelector('.game-controls');
            if (gameControls) gameControls.style.display = sceneId.startsWith('ending') ? 'none' : '';

            // Update era label
            if (scene.era) {
                document.getElementById('eraLabel').textContent = scene.era;
            }

            let html = '<div class="scene-content">';

            // Scene content (raw HTML using Nordic CSS classes)
            html += scene.content;

            // Fact notification
            if (scene.fact) {
                this.addFact(scene.fact, scene.era);
            }

            // Choices
            if (scene.choices && scene.choices.length > 0) {
                html += '<div class="choices">';
                scene.choices.forEach((choice, i) => {
                    html += `<button class="choice-btn" onclick="engine.goTo('${choice.next}')">`;
                    html += `<span class="choice-key">${i + 1}</span>`;
                    html += choice.text;
                    html += '</button>';
                });
                html += '</div>';
            }

            html += '</div>';
            container.innerHTML = html;

            this.updateFactUI();
        },

        addFact(fact, era) {
            if (!this.facts.find(f => f.text === fact)) {
                this.facts.push({ text: fact, era: era || '' });
            }
        },

        updateFactUI() {
            const count = this.facts.length;
            document.getElementById('factCount').textContent = count;

            const list = document.getElementById('factList');
            if (count === 0) {
                list.innerHTML = '<p class="no-facts">No facts discovered yet...</p>';
            } else {
                list.innerHTML = this.facts.map(f =>
                    `<div class="fact-item"><span class="fact-era">${f.era}</span><br>${f.text}</div>`
                ).join('');
            }
        },

        toggleFacts() {
            this.factsPanelOpen = !this.factsPanelOpen;
            document.getElementById('factPanel').classList.toggle('open', this.factsPanelOpen);
        }
    };

    // Boot
    engine.init();
    </script>
</body>
</html>
