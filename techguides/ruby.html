<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruby // Conceptual Reference Guide</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;500;600;700;900&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ============================================
           JAPANESE WOODBLOCK (UKIYO-E) DESIGN SYSTEM
           ============================================
           Inspired by the art of ukiyo-e woodblock
           prints. Washi paper textures, sumi ink code
           blocks, seigaiha wave patterns, hanko stamps.
           Honoring Ruby's Japanese origins under Matz.
           ============================================ */

        :root {
            /* RUBY CRIMSON & RED */
            --ruby-crimson: #9B111E;
            --ruby-red: #DC143C;
            --ruby-red-glow: rgba(220, 20, 60, 0.10);
            --ruby-red-faint: rgba(220, 20, 60, 0.06);

            /* WASHI PAPER */
            --washi: #F5F0E8;
            --washi-warm: #EDE6D6;
            --washi-pale: #FAF7F0;

            /* SUMI INK */
            --sumi-black: #1A1A1A;
            --sumi-dark: #2C261E;
            --sumi-medium: #4A4238;
            --sumi-light: #6E6458;
            --sumi-faint: #9A9184;
            --sumi-hairline: #C8C0B4;

            /* INDIGO */
            --indigo: #264653;
            --indigo-light: #2D5A6B;
            --indigo-dark: #1B3540;
            --indigo-faint: rgba(38, 70, 83, 0.08);

            /* GOLD */
            --gold: #C9A84C;
            --gold-bright: #E8CF6A;
            --gold-dim: #8A7434;
            --gold-faint: rgba(201, 168, 76, 0.10);

            /* PINE GREEN */
            --pine: #3A7D44;
            --pine-faint: rgba(58, 125, 68, 0.08);

            /* VERMILLION */
            --vermillion: #C13B2A;
            --vermillion-faint: rgba(193, 59, 42, 0.08);

            /* ACCENT */
            --sky-blue: #5BC0EB;
            --turquoise: #40E0D0;
            --salmon: #E2756A;

            /* TYPOGRAPHY */
            --font-heading: 'Noto Serif JP', 'Georgia', serif;
            --font-body: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'JetBrains Mono', 'Fira Code', 'Consolas', monospace;

            /* SPACING (4px base) */
            --space-1: 4px;
            --space-2: 8px;
            --space-3: 12px;
            --space-4: 16px;
            --space-5: 20px;
            --space-6: 24px;
            --space-7: 32px;
            --space-8: 40px;
            --space-9: 48px;
            --space-10: 64px;

            /* LINE WEIGHTS */
            --weight-hairline: 0.5px;
            --weight-thin: 1px;
            --weight-medium: 2px;
            --weight-bold: 3px;
            --weight-profile: 4px;

            /* TRANSITIONS */
            --transition-base: 200ms ease;
        }

        /* ============================================
           RESET & BASE
           ============================================ */

        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            font-size: 16px;
            scroll-behavior: smooth;
            scroll-padding-top: 50px;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-body);
            font-size: 0.875rem;
            font-weight: 400;
            line-height: 1.7;
            color: var(--sumi-dark);
            background: var(--washi);
            min-height: 100vh;
        }

        /* ============================================
           SEIGAIHA WAVE PATTERN
           ============================================ */

        .pattern-wave {
            background-color: #264653;
            background-image:
                radial-gradient(circle at 100% 150%, #264653 24%, #2d5a6b 24%, #2d5a6b 28%, transparent 28%, transparent),
                radial-gradient(circle at 0% 150%, #264653 24%, #2d5a6b 24%, #2d5a6b 28%, transparent 28%, transparent);
            background-size: 44px 22px;
        }

        .wave-divider {
            height: 22px;
            background-color: var(--indigo);
            background-image:
                radial-gradient(circle at 100% 150%, var(--indigo) 24%, var(--indigo-light) 24%, var(--indigo-light) 28%, transparent 28%, transparent),
                radial-gradient(circle at 0% 150%, var(--indigo) 24%, var(--indigo-light) 24%, var(--indigo-light) 28%, transparent 28%, transparent);
            background-size: 44px 22px;
        }

        /* ============================================
           PAGE STRUCTURE
           ============================================ */

        .page-wrapper {
            max-width: 1100px;
            margin: 0 auto;
            background: var(--washi);
            border-left: var(--weight-profile) solid var(--indigo);
            border-right: var(--weight-profile) solid var(--indigo);
            position: relative;
        }

        .scroll-frame {
            border-left: var(--weight-thin) solid var(--sumi-hairline);
            border-right: var(--weight-thin) solid var(--sumi-hairline);
            margin: 0 var(--space-2);
        }

        /* ============================================
           BACK LINK
           ============================================ */

        .back-link {
            display: inline-block;
            font-family: var(--font-mono);
            font-size: 0.6875rem;
            font-weight: 500;
            letter-spacing: 0.04em;
            color: var(--sumi-light);
            text-decoration: none;
            padding: var(--space-3) var(--space-6);
            border: var(--weight-thin) solid var(--sumi-hairline);
            border-top: none;
            transition: all var(--transition-base);
        }

        .back-link:hover {
            color: var(--ruby-red);
            border-color: var(--ruby-red);
            background: var(--ruby-red-faint);
        }

        /* ============================================
           HEADER
           ============================================ */

        .site-header {
            position: relative;
            padding: var(--space-10) var(--space-7) var(--space-8);
            background: linear-gradient(135deg, var(--indigo) 0%, var(--indigo-dark) 100%);
            overflow: hidden;
        }

        /* Seigaiha wave overlay on header */
        .site-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image:
                radial-gradient(circle at 100% 150%, transparent 24%, rgba(255,255,255,0.04) 24%, rgba(255,255,255,0.04) 28%, transparent 28%, transparent),
                radial-gradient(circle at 0% 150%, transparent 24%, rgba(255,255,255,0.04) 24%, rgba(255,255,255,0.04) 28%, transparent 28%, transparent);
            background-size: 44px 22px;
            pointer-events: none;
        }

        /* Gradient fade at bottom of header */
        .site-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--ruby-red), var(--gold), var(--ruby-red));
        }

        .header-content {
            position: relative;
            z-index: 1;
            display: flex;
            align-items: flex-start;
            gap: var(--space-7);
        }

        .header-text {
            flex: 1;
        }

        .header-japanese {
            font-family: var(--font-heading);
            font-size: 0.75rem;
            font-weight: 400;
            color: rgba(255, 255, 255, 0.45);
            letter-spacing: 0.3em;
            margin-bottom: var(--space-2);
        }

        .site-header h1 {
            font-family: var(--font-heading);
            font-size: clamp(2rem, 5vw, 3.25rem);
            font-weight: 700;
            color: #FFFFFF;
            letter-spacing: 0.04em;
            line-height: 1.1;
            margin-bottom: var(--space-3);
        }

        .site-header .tagline {
            font-family: var(--font-body);
            font-size: 0.9375rem;
            font-weight: 400;
            color: var(--gold);
            margin-bottom: var(--space-6);
            max-width: 50ch;
            line-height: 1.5;
        }

        .header-meta {
            display: inline-flex;
            align-items: center;
            gap: var(--space-4);
            font-family: var(--font-mono);
            font-size: 0.625rem;
            color: rgba(255, 255, 255, 0.55);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            border: var(--weight-thin) solid rgba(255, 255, 255, 0.2);
            padding: var(--space-2) var(--space-4);
        }

        .header-meta span {
            padding-right: var(--space-4);
            border-right: var(--weight-hairline) solid rgba(255, 255, 255, 0.2);
        }

        .header-meta span:last-child {
            padding-right: 0;
            border-right: none;
        }

        /* HANKO STAMP */
        .hanko {
            width: 48px;
            height: 48px;
            background: var(--ruby-crimson);
            border: 2px solid #7A0D16;
            display: flex;
            align-items: center;
            justify-content: center;
            transform: rotate(-5deg);
            flex-shrink: 0;
            position: relative;
            margin-top: var(--space-2);
        }

        .hanko::before {
            content: '';
            position: absolute;
            inset: 3px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .hanko-char {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            font-weight: 900;
            color: #FFFFFF;
            line-height: 1;
        }

        @media (max-width: 768px) {
            .site-header {
                padding: var(--space-8) var(--space-4) var(--space-6);
            }
            .header-content {
                flex-direction: column;
                gap: var(--space-4);
            }
            .hanko {
                position: absolute;
                top: var(--space-4);
                right: var(--space-4);
            }
        }

        /* ============================================
           STICKY JUMP NAVIGATION
           ============================================ */

        .jump-nav {
            display: flex;
            justify-content: center;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            background: var(--sumi-dark);
            position: sticky;
            top: 0;
            z-index: 100;
            scrollbar-width: none;
        }

        .jump-nav::-webkit-scrollbar {
            display: none;
        }

        .jump-nav a {
            flex-shrink: 0;
            white-space: nowrap;
            padding: var(--space-3) var(--space-4);
            font-family: var(--font-mono);
            font-size: 0.5625rem;
            font-weight: 400;
            letter-spacing: 0.06em;
            color: var(--sumi-hairline);
            text-decoration: none;
            text-align: center;
            border-right: var(--weight-hairline) solid var(--sumi-medium);
            transition: all 0.15s ease;
            position: relative;
        }

        .jump-nav a:last-child {
            border-right: none;
        }

        .jump-nav a:hover {
            color: var(--ruby-red);
            background: rgba(220, 20, 60, 0.08);
        }

        .jump-nav a:hover::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gold);
        }

        @media (max-width: 768px) {
            .jump-nav {
                justify-content: flex-start;
            }

            .jump-nav a {
                padding: var(--space-2);
                font-size: 0.5rem;
            }
        }

        /* ============================================
           SECTIONS
           ============================================ */

        .section {
            padding: var(--space-9) var(--space-7);
            border-bottom: var(--weight-thin) solid var(--sumi-hairline);
            position: relative;
            background: var(--washi);
        }

        .section:nth-child(even) {
            background: var(--washi-warm);
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--space-7);
            padding-bottom: var(--space-5);
        }

        .section-number {
            font-family: var(--font-mono);
            font-size: 0.6875rem;
            font-weight: 500;
            color: var(--gold);
            text-transform: uppercase;
            letter-spacing: 0.2em;
            display: block;
            margin-bottom: var(--space-2);
        }

        .section-title {
            font-family: var(--font-heading);
            font-size: 1.875rem;
            font-weight: 700;
            color: var(--indigo);
            letter-spacing: 0.02em;
            line-height: 1.2;
            margin-bottom: var(--space-3);
        }

        .section-description {
            font-size: 0.875rem;
            font-style: italic;
            color: var(--sumi-light);
            max-width: 680px;
            margin: 0 auto;
            line-height: 1.8;
        }

        /* Section divider — gradient line */
        .section-divider {
            height: 2px;
            background: linear-gradient(90deg, var(--ruby-red), var(--gold), var(--ruby-red));
            margin: var(--space-7) 0;
            border: none;
        }

        .section-content {
            max-width: 100%;
        }

        @media (max-width: 768px) {
            .section {
                padding: var(--space-7) var(--space-4);
            }
        }

        /* ============================================
           TYPOGRAPHY
           ============================================ */

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-heading);
            font-weight: 600;
            line-height: 1.3;
            color: var(--indigo);
        }

        h1 { font-size: 2.25rem; }
        h2 { font-size: 1.5rem; margin-bottom: var(--space-4); }
        h3 { font-size: 1.25rem; margin-bottom: var(--space-3); }
        h4 { font-size: 1.0625rem; margin-bottom: var(--space-3); font-weight: 500; }
        h5 { font-size: 0.9375rem; margin-bottom: var(--space-2); font-weight: 500; }
        h6 { font-size: 0.8125rem; margin-bottom: var(--space-2); font-weight: 500; color: var(--sumi-medium); }

        p {
            margin-bottom: var(--space-4);
        }

        /* ============================================
           PHILOSOPHY BOXES (Matz quotes)
           ============================================ */

        .philosophy-box {
            font-family: var(--font-heading);
            font-size: 1.125rem;
            font-style: italic;
            color: var(--indigo);
            padding: 28px 32px;
            border-left: 4px solid var(--gold);
            margin: 28px 0;
            background: var(--washi-warm);
            position: relative;
            line-height: 1.7;
        }

        .philosophy-box::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 3px;
            height: 100%;
            background: linear-gradient(180deg, var(--gold), transparent);
        }

        .philosophy-box cite {
            display: block;
            font-family: var(--font-body);
            font-size: 0.8125rem;
            font-style: normal;
            font-weight: 500;
            color: var(--sumi-light);
            margin-top: var(--space-4);
            letter-spacing: 0.02em;
        }

        .philosophy-box cite::before {
            content: '\2014\00a0';
        }

        /* ============================================
           CODE BLOCKS
           ============================================ */

        .code-block {
            background: var(--sumi-black);
            color: #E8E0D0;
            font-family: var(--font-mono);
            font-size: 0.8125rem;
            line-height: 1.7;
            padding: 20px 24px;
            border-left: 4px solid var(--ruby-red);
            margin: 16px 0 24px;
            overflow-x: auto;
            border-radius: 2px;
            white-space: pre;
        }

        .code-label {
            font-family: var(--font-mono);
            font-size: 0.6875rem;
            font-weight: 500;
            color: var(--ruby-red);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            margin-bottom: var(--space-1);
            margin-top: var(--space-4);
        }

        /* Syntax highlighting */
        .kw { color: #DC143C; }         /* keyword — ruby red */
        .str { color: #C9A84C; }        /* string — gold */
        .cm { color: #6E6458; }         /* comment */
        .num { color: #5BC0EB; }        /* number — sky blue */
        .fn { color: #E2756A; }         /* function/method — salmon */
        .sym { color: #40E0D0; }        /* symbol — turquoise */
        .const { color: #E8CF6A; }      /* constant — bright gold */
        .op { color: #8FAFC4; }         /* operator */
        .ivar { color: #E2756A; }       /* instance variable — salmon */
        .builtin { color: #5BC0EB; }    /* built-in — sky blue */

        /* ============================================
           INLINE CODE
           ============================================ */

        .code-inline {
            font-family: var(--font-mono);
            font-size: 0.8125rem;
            color: var(--ruby-crimson);
            background: var(--washi-warm);
            padding: 2px 6px;
            border-radius: 2px;
        }

        /* ============================================
           DATA TABLES
           ============================================ */

        .table-wrapper {
            overflow-x: auto;
            margin: var(--space-4) 0 var(--space-6);
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8125rem;
            border: var(--weight-thin) solid var(--sumi-hairline);
        }

        .data-table thead {
            background: var(--washi-warm);
        }

        .data-table thead th {
            font-family: var(--font-heading);
            font-weight: 600;
            font-size: 0.75rem;
            text-align: left;
            padding: var(--space-3) var(--space-4);
            color: var(--indigo);
            border-bottom: var(--weight-medium) solid var(--sumi-hairline);
            letter-spacing: 0.02em;
        }

        .data-table tbody td {
            padding: var(--space-3) var(--space-4);
            border-bottom: var(--weight-thin) solid var(--sumi-hairline);
            vertical-align: top;
            color: var(--sumi-dark);
        }

        .data-table tbody tr:last-child td {
            border-bottom: var(--weight-medium) solid var(--sumi-hairline);
        }

        .data-table tbody tr:hover {
            background: var(--gold-faint);
        }

        .data-table tbody td:first-child {
            font-weight: 500;
            color: var(--indigo);
        }

        .data-table code,
        .data-table .code-inline {
            font-size: 0.75rem;
        }

        /* ============================================
           COMPARE GRIDS (do vs avoid)
           ============================================ */

        .compare-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
            margin: var(--space-5) 0;
        }

        .compare-do,
        .compare-avoid {
            padding: var(--space-5);
            background: var(--washi-pale);
        }

        .compare-do {
            border-top: var(--weight-bold) solid var(--pine);
        }

        .compare-avoid {
            border-top: var(--weight-bold) solid var(--vermillion);
        }

        .compare-do h4,
        .compare-avoid h4 {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: var(--space-3);
        }

        .compare-do h4 {
            color: var(--pine);
        }

        .compare-avoid h4 {
            color: var(--vermillion);
        }

        .compare-do p,
        .compare-avoid p {
            font-size: 0.8125rem;
            color: var(--sumi-medium);
            margin-bottom: var(--space-3);
        }

        .compare-do .code-block,
        .compare-avoid .code-block {
            margin: var(--space-2) 0;
            font-size: 0.75rem;
            padding: var(--space-4);
        }

        @media (max-width: 768px) {
            .compare-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           CONCEPT GRIDS
           ============================================ */

        .concept-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-4);
            margin: var(--space-5) 0;
        }

        .concept-grid-2 {
            grid-template-columns: repeat(2, 1fr);
        }

        .concept-card {
            padding: var(--space-5);
            min-width: 0;
            background: var(--washi-pale);
            border: var(--weight-thin) solid var(--sumi-hairline);
            border-top: var(--weight-bold) solid var(--indigo);
        }

        .concept-card h4 {
            font-family: var(--font-heading);
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--indigo);
            margin-bottom: var(--space-2);
        }

        .concept-card p {
            font-size: 0.8125rem;
            color: var(--sumi-medium);
            line-height: 1.7;
            margin-bottom: var(--space-2);
        }

        .concept-card .code-block {
            font-size: 0.75rem;
            padding: var(--space-3) var(--space-4);
            margin: var(--space-2) 0 0;
        }

        @media (max-width: 768px) {
            .concept-grid {
                grid-template-columns: 1fr;
            }
            .concept-grid-2 {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           ALERT BOXES
           ============================================ */

        .alert-tip {
            padding: var(--space-4) var(--space-5);
            margin: var(--space-5) 0;
            background: var(--pine-faint);
            border-left: var(--weight-bold) solid var(--pine);
            font-size: 0.8125rem;
            color: var(--sumi-dark);
            line-height: 1.7;
        }

        .alert-tip strong {
            color: var(--pine);
            font-weight: 600;
        }

        .alert-gotcha {
            padding: var(--space-4) var(--space-5);
            margin: var(--space-5) 0;
            background: var(--vermillion-faint);
            border-left: var(--weight-bold) solid var(--vermillion);
            font-size: 0.8125rem;
            color: var(--sumi-dark);
            line-height: 1.7;
        }

        .alert-gotcha strong {
            color: var(--vermillion);
            font-weight: 600;
        }

        .alert-rails {
            padding: var(--space-4) var(--space-5);
            margin: var(--space-5) 0;
            background: var(--indigo-faint);
            border-left: var(--weight-bold) solid var(--indigo);
            font-size: 0.8125rem;
            color: var(--sumi-dark);
            line-height: 1.7;
        }

        .alert-rails strong {
            color: var(--indigo);
            font-weight: 600;
        }

        /* ============================================
           STAT ROW
           ============================================ */

        .stat-row {
            display: flex;
            gap: var(--space-4);
            margin: var(--space-6) 0;
            flex-wrap: wrap;
        }

        .stat-box {
            flex: 1 1 0;
            min-width: 140px;
            padding: var(--space-5);
            text-align: center;
            background: var(--washi-pale);
            border: var(--weight-thin) solid var(--sumi-hairline);
            border-top: var(--weight-bold) solid var(--gold);
        }

        .stat-value {
            font-family: var(--font-heading);
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--indigo);
            line-height: 1.2;
            margin-bottom: var(--space-1);
        }

        .stat-label {
            font-family: var(--font-mono);
            font-size: 0.625rem;
            color: var(--sumi-light);
            text-transform: uppercase;
            letter-spacing: 0.08em;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .stat-row {
                flex-direction: column;
            }
        }

        /* ============================================
           DECISION FLOW
           ============================================ */

        .decision-flow {
            margin: var(--space-5) 0;
            padding-left: var(--space-6);
            border-left: var(--weight-medium) solid var(--sumi-hairline);
        }

        .flow-step {
            position: relative;
            padding: var(--space-4) var(--space-5);
            margin-bottom: var(--space-4);
            background: var(--washi-pale);
            border: var(--weight-thin) solid var(--sumi-hairline);
        }

        .flow-step::before {
            content: '';
            position: absolute;
            left: -27px;
            top: 50%;
            transform: translateY(-50%);
            width: 12px;
            height: 12px;
            background: var(--indigo);
            border-radius: 50%;
            border: 2px solid var(--washi);
        }

        .flow-step h5 {
            font-family: var(--font-heading);
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--indigo);
            margin-bottom: var(--space-1);
        }

        .flow-step p {
            font-size: 0.8125rem;
            color: var(--sumi-medium);
            margin-bottom: 0;
        }

        .flow-step .code-inline {
            font-size: 0.75rem;
        }

        .flow-arrow {
            text-align: center;
            color: var(--sumi-faint);
            font-size: 1.25rem;
            margin: -8px 0;
            position: relative;
            left: -12px;
        }

        /* ============================================
           BADGES
           ============================================ */

        .badge {
            display: inline-block;
            font-family: var(--font-mono);
            font-size: 0.5625rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            padding: 2px 8px;
            border-radius: 2px;
            vertical-align: middle;
        }

        .badge-ruby {
            background: var(--ruby-red);
            color: #FFFFFF;
        }

        .badge-rails {
            background: var(--vermillion);
            color: #FFFFFF;
        }

        .badge-gem {
            background: var(--gold);
            color: var(--sumi-dark);
        }

        /* ============================================
           BACK TO TOP
           ============================================ */

        .back-to-top {
            display: inline-block;
            font-family: var(--font-mono);
            font-size: 0.625rem;
            color: var(--sumi-light);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            padding: var(--space-2) var(--space-3);
            border: var(--weight-hairline) solid var(--sumi-hairline);
            margin-top: var(--space-6);
            transition: all var(--transition-base);
        }

        .back-to-top:hover {
            color: var(--ruby-red);
            border-color: var(--ruby-red);
            background: var(--ruby-red-faint);
        }

        /* ============================================
           UTILITIES
           ============================================ */

        .mb-sm { margin-bottom: var(--space-3); }
        .mb-md { margin-bottom: var(--space-5); }
        .mb-lg { margin-bottom: var(--space-7); }
        .mt-md { margin-top: var(--space-5); }
        .mt-lg { margin-top: var(--space-7); }

        .grid { display: grid; gap: var(--space-4); }
        .grid-2 { grid-template-columns: repeat(2, 1fr); }
        .grid-3 { grid-template-columns: repeat(3, 1fr); }

        @media (max-width: 768px) {
            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }
        }

        /* ============================================
           TITLE BLOCK (COLOPHON)
           ============================================ */

        .title-block {
            display: grid;
            grid-template-columns: 1fr auto;
            border-top: var(--weight-medium) solid var(--sumi-black);
            font-family: var(--font-mono);
            font-size: 0.6875rem;
        }
        .title-block-main {
            padding: var(--space-4) var(--space-6);
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: var(--space-1);
            border-right: var(--weight-thin) solid var(--sumi-medium);
        }
        .title-block-info {
            padding: var(--space-3) var(--space-4);
            min-width: 200px;
        }
        .title-block-row {
            display: flex;
            justify-content: space-between;
            padding: var(--space-1) 0;
            border-bottom: var(--weight-hairline) solid var(--sumi-hairline);
        }
        .title-block-row:last-child { border-bottom: none; }
        .title-block-label {
            font-size: 0.5625rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--sumi-faint);
        }
        .title-block-value { font-weight: 500; color: var(--sumi-dark); }

        /* ============================================
           FOOTER
           ============================================ */

        .site-footer {
            padding: var(--space-7);
            background: var(--washi-warm);
            border-top: var(--weight-medium) solid var(--sumi-black);
            position: relative;
        }
        .site-footer::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0;
            height: 16px;
            background-image: repeating-linear-gradient(
                90deg,
                var(--indigo) 0px, var(--indigo) 2px,
                transparent 2px, transparent 8px
            );
            opacity: 0.15;
        }
        .footer-content {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: var(--space-7);
            align-items: end;
            margin-top: var(--space-4);
        }
        .footer-logo {
            font-family: var(--font-heading);
            font-size: 1rem;
            font-weight: 500;
            color: var(--sumi-dark);
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: var(--space-2);
        }
        .site-footer p {
            font-family: var(--font-mono);
            font-size: 0.5625rem;
            color: var(--sumi-faint);
            margin-bottom: var(--space-1);
        }

        /* ============================================
           RESPONSIVE
           ============================================ */

        @media (max-width: 768px) {
            .page-wrapper {
                border-left: var(--weight-medium) solid var(--indigo);
                border-right: var(--weight-medium) solid var(--indigo);
            }
            .scroll-frame {
                margin: 0;
                border: none;
            }
            .section {
                padding: var(--space-6) var(--space-4);
            }
            .section-title {
                font-size: 1.5rem;
            }
            .philosophy-box {
                padding: var(--space-5);
                font-size: 1rem;
            }
            .data-table {
                font-size: 0.75rem;
            }
            .data-table thead th,
            .data-table tbody td {
                padding: var(--space-2) var(--space-3);
            }
            .title-block { grid-template-columns: 1fr; }
            .title-block-main {
                grid-template-columns: 1fr;
                border-right: none;
                border-bottom: var(--weight-thin) solid var(--sumi-medium);
            }
            .footer-content { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="page-wrapper" id="top">
        <div class="scroll-frame">

            <!-- Back link -->
            <a href="index.html" class="back-link">&larr; Tech Guides Index</a>

            <!-- HEADER -->
            <header class="site-header">
                <div class="header-content">
                    <div class="header-text">
                        <p class="header-japanese">&#12523;&#12499;&#12540;&#12503;&#12525;&#12464;&#12521;&#12511;&#12531;&#12464;&#35328;&#35486;</p>
                        <h1>Ruby</h1>
                        <p class="tagline">A programmer's best friend. Conceptual reference guide to Ruby's elegance, idioms, and ecosystem.</p>
                        <div class="header-meta">
                            <span>Guide #22</span>
                            <span>12 Sections</span>
                            <span>Created by Matz, 1995</span>
                            <span>Ruby 3.3+</span>
                        </div>
                    </div>
                    <div class="hanko">
                        <span class="hanko-char">&#32005;</span>
                    </div>
                </div>
            </header>

            <!-- WAVE DIVIDER -->
            <div class="wave-divider"></div>

            <!-- STICKY JUMP NAVIGATION -->
            <nav class="jump-nav">
                <a href="#quickref">R-01 Quick Ref</a>
                <a href="#philosophy">R-02 Philosophy</a>
                <a href="#syntax">R-03 Syntax</a>
                <a href="#controlflow">R-04 Flow</a>
                <a href="#methods">R-05 Methods</a>
                <a href="#oop">R-06 OOP</a>
                <a href="#metaprogramming">R-07 Meta</a>
                <a href="#errors">R-08 Errors</a>
                <a href="#gems">R-09 Gems</a>
                <a href="#testing">R-10 Testing</a>
                <a href="#performance">R-11 Perf</a>
                <a href="#rails">R-12 Rails</a>
            </nav>

            <!-- ============================================
                 R-01: QUICK REFERENCE DECISION MATRIX
                 ============================================ -->
            <section class="section" id="quickref">
                <div class="section-header">
                    <span class="section-number">R-01</span>
                    <h2 class="section-title">Quick Reference Decision Matrix</h2>
                    <p class="section-description">Ruby is a language designed for programmer happiness. This matrix gives you the pattern first, then the 12 sections that follow explain why. If you're coming from Python, the rosetta stone at the bottom bridges the gap.</p>
                </div>

                <div class="section-content">

                    <!-- "I want to..." Decision Matrix -->
                    <h3 class="mb-sm">"I want to..." Decision Matrix</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>I want to...</th>
                                    <th>Use this pattern</th>
                                    <th>See Section</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Store key-value data</td>
                                    <td>Hash / Symbol keys</td>
                                    <td><a href="#syntax">R-03</a></td>
                                </tr>
                                <tr>
                                    <td>Transform a collection</td>
                                    <td><span class="code-inline">.map</span>, <span class="code-inline">.select</span>, <span class="code-inline">.reject</span></td>
                                    <td><a href="#controlflow">R-04</a></td>
                                </tr>
                                <tr>
                                    <td>Define reusable behavior</td>
                                    <td>Module + <span class="code-inline">include</span></td>
                                    <td><a href="#oop">R-06</a></td>
                                </tr>
                                <tr>
                                    <td>Share code via mixin</td>
                                    <td>Module (<span class="code-inline">include</span>/<span class="code-inline">extend</span>)</td>
                                    <td><a href="#oop">R-06</a></td>
                                </tr>
                                <tr>
                                    <td>Handle errors gracefully</td>
                                    <td><span class="code-inline">begin</span>/<span class="code-inline">rescue</span>/<span class="code-inline">ensure</span></td>
                                    <td><a href="#errors">R-08</a></td>
                                </tr>
                                <tr>
                                    <td>Add dynamic methods</td>
                                    <td><span class="code-inline">define_method</span> / <span class="code-inline">method_missing</span></td>
                                    <td><a href="#metaprogramming">R-07</a></td>
                                </tr>
                                <tr>
                                    <td>Manage dependencies</td>
                                    <td>Bundler + Gemfile</td>
                                    <td><a href="#gems">R-09</a></td>
                                </tr>
                                <tr>
                                    <td>Test my code</td>
                                    <td>RSpec (or Minitest)</td>
                                    <td><a href="#testing">R-10</a></td>
                                </tr>
                                <tr>
                                    <td>Build a web app</td>
                                    <td>Rails (MVC framework)</td>
                                    <td><a href="#rails">R-12</a></td>
                                </tr>
                                <tr>
                                    <td>Debug interactively</td>
                                    <td>Pry / <span class="code-inline">debug</span> gem</td>
                                    <td><a href="#errors">R-08</a></td>
                                </tr>
                                <tr>
                                    <td>Define a simple value object</td>
                                    <td><span class="code-inline">Data.define</span> (Ruby 3.2+)</td>
                                    <td><a href="#oop">R-06</a></td>
                                </tr>
                                <tr>
                                    <td>Iterate with index</td>
                                    <td><span class="code-inline">.each_with_index</span> / <span class="code-inline">.each.with_index</span></td>
                                    <td><a href="#controlflow">R-04</a></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Essential Commands -->
                    <h3 class="mb-sm">Essential Commands</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Command</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">ruby script.rb</span></td>
                                    <td>Run a Ruby file</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">irb</span></td>
                                    <td>Interactive Ruby shell</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">gem install NAME</span></td>
                                    <td>Install a gem</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle install</span></td>
                                    <td>Install Gemfile dependencies</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle exec CMD</span></td>
                                    <td>Run command in bundle context</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails new APP</span></td>
                                    <td>Create new Rails app</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails server</span></td>
                                    <td>Start dev server (port 3000)</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails console</span></td>
                                    <td>Rails REPL with app loaded</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rake TASK</span></td>
                                    <td>Run a Rake task</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rspec</span></td>
                                    <td>Run RSpec test suite</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rubocop</span></td>
                                    <td>Lint and auto-correct</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">ruby -e 'code'</span></td>
                                    <td>Execute one-liner</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Ruby vs Python Rosetta Stone -->
                    <h3 class="mb-md">Ruby vs Python Rosetta Stone</h3>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Print to stdout</p>
                            <div class="code-block"><span class="fn">puts</span> <span class="str">"hello"</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Print to stdout</p>
                            <div class="code-block"><span class="fn">print</span>(<span class="str">"hello"</span>)</div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>String interpolation</p>
                            <div class="code-block"><span class="str">"Hello </span><span class="str">#{</span>name<span class="str">}"</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>String interpolation</p>
                            <div class="code-block"><span class="str">f"Hello {</span>name<span class="str">}"</span></div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Transform a list</p>
                            <div class="code-block">[<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>].<span class="fn">map</span> { |x| x <span class="op">*</span> <span class="num">2</span> }</div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Transform a list</p>
                            <div class="code-block">[x <span class="op">*</span> <span class="num">2</span> <span class="kw">for</span> x <span class="kw">in</span> [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>]]</div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Hash / Dictionary</p>
                            <div class="code-block">{ <span class="sym">name:</span> <span class="str">"Ruby"</span> }</div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Hash / Dictionary</p>
                            <div class="code-block">{<span class="str">"name"</span>: <span class="str">"Ruby"</span>}</div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Blocks / Loops</p>
                            <div class="code-block"><span class="num">5</span>.<span class="fn">times</span> { |i| <span class="fn">puts</span> i }</div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Blocks / Loops</p>
                            <div class="code-block"><span class="kw">for</span> i <span class="kw">in</span> <span class="fn">range</span>(<span class="num">5</span>): <span class="fn">print</span>(i)</div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Class attributes</p>
                            <div class="code-block"><span class="kw">attr_accessor</span> <span class="sym">:name</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Class attributes</p>
                            <div class="code-block"><span class="kw">self</span>.name <span class="op">=</span> name</div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Nil check</p>
                            <div class="code-block">value.<span class="fn">nil?</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Nil check</p>
                            <div class="code-block">value <span class="kw">is</span> <span class="const">None</span></div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Ternary expression</p>
                            <div class="code-block">x <span class="op">&gt;</span> <span class="num">0</span> <span class="op">?</span> <span class="str">"pos"</span> <span class="op">:</span> <span class="str">"neg"</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Ternary expression</p>
                            <div class="code-block"><span class="str">"pos"</span> <span class="kw">if</span> x <span class="op">&gt;</span> <span class="num">0</span> <span class="kw">else</span> <span class="str">"neg"</span></div>
                        </div>
                    </div>

                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Ruby</h4>
                            <p>Modules / Mixins</p>
                            <div class="code-block"><span class="kw">include</span> <span class="const">Enumerable</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Python</h4>
                            <p>Modules / Mixins</p>
                            <div class="code-block"><span class="kw">from</span> collections.abc <span class="kw">import</span> <span class="const">Iterable</span></div>
                        </div>
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-02: RUBY PHILOSOPHY & DESIGN
                 ============================================ -->
            <section class="section" id="philosophy">
                <div class="section-header">
                    <span class="section-number">R-02</span>
                    <h2 class="section-title">Ruby Philosophy &amp; Design</h2>
                    <p class="section-description">Ruby is designed to make programmers happy. Every design decision traces back to Matz's core belief that developer joy matters more than machine optimization.</p>
                </div>

                <div class="section-content">

                    <!-- Matz Quote -->
                    <div class="philosophy-box">
                        I hope to see Ruby help every programmer in the world to be productive, to enjoy programming, and to be happy. That is the primary purpose of the Ruby language.
                        <cite>Yukihiro "Matz" Matsumoto</cite>
                    </div>

                    <!-- Core Principles -->
                    <h3 class="mb-sm mt-md">Core Principles</h3>
                    <div class="concept-grid mb-lg">
                        <div class="concept-card">
                            <h4>Programmer Happiness</h4>
                            <p>Ruby optimizes for developer joy over raw performance. The language reads almost like English. Method names are verbs, predicates end in <span class="code-inline">?</span>, and dangerous methods end in <span class="code-inline">!</span>.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Everything is an Object</h4>
                            <p>There are no primitives. Every value has methods, a class, and responds to messages.</p>
                            <div class="code-block"><span class="num">5</span>.<span class="fn">times</span> { <span class="fn">puts</span> <span class="str">"hello"</span> }
<span class="kw">nil</span>.<span class="fn">class</span>   <span class="cm"># =&gt; NilClass</span>
<span class="kw">true</span>.<span class="fn">is_a?</span>(<span class="const">Object</span>) <span class="cm"># =&gt; true</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Principle of Least Surprise</h4>
                            <p>Methods behave the way you'd expect. Naming is intuitive and consistent across the standard library.</p>
                            <div class="code-block"><span class="str">"hello"</span>.<span class="fn">reverse</span>  <span class="cm"># =&gt; "olleh"</span>
<span class="str">"hello"</span>.<span class="fn">upcase</span>   <span class="cm"># =&gt; "HELLO"</span>
[<span class="num">3</span>,<span class="num">1</span>,<span class="num">2</span>].<span class="fn">sort</span>     <span class="cm"># =&gt; [1, 2, 3]</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Multiple Ways</h4>
                            <p>Unlike Python's "one obvious way," Ruby embraces multiple approaches. Flexibility over uniformity. Use <span class="code-inline">unless</span> or <span class="code-inline">if !</span>. Use <span class="code-inline">{}</span> or <span class="code-inline">do...end</span>.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Duck Typing</h4>
                            <p>"If it walks like a duck and quacks like a duck, it's a duck." Ruby cares about what objects can do, not what they are. No interfaces needed.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Blocks Everywhere</h4>
                            <p>First-class closures make Ruby uniquely expressive. Every method can accept a block.</p>
                            <div class="code-block">[<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>].<span class="fn">select</span> { |n| n.<span class="fn">odd?</span> }
<span class="cm"># =&gt; [1, 3]</span></div>
                        </div>
                    </div>

                    <!-- Second Matz Quote -->
                    <div class="philosophy-box">
                        Ruby inherited the Perl philosophy of having more than one way to do the same thing. I inherited that philosophy from Larry Wall, who is my hero actually.
                        <cite>Matz</cite>
                    </div>

                    <hr class="section-divider">

                    <!-- Mental Model Comparison -->
                    <h3 class="mb-sm mt-md">Mental Model Comparison</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Concept</th>
                                    <th>Ruby</th>
                                    <th>Python</th>
                                    <th>JavaScript</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Philosophy</td>
                                    <td>Programmer happiness</td>
                                    <td>One obvious way</td>
                                    <td>Flexibility + ecosystem</td>
                                </tr>
                                <tr>
                                    <td>Typing</td>
                                    <td>Dynamic, strong, duck</td>
                                    <td>Dynamic, strong, duck</td>
                                    <td>Dynamic, weak</td>
                                </tr>
                                <tr>
                                    <td>Everything is...</td>
                                    <td>An object</td>
                                    <td>An object (mostly)</td>
                                    <td>Prototype-based</td>
                                </tr>
                                <tr>
                                    <td>Blocks/closures</td>
                                    <td>Built-in (<span class="code-inline">yield</span>)</td>
                                    <td>No equivalent</td>
                                    <td>Arrow functions</td>
                                </tr>
                                <tr>
                                    <td>Nil/null</td>
                                    <td><span class="code-inline">nil</span> (NilClass)</td>
                                    <td><span class="code-inline">None</span> (NoneType)</td>
                                    <td><span class="code-inline">null</span> + <span class="code-inline">undefined</span></td>
                                </tr>
                                <tr>
                                    <td>Package mgr</td>
                                    <td>Bundler + gem</td>
                                    <td>pip + uv</td>
                                    <td>npm / yarn / pnpm</td>
                                </tr>
                                <tr>
                                    <td>REPL</td>
                                    <td><span class="code-inline">irb</span> / <span class="code-inline">pry</span></td>
                                    <td><span class="code-inline">python</span> / <span class="code-inline">ipython</span></td>
                                    <td><span class="code-inline">node</span></td>
                                </tr>
                                <tr>
                                    <td>Style guide</td>
                                    <td>RuboCop</td>
                                    <td>PEP 8 / Ruff</td>
                                    <td>ESLint / Prettier</td>
                                </tr>
                                <tr>
                                    <td>Web framework</td>
                                    <td>Rails</td>
                                    <td>Django / FastAPI</td>
                                    <td>Express / Next.js</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Stats -->
                    <div class="stat-row">
                        <div class="stat-box">
                            <div class="stat-value">30+</div>
                            <div class="stat-label">Years &mdash; First released 1995</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">180K+</div>
                            <div class="stat-label">Gems on RubyGems.org</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">#1</div>
                            <div class="stat-label">Programmer happiness rating</div>
                        </div>
                        <div class="stat-box">
                            <div class="stat-value">3.3+</div>
                            <div class="stat-label">Latest stable with YJIT</div>
                        </div>
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-03: CORE SYNTAX & TYPES
                 ============================================ -->
            <section class="section" id="syntax">
                <div class="section-header">
                    <span class="section-number">R-03</span>
                    <h2 class="section-title">Core Syntax &amp; Types</h2>
                    <p class="section-description">Ruby's syntax reads like poetry &mdash; minimal punctuation, optional parentheses, and expressive method names. Every value is an object, from integers to nil.</p>
                </div>

                <div class="section-content">

                    <!-- Variable Types Table -->
                    <h3 class="mb-sm">Variable Types</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Prefix</th>
                                    <th>Scope</th>
                                    <th>Example</th>
                                    <th>Notes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>(none)</td>
                                    <td>Local</td>
                                    <td><span class="code-inline">name = "Ruby"</span></td>
                                    <td>Block/method scope</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">@</span></td>
                                    <td>Instance</td>
                                    <td><span class="code-inline">@name</span></td>
                                    <td>Per-object state</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">@@</span></td>
                                    <td>Class</td>
                                    <td><span class="code-inline">@@count</span></td>
                                    <td>Shared across instances (avoid)</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">$</span></td>
                                    <td>Global</td>
                                    <td><span class="code-inline">$LOAD_PATH</span></td>
                                    <td>App-wide (use sparingly)</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">UPPER</span></td>
                                    <td>Constant</td>
                                    <td><span class="code-inline">MAX_SIZE = 100</span></td>
                                    <td>Convention, not enforced (warning on reassign)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Core Types Concept Grid -->
                    <h3 class="mb-sm">Core Types</h3>
                    <div class="concept-grid concept-grid-2 mb-lg">
                        <div class="concept-card">
                            <h4>Integer</h4>
                            <p>Arbitrary precision. No overflow.</p>
                            <div class="code-block"><span class="num">42</span>.<span class="fn">even?</span>      <span class="cm"># =&gt; true</span>
<span class="num">2</span> <span class="op">**</span> <span class="num">100</span>         <span class="cm"># big integers work</span>
<span class="num">1_000_000</span>       <span class="cm"># underscores for clarity</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Float</h4>
                            <p>IEEE 754 double-precision. Use <span class="code-inline">BigDecimal</span> for money.</p>
                            <div class="code-block"><span class="num">3.14</span>.<span class="fn">round</span>(<span class="num">1</span>)  <span class="cm"># =&gt; 3.1</span>
<span class="num">0.1</span> <span class="op">+</span> <span class="num">0.2</span>       <span class="cm"># =&gt; 0.30000...04</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>String</h4>
                            <p>Mutable by default. Double quotes enable interpolation.</p>
                            <div class="code-block"><span class="str">"hello"</span>.<span class="fn">length</span>   <span class="cm"># =&gt; 5</span>
<span class="str">"hello"</span> <span class="op">&lt;&lt;</span> <span class="str">"!"</span>  <span class="cm"># mutation</span>
<span class="str">"hello"</span>.<span class="fn">freeze</span>   <span class="cm"># immutable</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Symbol</h4>
                            <p>Immutable, interned identifiers. Fast comparison.</p>
                            <div class="code-block"><span class="sym">:name</span>.<span class="fn">class</span>     <span class="cm"># =&gt; Symbol</span>
<span class="sym">:name</span>.<span class="fn">to_s</span>      <span class="cm"># =&gt; "name"</span>
<span class="sym">:name</span>.<span class="fn">object_id</span> <span class="op">==</span> <span class="sym">:name</span>.<span class="fn">object_id</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Array</h4>
                            <p>Ordered, integer-indexed, heterogeneous collection.</p>
                            <div class="code-block">[<span class="num">1</span>, <span class="str">"two"</span>, <span class="sym">:three</span>]
<span class="op">%w</span>[<span class="str">foo bar baz</span>]  <span class="cm"># =&gt; ["foo","bar","baz"]</span>
[<span class="num">1</span>,<span class="num">2</span>,<span class="num">3</span>].<span class="fn">last</span>      <span class="cm"># =&gt; 3</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Hash</h4>
                            <p>Key-value store. Ordered since Ruby 1.9.</p>
                            <div class="code-block">{ <span class="sym">name:</span> <span class="str">"Matz"</span>, <span class="sym">lang:</span> <span class="str">"Ruby"</span> }
h.<span class="fn">fetch</span>(<span class="sym">:name</span>)  <span class="cm"># safe access</span>
h.<span class="fn">dig</span>(<span class="sym">:a</span>, <span class="sym">:b</span>)    <span class="cm"># nested access</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Range</h4>
                            <p>Represents an interval. Lazy-evaluable.</p>
                            <div class="code-block">(<span class="num">1</span><span class="op">..</span><span class="num">5</span>).<span class="fn">to_a</span>     <span class="cm"># =&gt; [1, 2, 3, 4, 5]</span>
(<span class="num">1</span><span class="op">...</span><span class="num">5</span>).<span class="fn">to_a</span>    <span class="cm"># =&gt; [1, 2, 3, 4]</span>
(<span class="str">'a'</span><span class="op">..</span><span class="str">'z'</span>)       <span class="cm"># works with strings</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>NilClass</h4>
                            <p>The absence of value. Only <span class="code-inline">nil</span> and <span class="code-inline">false</span> are falsy.</p>
                            <div class="code-block"><span class="kw">nil</span>.<span class="fn">nil?</span>     <span class="cm"># =&gt; true</span>
<span class="kw">nil</span>.<span class="fn">to_s</span>     <span class="cm"># =&gt; ""</span>
<span class="kw">nil</span>.<span class="fn">to_i</span>     <span class="cm"># =&gt; 0</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>TrueClass / FalseClass</h4>
                            <p>Boolean singletons. Only <span class="code-inline">nil</span> and <span class="code-inline">false</span> are falsy; <span class="code-inline">0</span> and <span class="code-inline">""</span> are truthy.</p>
                            <div class="code-block"><span class="kw">true</span>.<span class="fn">class</span>   <span class="cm"># =&gt; TrueClass</span>
<span class="op">!!</span><span class="num">0</span>           <span class="cm"># =&gt; true (0 is truthy!)</span>
<span class="op">!!</span><span class="str">""</span>          <span class="cm"># =&gt; true ("" is truthy!)</span></div>
                        </div>
                        <div class="concept-card">
                            <h4>Regexp</h4>
                            <p>First-class regular expressions with <span class="code-inline">=~</span> operator.</p>
                            <div class="code-block"><span class="str">"hello"</span> <span class="op">=~</span> <span class="str">/e(ll)o/</span>
$<span class="num">1</span>  <span class="cm"># =&gt; "ll" (capture group)</span>
<span class="str">"hello"</span>.<span class="fn">match?</span>(<span class="str">/ell/</span>) <span class="cm"># =&gt; true</span></div>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- String Interpolation -->
                    <h3 class="mb-sm">String Interpolation</h3>
                    <div class="code-label">Strings &mdash; Double vs Single Quotes</div>
                    <div class="code-block">name <span class="op">=</span> <span class="str">"Ruby"</span>
version <span class="op">=</span> <span class="num">3.3</span>
<span class="fn">puts</span> <span class="str">"Welcome to #{name} #{version}"</span>   <span class="cm"># Welcome to Ruby 3.3</span>
<span class="fn">puts</span> <span class="str">'No interpolation: #{name}'</span>        <span class="cm"># No interpolation: #{name}</span>
<span class="fn">puts</span> <span class="str">"Math: #{<span class="num">2</span> <span class="op">+</span> <span class="num">2</span>}"</span>                   <span class="cm"># Math: 4</span></div>

                    <hr class="section-divider">

                    <!-- Symbol vs String -->
                    <h3 class="mb-sm">Symbol vs String Decision Guide</h3>
                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Do &mdash; Symbol</h4>
                            <p>Use for identifiers, hash keys, flags. Symbols are immutable, interned, and fast to compare.</p>
                            <div class="code-block"><span class="sym">:name</span>, <span class="sym">:status</span>, <span class="sym">:admin</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Avoid &mdash; String as Hash Key</h4>
                            <p>Use strings only when keys come from external input (JSON, CSV, user params).</p>
                            <div class="code-block"><span class="str">"name"</span>, <span class="str">"status"</span>, <span class="str">"admin"</span></div>
                        </div>
                    </div>

                    <div class="code-label">Symbols vs Strings in Practice</div>
                    <div class="code-block"><span class="cm"># Symbols -- immutable, interned, fast comparison</span>
status <span class="op">=</span> <span class="sym">:active</span>
user <span class="op">=</span> { <span class="sym">name:</span> <span class="str">"Matz"</span>, <span class="sym">role:</span> <span class="sym">:admin</span> }

<span class="cm"># Strings -- mutable, for text content</span>
greeting <span class="op">=</span> <span class="str">"Hello, world"</span>
greeting <span class="op">&lt;&lt;</span> <span class="str">"!"</span>  <span class="cm"># mutation</span></div>

                    <hr class="section-divider">

                    <!-- Essential Array & Hash Methods -->
                    <h3 class="mb-sm">Essential Array &amp; Hash Methods</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Method</th>
                                    <th>Array Example</th>
                                    <th>Result</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">.map</span></td>
                                    <td><span class="code-inline">[1,2,3].map { |n| n * 2 }</span></td>
                                    <td>[2, 4, 6]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.select</span></td>
                                    <td><span class="code-inline">[1,2,3,4].select(&amp;:even?)</span></td>
                                    <td>[2, 4]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.reject</span></td>
                                    <td><span class="code-inline">[1,2,3,4].reject(&amp;:even?)</span></td>
                                    <td>[1, 3]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.find</span></td>
                                    <td><span class="code-inline">[1,2,3].find { |n| n &gt; 1 }</span></td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.reduce</span></td>
                                    <td><span class="code-inline">[1,2,3].reduce(0, :+)</span></td>
                                    <td>6</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.flat_map</span></td>
                                    <td><span class="code-inline">[[1,2],[3]].flat_map { |a| a }</span></td>
                                    <td>[1, 2, 3]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.dig</span></td>
                                    <td><span class="code-inline">{a: {b: 1}}.dig(:a, :b)</span></td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.merge</span></td>
                                    <td><span class="code-inline">{a: 1}.merge(b: 2)</span></td>
                                    <td>{a: 1, b: 2}</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.tally</span></td>
                                    <td><span class="code-inline">["a","b","a"].tally</span></td>
                                    <td>{"a"=&gt;2, "b"=&gt;1}</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.group_by</span></td>
                                    <td><span class="code-inline">[1,2,3].group_by(&amp;:odd?)</span></td>
                                    <td>{true=&gt;[1,3], false=&gt;[2]}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Frozen String Literal Tip -->
                    <div class="alert-tip">
                        <strong>Tip:</strong> Enable frozen string literals at the top of your files with <span class="code-inline"># frozen_string_literal: true</span>. This makes all string literals frozen by default, preventing accidental mutation and improving performance.
                    </div>

                    <hr class="section-divider">

                    <!-- Type Conversion -->
                    <h3 class="mb-sm">Type Conversion</h3>
                    <div class="code-label">Explicit Conversions</div>
                    <div class="code-block"><span class="cm"># Explicit conversions</span>
<span class="str">"42"</span>.<span class="fn">to_i</span>      <span class="cm"># =&gt; 42</span>
<span class="str">"3.14"</span>.<span class="fn">to_f</span>    <span class="cm"># =&gt; 3.14</span>
<span class="num">42</span>.<span class="fn">to_s</span>        <span class="cm"># =&gt; "42"</span>
<span class="num">42</span>.<span class="fn">to_f</span>        <span class="cm"># =&gt; 42.0</span>
[<span class="num">1</span>, <span class="num">2</span>].<span class="fn">to_s</span>    <span class="cm"># =&gt; "[1, 2]"</span>
{ <span class="sym">a:</span> <span class="num">1</span> }.<span class="fn">to_a</span>  <span class="cm"># =&gt; [[:a, 1]]</span>

<span class="cm"># Kernel conversion methods (strict)</span>
<span class="const">Integer</span>(<span class="str">"42"</span>)   <span class="cm"># =&gt; 42</span>
<span class="const">Integer</span>(<span class="str">"nope"</span>) <span class="cm"># =&gt; ArgumentError (safer!)</span>
<span class="const">Float</span>(<span class="str">"3.14"</span>)   <span class="cm"># =&gt; 3.14</span></div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-04: CONTROL FLOW & ITERATION
                 ============================================ -->
            <section class="section" id="controlflow">
                <div class="section-header">
                    <span class="section-number">R-04</span>
                    <h2 class="section-title">Control Flow &amp; Iteration</h2>
                    <p class="section-description">Ruby's control flow reads like English prose. Postfix conditionals, the unless keyword, and a rich iterator library make loops rare &mdash; you almost never write a traditional for loop in Ruby.</p>
                </div>

                <div class="section-content">

                    <!-- Conditional Patterns -->
                    <h3 class="mb-sm">Conditional Patterns</h3>
                    <div class="code-label">Conditionals</div>
                    <div class="code-block"><span class="cm"># Standard if/elsif/else</span>
<span class="kw">if</span> score <span class="op">&gt;=</span> <span class="num">90</span>
  grade <span class="op">=</span> <span class="str">"A"</span>
<span class="kw">elsif</span> score <span class="op">&gt;=</span> <span class="num">80</span>
  grade <span class="op">=</span> <span class="str">"B"</span>
<span class="kw">else</span>
  grade <span class="op">=</span> <span class="str">"C"</span>
<span class="kw">end</span>

<span class="cm"># Postfix (inline) conditional</span>
<span class="fn">puts</span> <span class="str">"Adult"</span> <span class="kw">if</span> age <span class="op">&gt;=</span> <span class="num">18</span>

<span class="cm"># unless (negative if)</span>
<span class="kw">raise</span> <span class="str">"Invalid"</span> <span class="kw">unless</span> valid?

<span class="cm"># Ternary</span>
status <span class="op">=</span> logged_in? <span class="op">?</span> <span class="sym">:active</span> <span class="op">:</span> <span class="sym">:guest</span>

<span class="cm"># case/when (like switch)</span>
<span class="kw">case</span> role
<span class="kw">when</span> <span class="sym">:admin</span>  <span class="kw">then</span> <span class="str">"Full access"</span>
<span class="kw">when</span> <span class="sym">:editor</span> <span class="kw">then</span> <span class="str">"Edit access"</span>
<span class="kw">when</span> <span class="sym">:viewer</span> <span class="kw">then</span> <span class="str">"Read only"</span>
<span class="kw">else</span> <span class="str">"No access"</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Pattern Matching -->
                    <h3 class="mb-sm">Ruby 3 Pattern Matching</h3>
                    <div class="code-label">Structural Pattern Matching (Ruby 3.0+)</div>
                    <div class="code-block"><span class="cm"># case/in -- structural pattern matching (Ruby 3.0+)</span>
<span class="kw">case</span> response
<span class="kw">in</span> { <span class="sym">status:</span> <span class="num">200</span>, <span class="sym">body:</span> <span class="const">String</span> <span class="op">=&gt;</span> body }
  <span class="fn">puts</span> <span class="str">"Success: #{body}"</span>
<span class="kw">in</span> { <span class="sym">status:</span> <span class="num">404</span> }
  <span class="fn">puts</span> <span class="str">"Not found"</span>
<span class="kw">in</span> { <span class="sym">status:</span> (<span class="num">500</span><span class="op">..</span>) }
  <span class="fn">puts</span> <span class="str">"Server error"</span>
<span class="kw">end</span>

<span class="cm"># Find pattern</span>
<span class="kw">case</span> [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>, <span class="num">5</span>]
<span class="kw">in</span> [<span class="op">*</span>, <span class="num">3</span>, <span class="op">*</span>post]
  <span class="fn">puts</span> <span class="str">"Found 3, followed by: #{post}"</span>
<span class="kw">end</span>

<span class="cm"># Pin operator</span>
expected <span class="op">=</span> <span class="num">42</span>
<span class="kw">case</span> value
<span class="kw">in</span> <span class="op">^</span>expected
  <span class="fn">puts</span> <span class="str">"Matched!"</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Iteration Decision Flow -->
                    <h3 class="mb-sm">Iteration Decision Flow</h3>
                    <div class="decision-flow mb-lg">
                        <div class="flow-step">
                            <h5>What are you iterating?</h5>
                            <p>Start here. The answer determines which iterator to use.</p>
                        </div>
                        <div class="flow-step">
                            <h5>Array or Range</h5>
                            <p><span class="code-inline">.each</span>, <span class="code-inline">.map</span>, <span class="code-inline">.select</span> &mdash; the big three for collections.</p>
                        </div>
                        <div class="flow-step">
                            <h5>Hash</h5>
                            <p><span class="code-inline">.each { |k, v| }</span>, <span class="code-inline">.transform_values</span>, <span class="code-inline">.filter_map</span></p>
                        </div>
                        <div class="flow-step">
                            <h5>Need the index?</h5>
                            <p><span class="code-inline">.each_with_index</span> (0-based) or <span class="code-inline">.each.with_index(1)</span> (custom start)</p>
                        </div>
                        <div class="flow-step">
                            <h5>Building an object?</h5>
                            <p><span class="code-inline">.each_with_object([])</span> or <span class="code-inline">.each_with_object({})</span></p>
                        </div>
                        <div class="flow-step">
                            <h5>N times / counting</h5>
                            <p><span class="code-inline">5.times { }</span>, <span class="code-inline">1.upto(10) { }</span>, <span class="code-inline">10.downto(1) { }</span></p>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Complete Iterator Reference Table -->
                    <h3 class="mb-sm">Complete Iterator Reference</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Method</th>
                                    <th>Purpose</th>
                                    <th>Example</th>
                                    <th>Returns</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">.each</span></td>
                                    <td>Side effects</td>
                                    <td><span class="code-inline">[1,2].each { |n| puts n }</span></td>
                                    <td>Original array</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.map</span></td>
                                    <td>Transform</td>
                                    <td><span class="code-inline">[1,2].map { |n| n * 10 }</span></td>
                                    <td>[10, 20]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.select</span></td>
                                    <td>Filter (keep)</td>
                                    <td><span class="code-inline">(1..10).select(&amp;:even?)</span></td>
                                    <td>[2,4,6,8,10]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.reject</span></td>
                                    <td>Filter (remove)</td>
                                    <td><span class="code-inline">(1..10).reject(&amp;:even?)</span></td>
                                    <td>[1,3,5,7,9]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.find</span></td>
                                    <td>First match</td>
                                    <td><span class="code-inline">[3,7,2].find { |n| n &gt; 5 }</span></td>
                                    <td>7</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.reduce</span></td>
                                    <td>Accumulate</td>
                                    <td><span class="code-inline">[1,2,3].reduce(:+)</span></td>
                                    <td>6</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.flat_map</span></td>
                                    <td>Map + flatten</td>
                                    <td><span class="code-inline">[[1],[2,3]].flat_map { |a| a }</span></td>
                                    <td>[1, 2, 3]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.group_by</span></td>
                                    <td>Group</td>
                                    <td><span class="code-inline">%w[hi hey ho].group_by { |w| w[0] }</span></td>
                                    <td>{"h"=&gt;["hi","hey","ho"]}</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.tally</span></td>
                                    <td>Count</td>
                                    <td><span class="code-inline">%w[a b a c a].tally</span></td>
                                    <td>{"a"=&gt;3,"b"=&gt;1,"c"=&gt;1}</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.each_with_object</span></td>
                                    <td>Build</td>
                                    <td><span class="code-inline">[1,2].each_with_object([]) { |n,a| a &lt;&lt; n*2 }</span></td>
                                    <td>[2, 4]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.zip</span></td>
                                    <td>Pair up</td>
                                    <td><span class="code-inline">[1,2].zip([3,4])</span></td>
                                    <td>[[1,3],[2,4]]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.each_slice</span></td>
                                    <td>Chunk</td>
                                    <td><span class="code-inline">(1..6).each_slice(2).to_a</span></td>
                                    <td>[[1,2],[3,4],[5,6]]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.any?</span></td>
                                    <td>Check</td>
                                    <td><span class="code-inline">[1,2,3].any? { |n| n &gt; 2 }</span></td>
                                    <td>true</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.all?</span></td>
                                    <td>Check all</td>
                                    <td><span class="code-inline">[2,4,6].all?(&amp;:even?)</span></td>
                                    <td>true</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.none?</span></td>
                                    <td>Check none</td>
                                    <td><span class="code-inline">[1,3,5].none?(&amp;:even?)</span></td>
                                    <td>true</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.count</span></td>
                                    <td>Count matches</td>
                                    <td><span class="code-inline">[1,2,3,4].count(&amp;:even?)</span></td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.min_by / .max_by</span></td>
                                    <td>Extremes</td>
                                    <td><span class="code-inline">%w[hi hello hey].min_by(&amp;:length)</span></td>
                                    <td>"hi"</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.sort_by</span></td>
                                    <td>Sort</td>
                                    <td><span class="code-inline">%w[banana apple cherry].sort_by(&amp;:length)</span></td>
                                    <td>["apple","banana","cherry"]</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">.sum</span></td>
                                    <td>Sum</td>
                                    <td><span class="code-inline">[1,2,3].sum</span></td>
                                    <td>6</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Compare Grid: Idiomatic vs Traditional -->
                    <h3 class="mb-sm">Traditional Loop vs Ruby Idiom</h3>
                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Do &mdash; Ruby Idiom</h4>
                            <div class="code-block"><span class="cm"># Transform</span>
doubled <span class="op">=</span> numbers.<span class="fn">map</span> { |n| n <span class="op">*</span> <span class="num">2</span> }

<span class="cm"># Filter</span>
adults <span class="op">=</span> users.<span class="fn">select</span> { |u| u.age <span class="op">&gt;=</span> <span class="num">18</span> }

<span class="cm"># Accumulate</span>
total <span class="op">=</span> orders.<span class="fn">sum</span>(<span class="op">&amp;</span><span class="sym">:amount</span>)</div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Avoid &mdash; Traditional Loop</h4>
                            <div class="code-block"><span class="cm"># Don't do this in Ruby</span>
doubled <span class="op">=</span> []
<span class="kw">for</span> n <span class="kw">in</span> numbers
  doubled <span class="op">&lt;&lt;</span> n <span class="op">*</span> <span class="num">2</span>
<span class="kw">end</span>

adults <span class="op">=</span> []
numbers.<span class="fn">each</span> <span class="kw">do</span> |u|
  adults <span class="op">&lt;&lt;</span> u <span class="kw">if</span> u.age <span class="op">&gt;=</span> <span class="num">18</span>
<span class="kw">end</span></div>
                        </div>
                    </div>

                    <!-- Tip: &:method shorthand -->
                    <div class="alert-tip">
                        <strong>Tip:</strong> Use <span class="code-inline">&amp;:method_name</span> shorthand when a block just calls one method: <span class="code-inline">[1,-2,3].select(&amp;:positive?)</span> is cleaner than <span class="code-inline">[1,-2,3].select { |n| n.positive? }</span>.
                    </div>

                    <hr class="section-divider">

                    <!-- Flow Control in Blocks -->
                    <h3 class="mb-sm">Flow Control in Blocks</h3>
                    <div class="code-label">return, next, break</div>
                    <div class="code-block"><span class="cm"># return -- exits the ENCLOSING METHOD (not just the block!)</span>
<span class="kw">def</span> <span class="fn">find_first_admin</span>(users)
  users.<span class="fn">each</span> <span class="kw">do</span> |user|
    <span class="kw">return</span> user <span class="kw">if</span> user.admin?  <span class="cm"># returns from find_first_admin</span>
  <span class="kw">end</span>
  <span class="kw">nil</span>
<span class="kw">end</span>

<span class="cm"># next -- skip to next iteration (like continue)</span>
[<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>].<span class="fn">each</span> <span class="kw">do</span> |n|
  <span class="kw">next</span> <span class="kw">if</span> n.<span class="fn">even?</span>
  <span class="fn">puts</span> n  <span class="cm"># prints 1, 3</span>
<span class="kw">end</span>

<span class="cm"># break -- exit the loop entirely</span>
result <span class="op">=</span> [<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>, <span class="num">4</span>].<span class="fn">each</span> <span class="kw">do</span> |n|
  <span class="kw">break</span> n <span class="kw">if</span> n <span class="op">&gt;</span> <span class="num">2</span>  <span class="cm"># result = 3</span>
<span class="kw">end</span></div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-05: METHODS & BLOCKS
                 ============================================ -->
            <section class="section" id="methods">
                <div class="section-header">
                    <span class="section-number">R-05</span>
                    <h2 class="section-title">Methods &amp; Blocks</h2>
                    <p class="section-description">Methods in Ruby are remarkably flexible &mdash; optional parentheses, default values, keyword arguments, and the ? and ! naming conventions. But the real power lies in blocks: Ruby&rsquo;s built-in closure mechanism that makes the language uniquely expressive.</p>
                </div>

                <div class="section-content">

                    <!-- Method Definition Patterns -->
                    <h3 class="mb-sm">Method Definition Patterns</h3>
                    <div class="code-label">Defining Methods &mdash; Parameters &amp; Conventions</div>
                    <div class="code-block"><span class="cm"># Basic method</span>
<span class="kw">def</span> <span class="fn">greet</span>(name)
  <span class="str">"Hello, #{name}!"</span>
<span class="kw">end</span>

<span class="cm"># Default parameters</span>
<span class="kw">def</span> <span class="fn">connect</span>(host, <span class="sym">port:</span> <span class="num">3000</span>, <span class="sym">ssl:</span> <span class="kw">true</span>)
  <span class="cm"># keyword args with defaults</span>
<span class="kw">end</span>

<span class="cm"># Splat (variable args)</span>
<span class="kw">def</span> <span class="fn">log</span>(<span class="op">*</span>messages)
  messages.<span class="fn">each</span> { |msg| <span class="fn">puts</span> msg }
<span class="kw">end</span>

<span class="cm"># Double splat (keyword collector)</span>
<span class="kw">def</span> <span class="fn">configure</span>(<span class="op">**</span>options)
  options.<span class="fn">each</span> { |key, val| <span class="fn">puts</span> <span class="str">"#{key}: #{val}"</span> }
<span class="kw">end</span>

<span class="cm"># ? convention -- returns boolean</span>
<span class="kw">def</span> <span class="fn">valid?</span>
  errors.<span class="fn">empty?</span>
<span class="kw">end</span>

<span class="cm"># ! convention -- dangerous/mutating</span>
<span class="kw">def</span> <span class="fn">save!</span>
  <span class="kw">raise</span> <span class="str">"Invalid"</span> <span class="kw">unless</span> <span class="fn">valid?</span>
  persist
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Naming Conventions Table -->
                    <h3 class="mb-sm">Naming Conventions</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Pattern</th>
                                    <th>Convention</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">method_name</span></td>
                                    <td>Snake case (always)</td>
                                    <td><span class="code-inline">find_user</span>, <span class="code-inline">total_amount</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">method?</span></td>
                                    <td>Returns boolean</td>
                                    <td><span class="code-inline">empty?</span>, <span class="code-inline">valid?</span>, <span class="code-inline">admin?</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">method!</span></td>
                                    <td>Dangerous / mutates</td>
                                    <td><span class="code-inline">save!</span>, <span class="code-inline">sort!</span>, <span class="code-inline">gsub!</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">self.method</span></td>
                                    <td>Class method</td>
                                    <td><span class="code-inline">User.find(1)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">_unused</span></td>
                                    <td>Intentionally unused</td>
                                    <td><span class="code-inline">_</span>, <span class="code-inline">_index</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Blocks & Yield -->
                    <h3 class="mb-sm">Blocks &amp; Yield</h3>
                    <div class="code-label">Blocks &mdash; Ruby&rsquo;s Built-in Closures</div>
                    <div class="code-block"><span class="cm"># Blocks are closures passed to methods</span>
<span class="kw">def</span> <span class="fn">with_logging</span>
  <span class="fn">puts</span> <span class="str">"Starting..."</span>
  result <span class="op">=</span> <span class="kw">yield</span>          <span class="cm"># execute the block</span>
  <span class="fn">puts</span> <span class="str">"Done!"</span>
  result
<span class="kw">end</span>

<span class="fn">with_logging</span> { <span class="const">User</span>.count }

<span class="cm"># Multi-line block (use do...end)</span>
<span class="fn">with_logging</span> <span class="kw">do</span>
  users <span class="op">=</span> <span class="const">User</span>.active
  users.count
<span class="kw">end</span>

<span class="cm"># Yield with arguments</span>
<span class="kw">def</span> <span class="fn">transform</span>(value)
  <span class="kw">yield</span>(value) <span class="kw">if</span> <span class="builtin">block_given?</span>
<span class="kw">end</span>

<span class="fn">transform</span>(<span class="num">5</span>) { |n| n <span class="op">*</span> <span class="num">2</span> }  <span class="cm"># =&gt; 10</span></div>

                    <hr class="section-divider">

                    <!-- Block vs Proc vs Lambda Table -->
                    <h3 class="mb-sm">Block vs Proc vs Lambda</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>Block</th>
                                    <th>Proc</th>
                                    <th>Lambda</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Object?</td>
                                    <td>No (syntax)</td>
                                    <td>Yes</td>
                                    <td>Yes (special Proc)</td>
                                </tr>
                                <tr>
                                    <td>Create</td>
                                    <td><span class="code-inline">{ }</span> or <span class="code-inline">do...end</span></td>
                                    <td><span class="code-inline">Proc.new { }</span></td>
                                    <td><span class="code-inline">-&gt; { }</span> or <span class="code-inline">lambda { }</span></td>
                                </tr>
                                <tr>
                                    <td>Arity</td>
                                    <td>Loose</td>
                                    <td>Loose</td>
                                    <td>Strict (raises ArgumentError)</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">return</span> behavior</td>
                                    <td>Returns from enclosing method</td>
                                    <td>Returns from enclosing method</td>
                                    <td>Returns from lambda only</td>
                                </tr>
                                <tr>
                                    <td>Call syntax</td>
                                    <td><span class="code-inline">yield</span></td>
                                    <td><span class="code-inline">proc.call</span> or <span class="code-inline">proc.()</span></td>
                                    <td><span class="code-inline">lambda.call</span> or <span class="code-inline">lambda.()</span></td>
                                </tr>
                                <tr>
                                    <td>Common use</td>
                                    <td>Iteration, callbacks</td>
                                    <td>Stored blocks, DSLs</td>
                                    <td>Functional programming</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Practical Example: Building your own .map -->
                    <h3 class="mb-sm">Practical Example &mdash; Building Your Own .map</h3>
                    <div class="code-label">Reimplementing .map with yield</div>
                    <div class="code-block"><span class="kw">def</span> <span class="fn">my_map</span>(array)
  result <span class="op">=</span> []
  array.<span class="fn">each</span> { |item| result <span class="op">&lt;&lt;</span> <span class="kw">yield</span>(item) }
  result
<span class="kw">end</span>

<span class="fn">my_map</span>([<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>]) { |n| n <span class="op">**</span> <span class="num">2</span> }
<span class="cm"># =&gt; [1, 4, 9]</span></div>

                    <div class="alert-tip">
                        <strong>Tip:</strong> Prefer <span class="code-inline">{ }</span> for single-line blocks and <span class="code-inline">do...end</span> for multi-line blocks. This is a strong Ruby convention: <span class="code-inline">users.map { |u| u.name }</span> vs <span class="code-inline">users.each do |u| ... end</span>.
                    </div>

                    <hr class="section-divider">

                    <!-- Closures -->
                    <h3 class="mb-sm">Closures &amp; Method References</h3>
                    <div class="code-label">Blocks Capture Surrounding Scope</div>
                    <div class="code-block"><span class="cm"># Blocks capture surrounding scope</span>
multiplier <span class="op">=</span> <span class="num">3</span>
[<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>].<span class="fn">map</span> { |n| n <span class="op">*</span> multiplier }
<span class="cm"># =&gt; [3, 6, 9]</span>

<span class="cm"># Method objects</span>
method_ref <span class="op">=</span> <span class="fn">method</span>(<span class="sym">:puts</span>)
[<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>].<span class="fn">each</span>(<span class="op">&amp;</span>method_ref)

<span class="cm"># Converting block to proc with &amp;</span>
<span class="kw">def</span> <span class="fn">capture</span>(<span class="op">&amp;</span>block)
  block.<span class="fn">call</span>  <span class="cm"># block is now a Proc object</span>
<span class="kw">end</span></div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-06: OBJECT-ORIENTED RUBY
                 ============================================ -->
            <section class="section" id="oop">
                <div class="section-header">
                    <span class="section-number">R-06</span>
                    <h2 class="section-title">Object-Oriented Ruby</h2>
                    <p class="section-description">Ruby is purely object-oriented &mdash; everything is an object, including numbers and nil. Ruby&rsquo;s object model is elegant: single inheritance with powerful module mixins, duck typing, and a method lookup chain that&rsquo;s worth understanding deeply.</p>
                </div>

                <div class="section-content">

                    <!-- Class Anatomy -->
                    <h3 class="mb-sm">Class Anatomy</h3>
                    <div class="code-label">A Complete Ruby Class</div>
                    <div class="code-block"><span class="kw">class</span> <span class="const">User</span>
  <span class="builtin">attr_accessor</span> <span class="sym">:name</span>, <span class="sym">:email</span>  <span class="cm"># getter + setter</span>
  <span class="builtin">attr_reader</span> <span class="sym">:id</span>              <span class="cm"># getter only</span>

  <span class="cm"># Class-level state</span>
  <span class="ivar">@@count</span> <span class="op">=</span> <span class="num">0</span>

  <span class="cm"># Constructor</span>
  <span class="kw">def</span> <span class="fn">initialize</span>(name, email)
    <span class="ivar">@name</span> <span class="op">=</span> name
    <span class="ivar">@email</span> <span class="op">=</span> email
    <span class="ivar">@id</span> <span class="op">=</span> <span class="const">SecureRandom</span>.uuid
    <span class="ivar">@@count</span> <span class="op">+=</span> <span class="num">1</span>
  <span class="kw">end</span>

  <span class="cm"># Instance method</span>
  <span class="kw">def</span> <span class="fn">display</span>
    <span class="str">"#{<span class="ivar">@name</span>} &lt;#{<span class="ivar">@email</span>}&gt;"</span>
  <span class="kw">end</span>

  <span class="cm"># Class method</span>
  <span class="kw">def</span> <span class="fn">self.count</span>
    <span class="ivar">@@count</span>
  <span class="kw">end</span>

  <span class="cm"># Private methods</span>
  <span class="kw">private</span>

  <span class="kw">def</span> <span class="fn">secret_token</span>
    <span class="const">Digest</span>::<span class="const">SHA256</span>.<span class="fn">hexdigest</span>(<span class="ivar">@email</span>)
  <span class="kw">end</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Object Model Hierarchy -->
                    <h3 class="mb-sm">Ruby Object Model &mdash; Method Lookup Chain</h3>
                    <div class="concept-grid concept-grid-2 mb-md">
                        <div class="concept-card">
                            <h4>BasicObject</h4>
                            <p>Bare minimum (only 8 methods). Parent of everything.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Kernel <span class="badge">module</span></h4>
                            <p>Included in Object. Gives <span class="code-inline">puts</span>, <span class="code-inline">require</span>, <span class="code-inline">raise</span>, <span class="code-inline">block_given?</span></p>
                        </div>
                        <div class="concept-card">
                            <h4>Object</h4>
                            <p>Default parent for all classes. Includes Kernel module.</p>
                        </div>
                        <div class="concept-card">
                            <h4>YourClass</h4>
                            <p>Your classes inherit from Object by default.</p>
                        </div>
                    </div>

                    <div class="alert-tip">
                        <strong>Tip:</strong> When you write <span class="code-inline">class Dog; end</span>, Ruby automatically does <span class="code-inline">class Dog &lt; Object</span>. Every class you create is part of this lookup chain.
                    </div>

                    <hr class="section-divider">

                    <!-- Include vs Extend vs Prepend Table -->
                    <h3 class="mb-sm">Include vs Extend vs Prepend</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Mechanism</th>
                                    <th>What it does</th>
                                    <th>Methods become</th>
                                    <th>Use when</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">include</span></td>
                                    <td>Adds module to ancestors</td>
                                    <td>Instance methods</td>
                                    <td>Sharing behavior across classes</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">extend</span></td>
                                    <td>Adds module methods to object</td>
                                    <td>Class (singleton) methods</td>
                                    <td>Adding class-level helpers</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">prepend</span></td>
                                    <td>Inserts module BEFORE class</td>
                                    <td>Instance methods (override)</td>
                                    <td>Wrapping/decorating methods</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Include vs Extend Code Example -->
                    <div class="code-label">Include vs Extend in Action</div>
                    <div class="code-block"><span class="kw">module</span> <span class="const">Loggable</span>
  <span class="kw">def</span> <span class="fn">log</span>(msg)
    <span class="fn">puts</span> <span class="str">"[#{<span class="kw">self</span>.class}] #{msg}"</span>
  <span class="kw">end</span>
<span class="kw">end</span>

<span class="kw">class</span> <span class="const">User</span>
  <span class="builtin">include</span> <span class="const">Loggable</span>  <span class="cm"># instance method</span>
<span class="kw">end</span>
<span class="const">User</span>.<span class="fn">new</span>.<span class="fn">log</span>(<span class="str">"created"</span>)  <span class="cm"># =&gt; [User] created</span>

<span class="kw">class</span> <span class="const">Admin</span>
  <span class="builtin">extend</span> <span class="const">Loggable</span>  <span class="cm"># class method</span>
<span class="kw">end</span>
<span class="const">Admin</span>.<span class="fn">log</span>(<span class="str">"initialized"</span>)  <span class="cm"># =&gt; [Admin] initialized</span></div>

                    <hr class="section-divider">

                    <!-- Duck Typing -->
                    <div class="philosophy-box">
                        If it walks like a duck and quacks like a duck, then it&rsquo;s a duck. &mdash; Ruby doesn&rsquo;t care about types. It cares about capabilities. If an object responds to the method you&rsquo;re calling, it works.
                    </div>

                    <div class="code-label">Duck Typing in Practice</div>
                    <div class="code-block"><span class="cm"># Ruby doesn't care about the class -- just the interface</span>
<span class="kw">def</span> <span class="fn">print_length</span>(obj)
  <span class="fn">puts</span> obj.<span class="fn">length</span>  <span class="cm"># works on String, Array, Hash...</span>
<span class="kw">end</span>

<span class="fn">print_length</span>(<span class="str">"hello"</span>)     <span class="cm"># =&gt; 5</span>
<span class="fn">print_length</span>([<span class="num">1</span>, <span class="num">2</span>, <span class="num">3</span>])   <span class="cm"># =&gt; 3</span>
<span class="fn">print_length</span>({<span class="sym">a:</span> <span class="num">1</span>})      <span class="cm"># =&gt; 1</span>

<span class="cm"># Check capability with respond_to?</span>
<span class="kw">def</span> <span class="fn">safe_length</span>(obj)
  obj.<span class="fn">respond_to?</span>(<span class="sym">:length</span>) ? obj.<span class="fn">length</span> : <span class="str">"N/A"</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Practical Patterns: Struct, Data, Comparable -->
                    <h3 class="mb-sm">Practical Patterns &mdash; Struct, Data, Comparable</h3>
                    <div class="concept-grid mb-lg">
                        <div class="concept-card">
                            <h4>Struct <span class="badge badge-ruby">Quick Classes</span></h4>
                            <div class="code-block"><span class="const">Point</span> <span class="op">=</span> <span class="const">Struct</span>.<span class="fn">new</span>(<span class="sym">:x</span>, <span class="sym">:y</span>)
p <span class="op">=</span> <span class="const">Point</span>.<span class="fn">new</span>(<span class="num">1</span>, <span class="num">2</span>)
p.x  <span class="cm"># =&gt; 1</span></div>
                            <p>Mutable. Auto-generates <span class="code-inline">==</span>, <span class="code-inline">to_a</span>, <span class="code-inline">members</span>.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Data <span class="badge badge-ruby">Ruby 3.2+</span></h4>
                            <div class="code-block"><span class="const">Point</span> <span class="op">=</span> <span class="const">Data</span>.<span class="fn">define</span>(<span class="sym">:x</span>, <span class="sym">:y</span>)
p <span class="op">=</span> <span class="const">Point</span>.<span class="fn">new</span>(<span class="sym">x:</span> <span class="num">1</span>, <span class="sym">y:</span> <span class="num">2</span>)
p.x  <span class="cm"># =&gt; 1 (frozen!)</span></div>
                            <p>Immutable. Keyword-only constructor. Preferred for value objects.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Comparable <span class="badge badge-gem">Mixin</span></h4>
                            <div class="code-block"><span class="kw">class</span> <span class="const">Box</span>
  <span class="builtin">include</span> <span class="const">Comparable</span>
  <span class="builtin">attr_accessor</span> <span class="sym">:volume</span>
  <span class="kw">def</span> <span class="fn">&lt;=&gt;</span>(other)
    volume <span class="op">&lt;=&gt;</span> other.volume
  <span class="kw">end</span>
<span class="kw">end</span></div>
                            <p>Define <span class="code-inline">&lt;=&gt;</span> and get <span class="code-inline">&lt;</span>, <span class="code-inline">&gt;</span>, <span class="code-inline">==</span>, <span class="code-inline">between?</span> for free.</p>
                        </div>
                    </div>

                    <div class="alert-gotcha">
                        <strong>Gotcha:</strong> Avoid <span class="code-inline">@@class_variables</span> &mdash; they&rsquo;re shared across the entire inheritance hierarchy, not just the defining class. Use class-level instance variables (<span class="code-inline">@var</span> inside <span class="code-inline">self</span> methods) instead.
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-07: METAPROGRAMMING ESSENTIALS
                 ============================================ -->
            <section class="section" id="metaprogramming">
                <div class="section-header">
                    <span class="section-number">R-07</span>
                    <h2 class="section-title">Metaprogramming Essentials</h2>
                    <p class="section-description">Metaprogramming is Ruby&rsquo;s superpower and its footgun. Code that writes code enables elegant DSLs like Rails&rsquo; ActiveRecord, but it can also create impenetrable spaghetti. Use it deliberately, sparingly, and always with tests.</p>
                </div>

                <div class="section-content">

                    <!-- method_missing + respond_to_missing? -->
                    <h3 class="mb-sm">method_missing + respond_to_missing?</h3>
                    <div class="code-label">Dynamic Method Dispatch</div>
                    <div class="code-block"><span class="kw">class</span> <span class="const">FlexibleConfig</span>
  <span class="kw">def</span> <span class="fn">initialize</span>
    <span class="ivar">@data</span> <span class="op">=</span> {}
  <span class="kw">end</span>

  <span class="kw">def</span> <span class="fn">method_missing</span>(name, <span class="op">*</span>args)
    <span class="kw">if</span> name.<span class="fn">to_s</span>.<span class="fn">end_with?</span>(<span class="str">"="</span>)
      <span class="ivar">@data</span>[name.<span class="fn">to_s</span>.<span class="fn">chomp</span>(<span class="str">"="</span>)] <span class="op">=</span> args.first
    <span class="kw">else</span>
      <span class="ivar">@data</span>[name.<span class="fn">to_s</span>]
    <span class="kw">end</span>
  <span class="kw">end</span>

  <span class="kw">def</span> <span class="fn">respond_to_missing?</span>(name, include_private <span class="op">=</span> <span class="kw">false</span>)
    <span class="kw">true</span>
  <span class="kw">end</span>
<span class="kw">end</span>

config <span class="op">=</span> <span class="const">FlexibleConfig</span>.<span class="fn">new</span>
config.database <span class="op">=</span> <span class="str">"myapp"</span>
config.database  <span class="cm"># =&gt; "myapp"</span></div>

                    <div class="alert-gotcha">
                        <strong>Gotcha:</strong> ALWAYS define <span class="code-inline">respond_to_missing?</span> alongside <span class="code-inline">method_missing</span>. Without it, <span class="code-inline">respond_to?</span> returns false even though the method works, breaking duck typing contracts.
                    </div>

                    <hr class="section-divider">

                    <!-- define_method -->
                    <h3 class="mb-sm">define_method</h3>
                    <div class="code-label">Generating Methods at Load Time</div>
                    <div class="code-block"><span class="kw">class</span> <span class="const">User</span>
  <span class="const">ROLES</span> <span class="op">=</span> [<span class="sym">:admin</span>, <span class="sym">:editor</span>, <span class="sym">:viewer</span>]

  <span class="const">ROLES</span>.<span class="fn">each</span> <span class="kw">do</span> |role|
    <span class="fn">define_method</span>(<span class="str">"#{role}?"</span>) <span class="kw">do</span>
      <span class="ivar">@role</span> <span class="op">==</span> role
    <span class="kw">end</span>
  <span class="kw">end</span>
<span class="kw">end</span>

user <span class="op">=</span> <span class="const">User</span>.<span class="fn">new</span>
user.<span class="fn">admin?</span>   <span class="cm"># dynamically defined method</span></div>

                    <hr class="section-divider">

                    <!-- Open Classes & Refinements -->
                    <h3 class="mb-sm">Open Classes &amp; Refinements</h3>
                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Do &mdash; Refinements (Safe Monkey Patching)</h4>
                            <div class="code-block"><span class="kw">module</span> <span class="const">StringExtensions</span>
  <span class="fn">refine</span> <span class="const">String</span> <span class="kw">do</span>
    <span class="kw">def</span> <span class="fn">shout</span>
      <span class="fn">upcase</span> <span class="op">+</span> <span class="str">"!!!"</span>
    <span class="kw">end</span>
  <span class="kw">end</span>
<span class="kw">end</span>

<span class="kw">using</span> <span class="const">StringExtensions</span>
<span class="str">"hello"</span>.<span class="fn">shout</span>  <span class="cm"># =&gt; "HELLO!!!"</span>
<span class="cm"># Only active in this file/scope</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Avoid &mdash; Monkey Patching</h4>
                            <div class="code-block"><span class="cm"># DON'T do this globally</span>
<span class="kw">class</span> <span class="const">String</span>
  <span class="kw">def</span> <span class="fn">shout</span>
    <span class="fn">upcase</span> <span class="op">+</span> <span class="str">"!!!"</span>
  <span class="kw">end</span>
<span class="kw">end</span>
<span class="cm"># Affects ALL strings everywhere</span>
<span class="cm"># Can break gems and core library</span></div>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Should I Metaprogram? Decision Flow -->
                    <h3 class="mb-sm">&ldquo;Should I Metaprogram?&rdquo; Decision Flow</h3>
                    <div class="decision-flow mb-lg">
                        <div class="flow-step">
                            <h5>Is the pattern repeated 3+ times?</h5>
                            <p>No &rarr; Write normal code. Don&rsquo;t over-engineer.</p>
                        </div>
                        <div class="flow-step">
                            <h5>Yes &mdash; Will a simple loop/array work?</h5>
                            <p>Yes &rarr; Use <span class="code-inline">.each</span> + <span class="code-inline">define_method</span>. Keep it simple.</p>
                        </div>
                        <div class="flow-step">
                            <h5>No &mdash; Do you need runtime flexibility?</h5>
                            <p>No &rarr; Generate code at load time with class-level loops.</p>
                        </div>
                        <div class="flow-step">
                            <h5>Yes &mdash; Are you building a DSL?</h5>
                            <p>Yes &rarr; Consider <span class="code-inline">instance_eval</span> / <span class="code-inline">class_eval</span>.</p>
                        </div>
                        <div class="flow-step">
                            <h5>No?</h5>
                            <p>Think twice. <span class="code-inline">method_missing</span> is usually overkill.</p>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- DSL Building Example -->
                    <h3 class="mb-sm">DSL Building Example</h3>
                    <div class="code-label">Building a Router DSL with instance_eval</div>
                    <div class="code-block"><span class="kw">class</span> <span class="const">Route</span>
  <span class="builtin">attr_reader</span> <span class="sym">:routes</span>

  <span class="kw">def</span> <span class="fn">initialize</span>(<span class="op">&amp;</span>block)
    <span class="ivar">@routes</span> <span class="op">=</span> []
    <span class="fn">instance_eval</span>(<span class="op">&amp;</span>block)
  <span class="kw">end</span>

  <span class="kw">def</span> <span class="fn">get</span>(path, <span class="sym">to:</span>)
    <span class="ivar">@routes</span> <span class="op">&lt;&lt;</span> { <span class="sym">method:</span> <span class="sym">:get</span>, <span class="sym">path:</span> path, <span class="sym">to:</span> to }
  <span class="kw">end</span>

  <span class="kw">def</span> <span class="fn">post</span>(path, <span class="sym">to:</span>)
    <span class="ivar">@routes</span> <span class="op">&lt;&lt;</span> { <span class="sym">method:</span> <span class="sym">:post</span>, <span class="sym">path:</span> path, <span class="sym">to:</span> to }
  <span class="kw">end</span>
<span class="kw">end</span>

routes <span class="op">=</span> <span class="const">Route</span>.<span class="fn">new</span> <span class="kw">do</span>
  get  <span class="str">"/users"</span>,     <span class="sym">to:</span> <span class="str">"users#index"</span>
  post <span class="str">"/users"</span>,     <span class="sym">to:</span> <span class="str">"users#create"</span>
  get  <span class="str">"/users/:id"</span>, <span class="sym">to:</span> <span class="str">"users#show"</span>
<span class="kw">end</span></div>

                    <div class="alert-tip">
                        <strong>Tip:</strong> Rails&rsquo; ActiveRecord is the canonical Ruby metaprogramming success story. <span class="code-inline">has_many :posts</span>, <span class="code-inline">validates :email, presence: true</span>, and <span class="code-inline">scope :active, -&gt; { where(active: true) }</span> are all metaprogramming &mdash; they read like configuration but generate methods behind the scenes.
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-08: ERROR HANDLING & DEBUGGING
                 ============================================ -->
            <section class="section" id="errors">
                <div class="section-header">
                    <span class="section-number">R-08</span>
                    <h2 class="section-title">Error Handling &amp; Debugging</h2>
                    <p class="section-description">Ruby&rsquo;s exception system is clean and predictable. The hierarchy matters: rescue StandardError (the default), not Exception. And when debugging, Pry turns your error into an interactive playground.</p>
                </div>

                <div class="section-content">

                    <!-- Exception Hierarchy -->
                    <h3 class="mb-sm">Exception Hierarchy</h3>
                    <div class="code-label">Ruby&rsquo;s Exception Class Tree</div>
                    <div class="code-block"><span class="const">Exception</span>
<span class="op">|--</span> <span class="const">NoMemoryError</span>
<span class="op">|--</span> <span class="const">ScriptError</span>
<span class="op">|</span>   <span class="op">|--</span> <span class="const">LoadError</span>
<span class="op">|</span>   <span class="op">`--</span> <span class="const">SyntaxError</span>
<span class="op">|--</span> <span class="const">SignalException</span>
<span class="op">|</span>   <span class="op">`--</span> <span class="const">Interrupt</span>
<span class="op">`--</span> <span class="const">StandardError</span>          <span class="cm">&larr; rescue catches this by default</span>
    <span class="op">|--</span> <span class="const">ArgumentError</span>
    <span class="op">|--</span> <span class="const">IOError</span>
    <span class="op">|--</span> <span class="const">NameError</span>
    <span class="op">|</span>   <span class="op">`--</span> <span class="const">NoMethodError</span>
    <span class="op">|--</span> <span class="const">RangeError</span>
    <span class="op">|--</span> <span class="const">RuntimeError</span>        <span class="cm">&larr; raised by 'raise "msg"'</span>
    <span class="op">|--</span> <span class="const">TypeError</span>
    <span class="op">|--</span> <span class="const">ZeroDivisionError</span>
    <span class="op">`--</span> <span class="const">StopIteration</span></div>

                    <div class="alert-gotcha">
                        <strong>Gotcha:</strong> NEVER <span class="code-inline">rescue Exception</span> &mdash; it catches Interrupt (Ctrl+C), NoMemoryError, and SyntaxError. Always rescue <span class="code-inline">StandardError</span> (the default) or a specific subclass.
                    </div>

                    <hr class="section-divider">

                    <!-- Full Pattern -->
                    <h3 class="mb-sm">The Full begin/rescue/else/ensure Pattern</h3>
                    <div class="code-label">Complete Error Handling Pattern</div>
                    <div class="code-block"><span class="kw">begin</span>
  file <span class="op">=</span> <span class="const">File</span>.<span class="fn">open</span>(<span class="str">"data.csv"</span>)
  data <span class="op">=</span> file.<span class="fn">read</span>
  <span class="fn">process</span>(data)
<span class="kw">rescue</span> <span class="const">Errno</span>::<span class="const">ENOENT</span> <span class="op">=&gt;</span> e
  <span class="fn">puts</span> <span class="str">"File not found: #{e.message}"</span>
<span class="kw">rescue</span> <span class="const">CSV</span>::<span class="const">MalformedCSVError</span> <span class="op">=&gt;</span> e
  <span class="fn">puts</span> <span class="str">"Bad CSV: #{e.message}"</span>
  <span class="kw">retry</span> <span class="kw">if</span> <span class="ivar">@retries</span> <span class="op">&lt;</span> <span class="num">3</span>  <span class="cm"># retry the begin block</span>
<span class="kw">rescue</span> <span class="const">StandardError</span> <span class="op">=&gt;</span> e
  <span class="fn">puts</span> <span class="str">"Unexpected: #{e.class} -- #{e.message}"</span>
  <span class="kw">raise</span>  <span class="cm"># re-raise after logging</span>
<span class="kw">else</span>
  <span class="fn">puts</span> <span class="str">"Success! No errors."</span>
<span class="kw">ensure</span>
  file<span class="op">&amp;.</span><span class="fn">close</span>  <span class="cm"># always runs (like finally)</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Rescue Patterns Table -->
                    <h3 class="mb-sm">Rescue Patterns Reference</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Pattern</th>
                                    <th>When to use</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">rescue SpecificError</span></td>
                                    <td>Known failure mode</td>
                                    <td><span class="code-inline">rescue ActiveRecord::RecordNotFound</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rescue =&gt; e</span></td>
                                    <td>Catch StandardError + inspect</td>
                                    <td><span class="code-inline">rescue =&gt; e; log(e)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">retry</span></td>
                                    <td>Transient failures</td>
                                    <td>Network timeouts, rate limits</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">raise</span> in rescue</td>
                                    <td>Re-raise after logging</td>
                                    <td><span class="code-inline">rescue =&gt; e; notify(e); raise</span></td>
                                </tr>
                                <tr>
                                    <td>Inline rescue</td>
                                    <td>Quick fallback (use sparingly)</td>
                                    <td><span class="code-inline">value = risky_call rescue default</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">ensure</span></td>
                                    <td>Cleanup (close files, connections)</td>
                                    <td>Always runs regardless of errors</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Good vs Bad Error Handling -->
                    <h3 class="mb-sm">Good vs Bad Error Handling</h3>
                    <div class="compare-grid mb-md">
                        <div class="compare-do">
                            <h4>Do &mdash; Rescue Specific Errors</h4>
                            <div class="code-block"><span class="cm"># Rescue specific errors</span>
<span class="kw">def</span> <span class="fn">fetch_user</span>(id)
  <span class="const">User</span>.<span class="fn">find</span>(id)
<span class="kw">rescue</span> <span class="const">ActiveRecord</span>::<span class="const">RecordNotFound</span>
  <span class="kw">nil</span>
<span class="kw">end</span>

<span class="cm"># Custom exceptions for your domain</span>
<span class="kw">class</span> <span class="const">InsufficientFundsError</span> <span class="op">&lt;</span> <span class="const">StandardError</span>; <span class="kw">end</span>

<span class="kw">def</span> <span class="fn">withdraw</span>(amount)
  <span class="kw">raise</span> <span class="const">InsufficientFundsError</span> <span class="kw">if</span> amount <span class="op">&gt;</span> balance
  <span class="ivar">@balance</span> <span class="op">-=</span> amount
<span class="kw">end</span></div>
                        </div>
                        <div class="compare-avoid">
                            <h4>Avoid &mdash; Silent or Overbroad Rescue</h4>
                            <div class="code-block"><span class="cm"># Too broad -- swallows everything</span>
<span class="kw">begin</span>
  do_something
<span class="kw">rescue</span>
  <span class="kw">nil</span>  <span class="cm"># silent failure!</span>
<span class="kw">end</span>

<span class="cm"># Rescuing Exception catches signals</span>
<span class="kw">begin</span>
  do_something
<span class="kw">rescue</span> <span class="const">Exception</span> <span class="op">=&gt;</span> e  <span class="cm"># catches Ctrl+C!</span>
  <span class="fn">log</span>(e)
<span class="kw">end</span></div>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Custom Exception -->
                    <h3 class="mb-sm">Custom Exception Classes</h3>
                    <div class="code-label">Domain-Specific Exception Hierarchy</div>
                    <div class="code-block"><span class="cm"># Define domain-specific exceptions</span>
<span class="kw">class</span> <span class="const">AppError</span> <span class="op">&lt;</span> <span class="const">StandardError</span>; <span class="kw">end</span>
<span class="kw">class</span> <span class="const">AuthenticationError</span> <span class="op">&lt;</span> <span class="const">AppError</span>; <span class="kw">end</span>
<span class="kw">class</span> <span class="const">AuthorizationError</span> <span class="op">&lt;</span> <span class="const">AppError</span>; <span class="kw">end</span>
<span class="kw">class</span> <span class="const">PaymentError</span> <span class="op">&lt;</span> <span class="const">AppError</span>
  <span class="builtin">attr_reader</span> <span class="sym">:code</span>
  <span class="kw">def</span> <span class="fn">initialize</span>(message, <span class="sym">code:</span> <span class="kw">nil</span>)
    <span class="kw">super</span>(message)
    <span class="ivar">@code</span> <span class="op">=</span> code
  <span class="kw">end</span>
<span class="kw">end</span>

<span class="kw">raise</span> <span class="const">PaymentError</span>.<span class="fn">new</span>(<span class="str">"Declined"</span>, <span class="sym">code:</span> <span class="str">"card_declined"</span>)</div>

                    <hr class="section-divider">

                    <!-- Debugging Tools -->
                    <h3 class="mb-sm">Debugging Tools</h3>
                    <div class="concept-grid mb-lg">
                        <div class="concept-card">
                            <h4>Pry <span class="badge badge-gem">Interactive REPL</span></h4>
                            <p>Drop <span class="code-inline">binding.pry</span> anywhere to open an interactive debugger.</p>
                            <ul>
                                <li><span class="code-inline">ls</span> &mdash; list methods/variables</li>
                                <li><span class="code-inline">cd</span> &mdash; step into objects</li>
                                <li><span class="code-inline">show-source</span> &mdash; view method source</li>
                                <li><span class="code-inline">whereami</span> &mdash; show current context</li>
                            </ul>
                        </div>
                        <div class="concept-card">
                            <h4>debug gem <span class="badge badge-ruby">Ruby 3.1+</span></h4>
                            <p>Built-in debugger, no gem install required.</p>
                            <ul>
                                <li><span class="code-inline">binding.break</span> or <span class="code-inline">debugger</span></li>
                                <li><span class="code-inline">step</span> / <span class="code-inline">next</span> / <span class="code-inline">continue</span></li>
                                <li><span class="code-inline">info</span> / <span class="code-inline">backtrace</span></li>
                                <li>Ships with Ruby &mdash; zero setup</li>
                            </ul>
                        </div>
                        <div class="concept-card">
                            <h4>puts debugging <span class="badge">Old Reliable</span></h4>
                            <p>Sometimes the simplest tool is the best one.</p>
                            <ul>
                                <li><span class="code-inline">puts variable.inspect</span></li>
                                <li><span class="code-inline">p variable</span> (shorthand for puts + inspect)</li>
                                <li><span class="code-inline">pp variable</span> (pretty print)</li>
                                <li><span class="code-inline">warn "debug: #{var}"</span> (goes to stderr)</li>
                            </ul>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Pry Cheat Sheet -->
                    <h3 class="mb-sm">Pry Cheat Sheet</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Command</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">binding.pry</span></td>
                                    <td>Insert breakpoint</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">ls</span></td>
                                    <td>List methods on current scope</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">ls SomeClass</span></td>
                                    <td>List methods on class</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">cd object</span></td>
                                    <td>Step into object context</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">cd ..</span></td>
                                    <td>Step back out</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">show-source method_name</span></td>
                                    <td>View source code</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">show-doc method_name</span></td>
                                    <td>View documentation</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">whereami</span></td>
                                    <td>Show surrounding code</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">wtf?</span></td>
                                    <td>Show last exception backtrace</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">exit</span></td>
                                    <td>Continue execution</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-09: GEMS & BUNDLER
                 ============================================ -->
            <div class="wave-divider"></div>

            <section class="section" id="gems">
                <div class="section-header">
                    <span class="section-number">R-09</span>
                    <h2 class="section-title">Gems &amp; Bundler</h2>
                    <p class="section-description">Gems are Ruby&rsquo;s package system &mdash; there are over 180,000 on RubyGems.org. Bundler manages your project&rsquo;s gem dependencies with a lockfile, ensuring consistent environments across development, CI, and production.</p>
                </div>

                <div class="section-content">

                    <!-- Bundler Workflow -->
                    <h3 class="mb-sm">Bundler Workflow</h3>
                    <div class="decision-flow mb-lg">
                        <div class="flow-step">
                            <h5><span class="code-inline">bundle init</span></h5>
                            <p>Creates a Gemfile</p>
                        </div>
                        <div class="flow-step">
                            <h5>Edit Gemfile</h5>
                            <p>Add your gems</p>
                        </div>
                        <div class="flow-step">
                            <h5><span class="code-inline">bundle install</span></h5>
                            <p>Downloads gems, creates Gemfile.lock</p>
                        </div>
                        <div class="flow-step">
                            <h5><span class="code-inline">bundle exec</span></h5>
                            <p>Run commands in bundle context</p>
                        </div>
                        <div class="flow-step">
                            <h5>Commit both files</h5>
                            <p>Commit both Gemfile AND Gemfile.lock</p>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Gemfile Syntax -->
                    <h3 class="mb-sm">Gemfile Syntax</h3>
                    <div class="code-label">Gemfile &mdash; Declaring Dependencies</div>
                    <div class="code-block"><span class="fn">source</span> <span class="str">"https://rubygems.org"</span>

<span class="fn">ruby</span> <span class="str">"3.3.0"</span>

<span class="cm"># Main dependencies</span>
<span class="fn">gem</span> <span class="str">"rails"</span>, <span class="str">"~&gt; 8.0"</span>
<span class="fn">gem</span> <span class="str">"puma"</span>, <span class="str">"&gt;= 6.0"</span>
<span class="fn">gem</span> <span class="str">"propshaft"</span>

<span class="cm"># Groups</span>
<span class="fn">group</span> <span class="sym">:development</span>, <span class="sym">:test</span> <span class="kw">do</span>
  <span class="fn">gem</span> <span class="str">"rspec-rails"</span>
  <span class="fn">gem</span> <span class="str">"factory_bot_rails"</span>
  <span class="fn">gem</span> <span class="str">"pry-rails"</span>
<span class="kw">end</span>

<span class="fn">group</span> <span class="sym">:development</span> <span class="kw">do</span>
  <span class="fn">gem</span> <span class="str">"rubocop"</span>, <span class="fn">require</span>: <span class="kw">false</span>
  <span class="fn">gem</span> <span class="str">"solargraph"</span>, <span class="fn">require</span>: <span class="kw">false</span>
<span class="kw">end</span>

<span class="fn">group</span> <span class="sym">:production</span> <span class="kw">do</span>
  <span class="fn">gem</span> <span class="str">"redis"</span>
  <span class="fn">gem</span> <span class="str">"sidekiq"</span>
<span class="kw">end</span>

<span class="cm"># Git source</span>
<span class="fn">gem</span> <span class="str">"my_engine"</span>, <span class="fn">git</span>: <span class="str">"https://github.com/org/engine.git"</span>, <span class="fn">branch</span>: <span class="str">"main"</span></div>

                    <hr class="section-divider">

                    <!-- Version Constraints -->
                    <h3 class="mb-sm">Version Constraints</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Operator</th>
                                    <th>Meaning</th>
                                    <th>Example</th>
                                    <th>Matches</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">=</span></td>
                                    <td>Exact</td>
                                    <td><span class="code-inline">gem "rails", "= 8.0.0"</span></td>
                                    <td>Only 8.0.0</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">&gt;=</span></td>
                                    <td>Minimum</td>
                                    <td><span class="code-inline">gem "puma", "&gt;= 6.0"</span></td>
                                    <td>6.0, 6.1, 7.0...</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">~&gt;</span></td>
                                    <td>Pessimistic (recommended)</td>
                                    <td><span class="code-inline">gem "rails", "~&gt; 8.0"</span></td>
                                    <td>&gt;= 8.0, &lt; 9.0</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">~&gt;</span></td>
                                    <td>Patch-level</td>
                                    <td><span class="code-inline">gem "pg", "~&gt; 1.5.4"</span></td>
                                    <td>&gt;= 1.5.4, &lt; 1.6</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">&gt;=, &lt;</span></td>
                                    <td>Range</td>
                                    <td><span class="code-inline">gem "ruby-lsp", "&gt;= 0.5", "&lt; 1.0"</span></td>
                                    <td>0.5 to 0.99</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Essential Gems -->
                    <h3 class="mb-sm">Essential Gems</h3>
                    <div class="concept-grid mb-lg">
                        <div class="concept-card">
                            <h4>Rails</h4>
                            <p>Full-stack web framework. The Ruby ecosystem&rsquo;s center of gravity.</p>
                        </div>
                        <div class="concept-card">
                            <h4>RSpec</h4>
                            <p>BDD testing framework. The most popular way to test Ruby.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Puma</h4>
                            <p>Multi-threaded web server. Default for Rails.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Sidekiq</h4>
                            <p>Background job processor. Redis-backed, battle-tested.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Devise</h4>
                            <p>Authentication. Handles login, registration, password resets.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Pundit</h4>
                            <p>Authorization. Policy objects for clean access control.</p>
                        </div>
                        <div class="concept-card">
                            <h4>RuboCop</h4>
                            <p>Linter + formatter. Enforces style guide rules.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Pry</h4>
                            <p>Enhanced REPL and debugger. Drop-in IRB replacement.</p>
                        </div>
                        <div class="concept-card">
                            <h4>FactoryBot</h4>
                            <p>Test data generator. Replaces fixtures for most teams.</p>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Bundle Commands -->
                    <h3 class="mb-sm">Bundle Commands</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Command</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">bundle init</span></td>
                                    <td>Create new Gemfile</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle install</span></td>
                                    <td>Install gems from Gemfile</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle update GEM</span></td>
                                    <td>Update specific gem</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle update</span></td>
                                    <td>Update all gems (careful!)</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle exec CMD</span></td>
                                    <td>Run command in bundle context</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle add GEM</span></td>
                                    <td>Add gem to Gemfile + install</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle outdated</span></td>
                                    <td>List gems with newer versions</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle info GEM</span></td>
                                    <td>Show gem details and path</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle open GEM</span></td>
                                    <td>Open gem source in editor</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">bundle audit</span></td>
                                    <td>Security vulnerability check (gem install bundler-audit)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Gemfile.lock Tip -->
                    <div class="alert-tip">
                        <strong>Tip:</strong> Always commit your Gemfile.lock. It ensures every developer and CI run uses the exact same gem versions. The only exception: gem libraries (not apps) should NOT commit Gemfile.lock.
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-10: TESTING
                 ============================================ -->
            <div class="wave-divider"></div>

            <section class="section" id="testing">
                <div class="section-header">
                    <span class="section-number">R-10</span>
                    <h2 class="section-title">Testing with RSpec &amp; Minitest</h2>
                    <p class="section-description">Ruby has a strong testing culture &mdash; &ldquo;if it&rsquo;s not tested, it&rsquo;s broken&rdquo; is the community ethos. RSpec dominates Rails projects with its expressive DSL, while Minitest ships with Ruby for a lightweight alternative.</p>
                </div>

                <div class="section-content">

                    <!-- RSpec vs Minitest -->
                    <h3 class="mb-sm">RSpec vs Minitest</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>RSpec</th>
                                    <th>Minitest</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Style</td>
                                    <td>BDD / describe blocks</td>
                                    <td>xUnit / def test_ or spec</td>
                                </tr>
                                <tr>
                                    <td>Ships with Ruby</td>
                                    <td>No (gem)</td>
                                    <td>Yes (stdlib)</td>
                                </tr>
                                <tr>
                                    <td>DSL complexity</td>
                                    <td>Rich (describe, context, let)</td>
                                    <td>Minimal</td>
                                </tr>
                                <tr>
                                    <td>Community share</td>
                                    <td>~75% of Rails apps</td>
                                    <td>~25%</td>
                                </tr>
                                <tr>
                                    <td>Mocking built-in</td>
                                    <td>Yes (doubles, stubs)</td>
                                    <td>Yes (basic)</td>
                                </tr>
                                <tr>
                                    <td>Matchers</td>
                                    <td>30+ built-in</td>
                                    <td>assert_* methods</td>
                                </tr>
                                <tr>
                                    <td>Speed</td>
                                    <td>Slightly slower</td>
                                    <td>Slightly faster</td>
                                </tr>
                                <tr>
                                    <td>Best for</td>
                                    <td>Rails apps, team projects</td>
                                    <td>Libraries, minimal deps</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- RSpec Anatomy -->
                    <h3 class="mb-sm">RSpec Anatomy</h3>
                    <div class="code-label">RSpec &mdash; Describe, Context, It</div>
                    <div class="code-block"><span class="const">RSpec</span>.describe <span class="const">User</span> <span class="kw">do</span>
  <span class="cm"># let = lazy-loaded variable</span>
  <span class="fn">let</span>(<span class="sym">:user</span>) { <span class="const">User</span>.<span class="kw">new</span>(<span class="fn">name</span>: <span class="str">"Matz"</span>, <span class="fn">email</span>: <span class="str">"matz@ruby.org"</span>) }

  <span class="cm"># subject = the thing being tested</span>
  <span class="fn">subject</span> { user }

  <span class="cm"># before = setup</span>
  <span class="fn">before</span> { user.activate! }

  <span class="fn">describe</span> <span class="str">"#display_name"</span> <span class="kw">do</span>
    <span class="fn">it</span> <span class="str">"returns formatted name"</span> <span class="kw">do</span>
      <span class="fn">expect</span>(user.display_name).to <span class="fn">eq</span>(<span class="str">"Matz &lt;matz@ruby.org&gt;"</span>)
    <span class="kw">end</span>

    <span class="fn">context</span> <span class="str">"when name is nil"</span> <span class="kw">do</span>
      <span class="fn">let</span>(<span class="sym">:user</span>) { <span class="const">User</span>.<span class="kw">new</span>(<span class="fn">name</span>: <span class="kw">nil</span>, <span class="fn">email</span>: <span class="str">"matz@ruby.org"</span>) }

      <span class="fn">it</span> <span class="str">"falls back to email"</span> <span class="kw">do</span>
        <span class="fn">expect</span>(user.display_name).to <span class="fn">eq</span>(<span class="str">"matz@ruby.org"</span>)
      <span class="kw">end</span>
    <span class="kw">end</span>
  <span class="kw">end</span>

  <span class="fn">describe</span> <span class="str">".active"</span> <span class="kw">do</span>
    <span class="fn">it</span> <span class="str">"returns only active users"</span> <span class="kw">do</span>
      active <span class="op">=</span> <span class="const">User</span>.create!(<span class="fn">name</span>: <span class="str">"A"</span>, <span class="fn">active</span>: <span class="kw">true</span>)
      <span class="const">User</span>.create!(<span class="fn">name</span>: <span class="str">"B"</span>, <span class="fn">active</span>: <span class="kw">false</span>)

      <span class="fn">expect</span>(<span class="const">User</span>.active).to <span class="fn">contain_exactly</span>(active)
    <span class="kw">end</span>
  <span class="kw">end</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- Common RSpec Matchers -->
                    <h3 class="mb-sm">Common RSpec Matchers</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Matcher</th>
                                    <th>Tests</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">eq</span></td>
                                    <td>Equality</td>
                                    <td><span class="code-inline">expect(x).to eq(5)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">be</span></td>
                                    <td>Identity</td>
                                    <td><span class="code-inline">expect(x).to be(true)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">be_nil</span></td>
                                    <td>Nil check</td>
                                    <td><span class="code-inline">expect(x).to be_nil</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">be_truthy</span> / <span class="code-inline">be_falsey</span></td>
                                    <td>Truthiness</td>
                                    <td><span class="code-inline">expect(x).to be_truthy</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">include</span></td>
                                    <td>Containment</td>
                                    <td><span class="code-inline">expect([1,2]).to include(1)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">match_array</span></td>
                                    <td>Array (any order)</td>
                                    <td><span class="code-inline">expect(a).to match_array([2,1])</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">have_attributes</span></td>
                                    <td>Object attrs</td>
                                    <td><span class="code-inline">expect(u).to have_attributes(name: "Matz")</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">raise_error</span></td>
                                    <td>Exceptions</td>
                                    <td><span class="code-inline">expect { x }.to raise_error(TypeError)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">change</span></td>
                                    <td>State change</td>
                                    <td><span class="code-inline">expect { u.save }.to change(User, :count).by(1)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">respond_to</span></td>
                                    <td>Method exists</td>
                                    <td><span class="code-inline">expect(u).to respond_to(:name)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">be_a</span> / <span class="code-inline">be_an</span></td>
                                    <td>Type check</td>
                                    <td><span class="code-inline">expect(x).to be_a(String)</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">start_with</span> / <span class="code-inline">end_with</span></td>
                                    <td>String/array</td>
                                    <td><span class="code-inline">expect("hello").to start_with("hel")</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">match</span></td>
                                    <td>Regex</td>
                                    <td><span class="code-inline">expect(s).to match(/\d+/)</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Mocking & Stubbing -->
                    <h3 class="mb-sm">Mocking &amp; Stubbing</h3>
                    <div class="code-label">Test Doubles, Stubs &amp; Expectations</div>
                    <div class="code-block"><span class="cm"># Test doubles</span>
<span class="fn">let</span>(<span class="sym">:mailer</span>) { <span class="fn">instance_double</span>(<span class="const">UserMailer</span>) }

<span class="cm"># Stubbing</span>
<span class="fn">allow</span>(<span class="const">UserMailer</span>).to <span class="fn">receive</span>(<span class="sym">:welcome</span>).and_return(mailer)
<span class="fn">allow</span>(mailer).to <span class="fn">receive</span>(<span class="sym">:deliver_later</span>)

<span class="cm"># Expectations (verify it was called)</span>
<span class="fn">expect</span>(<span class="const">UserMailer</span>).to <span class="fn">have_received</span>(<span class="sym">:welcome</span>).with(user)

<span class="cm"># Spy pattern</span>
mailer <span class="op">=</span> <span class="fn">spy</span>(<span class="str">"mailer"</span>)
user.send_welcome(mailer)
<span class="fn">expect</span>(mailer).to <span class="fn">have_received</span>(<span class="sym">:deliver</span>)</div>

                    <hr class="section-divider">

                    <!-- Same Test in Both Frameworks -->
                    <h3 class="mb-sm">Same Test in Both Frameworks</h3>
                    <div class="compare-grid mb-lg">
                        <div class="compare-do">
                            <div class="compare-label">RSpec</div>
                            <div class="code-block"><span class="const">RSpec</span>.describe <span class="const">Calculator</span> <span class="kw">do</span>
  <span class="fn">describe</span> <span class="str">"#add"</span> <span class="kw">do</span>
    <span class="fn">it</span> <span class="str">"sums two numbers"</span> <span class="kw">do</span>
      calc <span class="op">=</span> <span class="const">Calculator</span>.<span class="kw">new</span>
      <span class="fn">expect</span>(calc.add(<span class="num">2</span>, <span class="num">3</span>)).to <span class="fn">eq</span>(<span class="num">5</span>)
    <span class="kw">end</span>
  <span class="kw">end</span>
<span class="kw">end</span></div>
                        </div>
                        <div class="compare-avoid">
                            <div class="compare-label">Minitest</div>
                            <div class="code-block"><span class="kw">class</span> <span class="const">CalculatorTest</span> <span class="op">&lt;</span> <span class="const">Minitest</span>::<span class="const">Test</span>
  <span class="kw">def</span> <span class="fn">test_add_sums_two_numbers</span>
    calc <span class="op">=</span> <span class="const">Calculator</span>.<span class="kw">new</span>
    <span class="fn">assert_equal</span> <span class="num">5</span>, calc.add(<span class="num">2</span>, <span class="num">3</span>)
  <span class="kw">end</span>
<span class="kw">end</span></div>
                        </div>
                    </div>

                    <!-- Rails Testing Tip -->
                    <div class="alert-rails">
                        <strong>Rails:</strong> Rails testing layers: Model specs test business logic. Request specs test API endpoints (replace controller specs). System specs test browser interaction with Capybara. Use FactoryBot over fixtures for test data &mdash; it&rsquo;s more maintainable.
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-11: RUBY TOOLING
                 ============================================ -->
            <div class="wave-divider"></div>

            <section class="section" id="tooling">
                <div class="section-header">
                    <span class="section-number">R-11</span>
                    <h2 class="section-title">Ruby Tooling &amp; Environment</h2>
                    <p class="section-description">A well-configured Ruby development environment starts with a version manager and expands to include a powerful REPL, linter, language server, and task runner. Ruby 3.3+ with YJIT enabled delivers impressive performance.</p>
                </div>

                <div class="section-content">

                    <!-- Version Managers -->
                    <h3 class="mb-sm">Version Managers</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Tool</th>
                                    <th>Approach</th>
                                    <th>Shell integration</th>
                                    <th>Multiple languages</th>
                                    <th>Recommendation</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">rbenv</span></td>
                                    <td>Shims + plugins</td>
                                    <td>Lightweight</td>
                                    <td>Ruby only</td>
                                    <td>Best for Ruby-only devs</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rvm</span></td>
                                    <td>Function override</td>
                                    <td>Heavy (modifies shell)</td>
                                    <td>Ruby only</td>
                                    <td>Legacy, avoid for new setups</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">asdf</span></td>
                                    <td>Plugin-based</td>
                                    <td>Moderate</td>
                                    <td>Ruby, Node, Python, etc.</td>
                                    <td>Best for polyglot devs</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">mise</span> (formerly rtx)</td>
                                    <td>Rust-based, fast</td>
                                    <td>Minimal</td>
                                    <td>All languages</td>
                                    <td>Newest, fastest</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- IRB vs Pry -->
                    <h3 class="mb-sm">IRB vs Pry</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Feature</th>
                                    <th>IRB (built-in)</th>
                                    <th>Pry (gem)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Ships with Ruby</td>
                                    <td>Yes</td>
                                    <td>No (gem install)</td>
                                </tr>
                                <tr>
                                    <td>Syntax highlighting</td>
                                    <td>Yes (Ruby 3.1+)</td>
                                    <td>Yes</td>
                                </tr>
                                <tr>
                                    <td>Tab completion</td>
                                    <td>Basic</td>
                                    <td>Advanced</td>
                                </tr>
                                <tr>
                                    <td>Step into objects</td>
                                    <td>No</td>
                                    <td>Yes (<span class="code-inline">cd object</span>)</td>
                                </tr>
                                <tr>
                                    <td>Source viewing</td>
                                    <td>No</td>
                                    <td>Yes (<span class="code-inline">show-source</span>)</td>
                                </tr>
                                <tr>
                                    <td>Debugger integration</td>
                                    <td>Via debug gem</td>
                                    <td>Built-in (<span class="code-inline">binding.pry</span>)</td>
                                </tr>
                                <tr>
                                    <td>Plugin ecosystem</td>
                                    <td>Limited</td>
                                    <td>Rich (pry-byebug, etc.)</td>
                                </tr>
                                <tr>
                                    <td>Auto-indent</td>
                                    <td>Yes</td>
                                    <td>Yes</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Ruby CLI Flags -->
                    <h3 class="mb-sm">Ruby CLI Flags</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Flag</th>
                                    <th>Purpose</th>
                                    <th>Example</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">-e</span></td>
                                    <td>Execute one-liner</td>
                                    <td><span class="code-inline">ruby -e 'puts 2 + 2'</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">-w</span></td>
                                    <td>Enable warnings</td>
                                    <td><span class="code-inline">ruby -w script.rb</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">-c</span></td>
                                    <td>Syntax check only</td>
                                    <td><span class="code-inline">ruby -c script.rb</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">-v</span></td>
                                    <td>Print version + verbose</td>
                                    <td><span class="code-inline">ruby -v</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">--yjit</span></td>
                                    <td>Enable YJIT JIT compiler</td>
                                    <td><span class="code-inline">ruby --yjit app.rb</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">-r</span></td>
                                    <td>Require library before run</td>
                                    <td><span class="code-inline">ruby -rjson -e 'puts JSON.parse("{}")'</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">-I</span></td>
                                    <td>Add to load path</td>
                                    <td><span class="code-inline">ruby -Ilib script.rb</span></td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">-n</span></td>
                                    <td>Line-by-line processing</td>
                                    <td><span class="code-inline">ruby -ne 'puts $_.upcase'</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- YJIT Tip -->
                    <div class="alert-tip">
                        <strong>Tip:</strong> YJIT (Yet another Ruby JIT) in Ruby 3.3 delivers 15&ndash;25% speedup on real-world Rails apps. Enable it with <span class="code-inline">--yjit</span> flag or <span class="code-inline">RUBY_YJIT_ENABLE=1</span>. It&rsquo;s production-ready and used by Shopify at scale.
                    </div>

                    <hr class="section-divider">

                    <!-- Rake -->
                    <h3 class="mb-sm">Rake</h3>
                    <div class="code-label">Rakefile &mdash; Ruby&rsquo;s Make</div>
                    <div class="code-block"><span class="cm"># Rakefile</span>
<span class="fn">namespace</span> <span class="sym">:db</span> <span class="kw">do</span>
  <span class="fn">desc</span> <span class="str">"Seed the database"</span>
  <span class="fn">task</span> <span class="sym">seed:</span> <span class="sym">:environment</span> <span class="kw">do</span>
    <span class="fn">puts</span> <span class="str">"Seeding..."</span>
    <span class="const">User</span>.create!(<span class="fn">name</span>: <span class="str">"Admin"</span>, <span class="fn">role</span>: <span class="sym">:admin</span>)
    <span class="fn">puts</span> <span class="str">"Done!"</span>
  <span class="kw">end</span>

  <span class="fn">desc</span> <span class="str">"Reset and re-seed"</span>
  <span class="fn">task</span> <span class="sym">reset:</span> [<span class="sym">:drop</span>, <span class="sym">:create</span>, <span class="sym">:migrate</span>, <span class="sym">:seed</span>]
<span class="kw">end</span>

<span class="cm"># Custom task</span>
<span class="fn">task</span> <span class="sym">:stats</span> <span class="kw">do</span>
  <span class="fn">puts</span> <span class="str">"Models: #{Dir['app/models/*.rb'].count}"</span>
  <span class="fn">puts</span> <span class="str">"Tests:  #{Dir['spec/**/*_spec.rb'].count}"</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- RuboCop Configuration -->
                    <h3 class="mb-sm">RuboCop Configuration</h3>
                    <div class="code-label">.rubocop.yml &mdash; Linter Rules</div>
                    <div class="code-block"><span class="cm"># .rubocop.yml</span>
<span class="const">AllCops</span>:
  <span class="fn">TargetRubyVersion</span>: <span class="num">3.3</span>
  <span class="fn">NewCops</span>: enable
  <span class="fn">Exclude</span>:
    <span class="op">-</span> <span class="str">'db/schema.rb'</span>
    <span class="op">-</span> <span class="str">'vendor/**/*'</span>

<span class="const">Style</span>/<span class="const">FrozenStringLiteralComment</span>:
  <span class="fn">Enabled</span>: <span class="kw">true</span>

<span class="const">Metrics</span>/<span class="const">MethodLength</span>:
  <span class="fn">Max</span>: <span class="num">15</span>

<span class="const">Layout</span>/<span class="const">LineLength</span>:
  <span class="fn">Max</span>: <span class="num">120</span></div>

                    <!-- Solargraph Tip -->
                    <div class="alert-tip">
                        <strong>Tip:</strong> Solargraph provides LSP (Language Server Protocol) support for Ruby &mdash; autocomplete, go-to-definition, hover docs, and diagnostics in any editor. Install with <span class="code-inline">gem install solargraph</span> and configure your editor&rsquo;s LSP client.
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 R-12: RAILS ESSENTIALS
                 ============================================ -->
            <div class="wave-divider"></div>

            <section class="section" id="rails">
                <div class="section-header">
                    <span class="section-number">R-12</span>
                    <h2 class="section-title">Rails Essentials</h2>
                    <p class="section-description">Ruby on Rails is the framework that made Ruby famous. Rails 8 doubles down on the &ldquo;one person framework&rdquo; vision with built-in authentication, deployment with Kamal, and the Solid family replacing external dependencies.</p>
                </div>

                <div class="section-content">

                    <!-- MVC Request Flow -->
                    <h3 class="mb-sm">MVC Request Flow</h3>
                    <div class="code-label">How a Request Flows Through Rails</div>
                    <div class="code-block">Browser Request
    &darr;
  <span class="const">Router</span>  &rarr;  routes.rb maps URL to controller#action
    &darr;
<span class="const">Controller</span> &rarr;  Handles request, calls models
    &darr;
  <span class="const">Model</span>   &rarr;  <span class="const">ActiveRecord</span>: DB queries, validations, logic
    &darr;
<span class="const">Controller</span> &rarr;  Sets instance variables for view
    &darr;
  <span class="const">View</span>    &rarr;  ERB template renders HTML
    &darr;
  Response sent to browser</div>

                    <hr class="section-divider">

                    <!-- rails new -->
                    <h3 class="mb-sm">Creating a New Rails App</h3>
                    <div class="code-label">rails new &mdash; Project Generation</div>
                    <div class="code-block"><span class="cm"># Rails 8 with modern defaults</span>
rails new myapp              <span class="cm"># SQLite + Propshaft + Puma</span>
rails new myapp -d postgresql <span class="cm"># PostgreSQL</span>
rails new myapp --api         <span class="cm"># API-only (no views)</span>
rails new myapp -T            <span class="cm"># Skip Minitest (use RSpec)</span>
rails new myapp --css tailwind <span class="cm"># Tailwind CSS</span></div>

                    <hr class="section-divider">

                    <!-- Routing -->
                    <h3 class="mb-sm">Routing</h3>
                    <div class="code-label">config/routes.rb &mdash; URL Mapping</div>
                    <div class="code-block"><span class="cm"># config/routes.rb</span>
<span class="const">Rails</span>.application.routes.draw <span class="kw">do</span>
  <span class="fn">root</span> <span class="str">"pages#home"</span>

  <span class="cm"># RESTful resources</span>
  <span class="fn">resources</span> <span class="sym">:users</span> <span class="kw">do</span>
    <span class="fn">resources</span> <span class="sym">:posts</span>, <span class="fn">only</span>: [<span class="sym">:index</span>, <span class="sym">:create</span>]
  <span class="kw">end</span>

  <span class="cm"># Custom routes</span>
  <span class="fn">get</span>  <span class="str">"about"</span>, <span class="fn">to</span>: <span class="str">"pages#about"</span>
  <span class="fn">post</span> <span class="str">"login"</span>, <span class="fn">to</span>: <span class="str">"sessions#create"</span>

  <span class="cm"># Namespace</span>
  <span class="fn">namespace</span> <span class="sym">:api</span> <span class="kw">do</span>
    <span class="fn">namespace</span> <span class="sym">:v1</span> <span class="kw">do</span>
      <span class="fn">resources</span> <span class="sym">:articles</span>, <span class="fn">only</span>: [<span class="sym">:index</span>, <span class="sym">:show</span>]
    <span class="kw">end</span>
  <span class="kw">end</span>

  <span class="cm"># Health check (Rails 8)</span>
  <span class="fn">get</span> <span class="str">"up"</span>, <span class="fn">to</span>: <span class="str">"rails/health#show"</span>, <span class="fn">as</span>: <span class="sym">:rails_health_check</span>
<span class="kw">end</span></div>

                    <hr class="section-divider">

                    <!-- ActiveRecord Essentials -->
                    <h3 class="mb-sm">ActiveRecord Essentials</h3>
                    <div class="code-label">Models &mdash; Associations, Validations, Scopes</div>
                    <div class="code-block"><span class="kw">class</span> <span class="const">User</span> <span class="op">&lt;</span> <span class="const">ApplicationRecord</span>
  <span class="cm"># Associations</span>
  <span class="fn">has_many</span> <span class="sym">:posts</span>, <span class="fn">dependent</span>: <span class="sym">:destroy</span>
  <span class="fn">has_one</span> <span class="sym">:profile</span>
  <span class="fn">belongs_to</span> <span class="sym">:team</span>
  <span class="fn">has_many</span> <span class="sym">:comments</span>, <span class="fn">through</span>: <span class="sym">:posts</span>

  <span class="cm"># Validations</span>
  <span class="fn">validates</span> <span class="sym">:email</span>, <span class="fn">presence</span>: <span class="kw">true</span>, <span class="fn">uniqueness</span>: <span class="kw">true</span>
  <span class="fn">validates</span> <span class="sym">:name</span>, <span class="fn">length</span>: { <span class="fn">minimum</span>: <span class="num">2</span>, <span class="fn">maximum</span>: <span class="num">50</span> }

  <span class="cm"># Scopes</span>
  <span class="fn">scope</span> <span class="sym">:active</span>, <span class="op">-&gt;</span> { <span class="fn">where</span>(<span class="fn">active</span>: <span class="kw">true</span>) }
  <span class="fn">scope</span> <span class="sym">:recent</span>, <span class="op">-&gt;</span> { <span class="fn">order</span>(<span class="fn">created_at</span>: <span class="sym">:desc</span>).limit(<span class="num">10</span>) }
  <span class="fn">scope</span> <span class="sym">:admins</span>, <span class="op">-&gt;</span> { <span class="fn">where</span>(<span class="fn">role</span>: <span class="str">"admin"</span>) }

  <span class="cm"># Callbacks</span>
  <span class="fn">before_save</span> <span class="sym">:normalize_email</span>

  <span class="kw">private</span>

  <span class="kw">def</span> <span class="fn">normalize_email</span>
    <span class="kw">self</span>.email <span class="op">=</span> email.downcase.strip
  <span class="kw">end</span>
<span class="kw">end</span>

<span class="cm"># Queries</span>
<span class="const">User</span>.<span class="fn">where</span>(<span class="fn">active</span>: <span class="kw">true</span>).<span class="fn">order</span>(<span class="sym">:name</span>)
<span class="const">User</span>.<span class="fn">find_by</span>(<span class="fn">email</span>: <span class="str">"matz@ruby.org"</span>)
<span class="const">User</span>.<span class="fn">includes</span>(<span class="sym">:posts</span>).<span class="fn">where</span>(<span class="fn">posts</span>: { <span class="fn">published</span>: <span class="kw">true</span> })
<span class="const">User</span>.active.recent.count</div>

                    <hr class="section-divider">

                    <!-- Rails Commands -->
                    <h3 class="mb-sm">Rails Commands</h3>
                    <div class="table-wrapper mb-lg">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Command</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span class="code-inline">rails new APP</span></td>
                                    <td>Create new app</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails server</span> / <span class="code-inline">rails s</span></td>
                                    <td>Start dev server</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails console</span> / <span class="code-inline">rails c</span></td>
                                    <td>Interactive console</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails generate model NAME</span></td>
                                    <td>Generate model + migration</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails generate controller NAME</span></td>
                                    <td>Generate controller</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails generate migration NAME</span></td>
                                    <td>Generate migration</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails db:migrate</span></td>
                                    <td>Run pending migrations</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails db:rollback</span></td>
                                    <td>Undo last migration</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails db:seed</span></td>
                                    <td>Run db/seeds.rb</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails routes</span></td>
                                    <td>Show all routes</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails credentials:edit</span></td>
                                    <td>Edit encrypted credentials</td>
                                </tr>
                                <tr>
                                    <td><span class="code-inline">rails generate authentication</span></td>
                                    <td>Generate auth system (Rails 8)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <hr class="section-divider">

                    <!-- Rails 8 Features -->
                    <h3 class="mb-sm">Rails 8 Features</h3>
                    <div class="concept-grid mb-lg">
                        <div class="concept-card">
                            <h4>Kamal 2</h4>
                            <p>Deploy to any VPS with zero-downtime deploys. Built-in to Rails 8. No PaaS required.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Solid Queue</h4>
                            <p>Database-backed job backend. Replaces Redis + Sidekiq for most apps.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Solid Cache</h4>
                            <p>Database-backed cache store. One less infrastructure dependency.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Solid Cable</h4>
                            <p>Database-backed Action Cable adapter. WebSockets without Redis.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Propshaft</h4>
                            <p>Modern asset pipeline. Replaces Sprockets. Fingerprinting + load paths only.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Thruster</h4>
                            <p>HTTP/2 proxy in front of Puma. Asset compression + caching built-in.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Authentication Generator</h4>
                            <p><span class="code-inline">rails generate authentication</span> creates a complete auth system.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Kamal Proxy</h4>
                            <p>Zero-downtime deploy proxy. Handles SSL, routing, health checks.</p>
                        </div>
                        <div class="concept-card">
                            <h4>No PaaS Required</h4>
                            <p>Rails 8&rsquo;s motto: deploy to a $5 VPS and scale from there.</p>
                        </div>
                    </div>

                    <hr class="section-divider">

                    <!-- Hotwire Stack -->
                    <h3 class="mb-sm">Hotwire Stack</h3>
                    <div class="concept-grid concept-grid-2 mb-lg">
                        <div class="concept-card">
                            <h4>Turbo Drive</h4>
                            <p>Intercepts link clicks and form submissions, swaps <span class="code-inline">&lt;body&gt;</span> content via AJAX. No full page reloads. Zero JavaScript required.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Turbo Frames</h4>
                            <p>Decompose pages into independently-updating frames. Click a link inside a frame, only that frame updates.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Turbo Streams</h4>
                            <p>Deliver partial page updates over WebSocket or HTTP. Append, prepend, replace, remove DOM elements from the server.</p>
                        </div>
                        <div class="concept-card">
                            <h4>Stimulus</h4>
                            <p>Modest JavaScript framework. Attach behavior to HTML with <span class="code-inline">data-controller</span>, <span class="code-inline">data-action</span>, <span class="code-inline">data-target</span> attributes.</p>
                        </div>
                    </div>

                    <!-- Convention over Configuration -->
                    <div class="philosophy-box">
                        Convention over Configuration &mdash; Rails makes decisions for you so you can focus on building your product. Default project structure, naming conventions, and sensible defaults mean less bikeshedding and more shipping.
                    </div>

                    <!-- Rails 8 Vision -->
                    <div class="alert-rails">
                        <strong>Rails:</strong> Rails 8&rsquo;s &ldquo;one person framework&rdquo; vision means a solo developer can build, deploy, and operate a production web application. Kamal deploys to any VPS, Solid Queue/Cache/Cable eliminate Redis, and Thruster eliminates nginx.
                    </div>

                    <a href="#top" class="back-to-top">&uarr; Back to Top</a>
                </div>
            </section>

            <!-- ============================================
                 TITLE BLOCK (COLOPHON)
                 ============================================ -->

            <div class="title-block">
                <div class="title-block-main">
                    <div>
                        <div class="title-block-row"><span class="title-block-label">Guide</span><span class="title-block-value">Ruby Programming</span></div>
                        <div class="title-block-row"><span class="title-block-label">Subject</span><span class="title-block-value">Language &amp; Rails Reference</span></div>
                    </div>
                    <div>
                        <div class="title-block-row"><span class="title-block-label">Format</span><span class="title-block-value">Conceptual Reference</span></div>
                        <div class="title-block-row"><span class="title-block-label">Sections</span><span class="title-block-value">12</span></div>
                    </div>
                    <div>
                        <div class="title-block-row"><span class="title-block-label">Created</span><span class="title-block-value">2026-02-10</span></div>
                        <div class="title-block-row"><span class="title-block-label">Version</span><span class="title-block-value">Ruby 3.3 / Rails 8</span></div>
                    </div>
                </div>
                <div class="title-block-info">
                    <div class="title-block-row"><span class="title-block-label">Style</span><span class="title-block-value">Ukiyo-e</span></div>
                    <div class="title-block-row"><span class="title-block-label">Number</span><span class="title-block-value" style="color: var(--ruby-red);">22</span></div>
                    <div class="title-block-row"><span class="title-block-label">Status</span><span class="title-block-value">Active</span></div>
                </div>
            </div>

            <!-- ============================================
                 FOOTER
                 ============================================ -->
            <footer class="site-footer">
                <div class="footer-content">
                    <div>
                        <div class="footer-logo">Ruby Programming Guide</div>
                        <p>Conceptual Reference &mdash; Ruby 3.3 / Rails 8</p>
                        <p>&ldquo;I hope to see Ruby help every programmer in the world to be productive and to be happy.&rdquo;</p>
                        <p>&copy; 2026 Tech Guides Collection</p>
                    </div>
                    <div style="text-align: right;">
                        <div class="hanko">&#23453;</div>
                    </div>
                </div>
            </footer>

        </div><!-- /scroll-frame -->
    </div><!-- /page-wrapper -->
</body>
</html>
